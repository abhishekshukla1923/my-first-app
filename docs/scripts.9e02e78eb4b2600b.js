(function(Fo,Ln){"object"==typeof exports&&typeof module<"u"?module.exports=Ln(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],Ln):(Fo=typeof globalThis<"u"?globalThis:Fo||self).bootstrap=Ln(Fo.Popper)})(this,function(Fo){"use strict";const hs=function Ln(B){if(B&&B.__esModule)return B;const h=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(B)for(const w in B)if("default"!==w){const D=Object.getOwnPropertyDescriptor(B,w);Object.defineProperty(h,w,D.get?D:{enumerable:!0,get:()=>B[w]})}return h.default=B,Object.freeze(h)}(Fo),ps="transitionend",di=B=>{let h=B.getAttribute("data-bs-target");if(!h||"#"===h){let w=B.getAttribute("href");if(!w||!w.includes("#")&&!w.startsWith("."))return null;w.includes("#")&&!w.startsWith("#")&&(w=`#${w.split("#")[1]}`),h=w&&"#"!==w?w.trim():null}return h},bs=B=>{const h=di(B);return h&&document.querySelector(h)?h:null},Pn=B=>{const h=di(B);return h?document.querySelector(h):null},ui=B=>{B.dispatchEvent(new Event(ps))},sn=B=>!(!B||"object"!=typeof B)&&(void 0!==B.jquery&&(B=B[0]),void 0!==B.nodeType),xn=B=>sn(B)?B.jquery?B[0]:B:"string"==typeof B&&B.length>0?document.querySelector(B):null,_o=B=>{if(!sn(B)||0===B.getClientRects().length)return!1;const h="visible"===getComputedStyle(B).getPropertyValue("visibility"),w=B.closest("details:not([open])");if(!w)return h;if(w!==B){const D=B.closest("summary");if(D&&D.parentNode!==w||null===D)return!1}return h},an=B=>!B||B.nodeType!==Node.ELEMENT_NODE||!!B.classList.contains("disabled")||(void 0!==B.disabled?B.disabled:B.hasAttribute("disabled")&&"false"!==B.getAttribute("disabled")),ft=B=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof B.getRootNode){const h=B.getRootNode();return h instanceof ShadowRoot?h:null}return B instanceof ShadowRoot?B:B.parentNode?ft(B.parentNode):null},le=()=>{},Xt=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,In=[],ge=()=>"rtl"===document.documentElement.dir,zt=B=>{var h;h=()=>{const w=Xt();if(w){const D=B.NAME,V=w.fn[D];w.fn[D]=B.jQueryInterface,w.fn[D].Constructor=B,w.fn[D].noConflict=()=>(w.fn[D]=V,B.jQueryInterface)}},"loading"===document.readyState?(In.length||document.addEventListener("DOMContentLoaded",()=>{for(const w of In)w()}),In.push(h)):h()},It=B=>{"function"==typeof B&&B()},et=(B,h,w=!0)=>{if(!w)return void It(B);const D=(S=>{if(!S)return 0;let{transitionDuration:Ot,transitionDelay:$t}=window.getComputedStyle(S);const Wt=Number.parseFloat(Ot),Ie=Number.parseFloat($t);return Wt||Ie?(Ot=Ot.split(",")[0],$t=$t.split(",")[0],1e3*(Number.parseFloat(Ot)+Number.parseFloat($t))):0})(h)+5;let V=!1;const it=({target:S})=>{S===h&&(V=!0,h.removeEventListener(ps,it),It(B))};h.addEventListener(ps,it),setTimeout(()=>{V||ui(h)},D)},Rt=(B,h,w,D)=>{const V=B.length;let it=B.indexOf(h);return-1===it?!w&&D?B[V-1]:B[0]:(it+=w?1:-1,D&&(it=(it+V)%V),B[Math.max(0,Math.min(it,V-1))])},ln=/[^.]*(?=\..*)\.|.*/,Uo=/\..*/,xt=/::\d+$/,Mn={};let mi=1;const J={mouseenter:"mouseover",mouseleave:"mouseout"},Ce=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ua(B,h){return h&&`${h}::${mi++}`||B.uidEvent||mi++}function rt(B){const h=Ua(B);return B.uidEvent=h,Mn[h]=Mn[h]||{},Mn[h]}function yr(B,h,w=null){return Object.values(B).find(D=>D.callable===h&&D.delegationSelector===w)}function vs(B,h,w){const D="string"==typeof h,V=D?w:h||w;let it=C(B);return Ce.has(it)||(it=B),[D,V,it]}function zo(B,h,w,D,V){if("string"!=typeof h||!B)return;let[it,S,Ot]=vs(h,w,D);var Ne;h in J&&(Ne=S,S=function(Ae){if(!Ae.relatedTarget||Ae.relatedTarget!==Ae.delegateTarget&&!Ae.delegateTarget.contains(Ae.relatedTarget))return Ne.call(this,Ae)});const $t=rt(B),Wt=$t[Ot]||($t[Ot]={}),Ie=yr(Wt,S,it?w:null);if(Ie)return void(Ie.oneOff=Ie.oneOff&&V);const kt=Ua(S,h.replace(ln,"")),ke=it?function(mn,Ne,Ae){return function Re(Lr){const sl=mn.querySelectorAll(Ne);for(let{target:We}=Lr;We&&We!==this;We=We.parentNode)for(const Pr of sl)if(Pr===We)return fi(Lr,{delegateTarget:We}),Re.oneOff&&Z.off(mn,Lr.type,Ne,Ae),Ae.apply(We,[Lr])}}(B,w,S):function(mn,Ne){return function Ae(Re){return fi(Re,{delegateTarget:mn}),Ae.oneOff&&Z.off(mn,Re.type,Ne),Ne.apply(mn,[Re])}}(B,S);ke.delegationSelector=it?w:null,ke.callable=S,ke.oneOff=V,ke.uidEvent=kt,Wt[kt]=ke,B.addEventListener(Ot,ke,it)}function jt(B,h,w,D,V){const it=yr(h[w],D,V);it&&(B.removeEventListener(w,it,Boolean(V)),delete h[w][it.uidEvent])}function Gt(B,h,w,D){const V=h[w]||{};for(const it of Object.keys(V))if(it.includes(D)){const S=V[it];jt(B,h,w,S.callable,S.delegationSelector)}}function C(B){return B=B.replace(Uo,""),J[B]||B}const Z={on(B,h,w,D){zo(B,h,w,D,!1)},one(B,h,w,D){zo(B,h,w,D,!0)},off(B,h,w,D){if("string"!=typeof h||!B)return;const[V,it,S]=vs(h,w,D),Ot=S!==h,$t=rt(B),Wt=$t[S]||{},Ie=h.startsWith(".");if(void 0===it){if(Ie)for(const kt of Object.keys($t))Gt(B,$t,kt,h.slice(1));for(const kt of Object.keys(Wt)){const ke=kt.replace(xt,"");if(!Ot||h.includes(ke)){const mn=Wt[kt];jt(B,$t,S,mn.callable,mn.delegationSelector)}}}else{if(!Object.keys(Wt).length)return;jt(B,$t,S,it,V?w:null)}},trigger(B,h,w){if("string"!=typeof h||!B)return null;const D=Xt();let V=null,it=!0,S=!0,Ot=!1;h!==C(h)&&D&&(V=D.Event(h,w),D(B).trigger(V),it=!V.isPropagationStopped(),S=!V.isImmediatePropagationStopped(),Ot=V.isDefaultPrevented());let $t=new Event(h,{bubbles:it,cancelable:!0});return $t=fi($t,w),Ot&&$t.preventDefault(),S&&B.dispatchEvent($t),$t.defaultPrevented&&V&&V.preventDefault(),$t}};function fi(B,h){for(const[w,D]of Object.entries(h||{}))try{B[w]=D}catch{Object.defineProperty(B,w,{configurable:!0,get:()=>D})}return B}const Gn=new Map,ys={set(B,h,w){Gn.has(B)||Gn.set(B,new Map);const D=Gn.get(B);D.has(h)||0===D.size?D.set(h,w):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(D.keys())[0]}.`)},get:(B,h)=>Gn.has(B)&&Gn.get(B).get(h)||null,remove(B,h){if(!Gn.has(B))return;const w=Gn.get(B);w.delete(h),0===w.size&&Gn.delete(B)}};function Bt(B){if("true"===B)return!0;if("false"===B)return!1;if(B===Number(B).toString())return Number(B);if(""===B||"null"===B)return null;if("string"!=typeof B)return B;try{return JSON.parse(decodeURIComponent(B))}catch{return B}}function Ht(B){return B.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const Et={setDataAttribute(B,h,w){B.setAttribute(`data-bs-${Ht(h)}`,w)},removeDataAttribute(B,h){B.removeAttribute(`data-bs-${Ht(h)}`)},getDataAttributes(B){if(!B)return{};const h={},w=Object.keys(B.dataset).filter(D=>D.startsWith("bs")&&!D.startsWith("bsConfig"));for(const D of w){let V=D.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),h[V]=Bt(B.dataset[D])}return h},getDataAttribute:(B,h)=>Bt(B.getAttribute(`data-bs-${Ht(h)}`))};class W{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,w){const D=sn(w)?Et.getDataAttribute(w,"config"):{};return{...this.constructor.Default,..."object"==typeof D?D:{},...sn(w)?Et.getDataAttributes(w):{},..."object"==typeof h?h:{}}}_typeCheckConfig(h,w=this.constructor.DefaultType){for(const V of Object.keys(w)){const it=w[V],S=h[V],Ot=sn(S)?"element":null==(D=S)?`${D}`:Object.prototype.toString.call(D).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(it).test(Ot))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${V}" provided type "${Ot}" but expected type "${it}".`)}var D}}class Je extends W{constructor(h,w){super(),(h=xn(h))&&(this._element=h,this._config=this._getConfig(w),ys.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ys.remove(this._element,this.constructor.DATA_KEY),Z.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,w,D=!0){et(h,w,D)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return ys.get(xn(h),this.DATA_KEY)}static getOrCreateInstance(h,w={}){return this.getInstance(h)||new this(h,"object"==typeof w?w:null)}static get VERSION(){return"5.2.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const Qn=(B,h="hide")=>{const D=B.NAME;Z.on(document,`click.dismiss${B.EVENT_KEY}`,`[data-bs-dismiss="${D}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),an(this))return;const it=Pn(this)||this.closest(`.${D}`);B.getOrCreateInstance(it)[h]()})};class gt extends Je{static get NAME(){return"alert"}close(){if(Z.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),Z.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(h){return this.each(function(){const w=gt.getOrCreateInstance(this);if("string"==typeof h){if(void 0===w[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);w[h](this)}})}}Qn(gt,"close"),zt(gt);const _r='[data-bs-toggle="button"]';class he extends Je{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const w=he.getOrCreateInstance(this);"toggle"===h&&w[h]()})}}Z.on(document,"click.bs.button.data-api",_r,B=>{B.preventDefault();const h=B.target.closest(_r);he.getOrCreateInstance(h).toggle()}),zt(he);const Nt={find:(B,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,B)),findOne:(B,h=document.documentElement)=>Element.prototype.querySelector.call(h,B),children:(B,h)=>[].concat(...B.children).filter(w=>w.matches(h)),parents(B,h){const w=[];let D=B.parentNode.closest(h);for(;D;)w.push(D),D=D.parentNode.closest(h);return w},prev(B,h){let w=B.previousElementSibling;for(;w;){if(w.matches(h))return[w];w=w.previousElementSibling}return[]},next(B,h){let w=B.nextElementSibling;for(;w;){if(w.matches(h))return[w];w=w.nextElementSibling}return[]},focusableChildren(B){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(w=>`${w}:not([tabindex^="-"])`).join(",");return this.find(h,B).filter(w=>!an(w)&&_o(w))}},ne={endCallback:null,leftCallback:null,rightCallback:null},Cr={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class wr extends W{constructor(h,w){super(),this._element=h,h&&wr.isSupported()&&(this._config=this._getConfig(w),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ne}static get DefaultType(){return Cr}static get NAME(){return"swipe"}dispose(){Z.off(this._element,".bs.swipe")}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),It(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const w=h/this._deltaX;this._deltaX=0,w&&It(w>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(Z.on(this._element,"pointerdown.bs.swipe",h=>this._start(h)),Z.on(this._element,"pointerup.bs.swipe",h=>this._end(h)),this._element.classList.add("pointer-event")):(Z.on(this._element,"touchstart.bs.swipe",h=>this._start(h)),Z.on(this._element,"touchmove.bs.swipe",h=>this._move(h)),Z.on(this._element,"touchend.bs.swipe",h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&("pen"===h.pointerType||"touch"===h.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const $e="next",Ze="prev",En="left",Ho="right",kr="slid.bs.carousel",Co="carousel",wo="active",Se={ArrowLeft:Ho,ArrowRight:En},ko={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Le={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class cn extends Je{constructor(h,w){super(h,w),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Nt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Co&&this.cycle()}static get Default(){return ko}static get DefaultType(){return Le}static get NAME(){return"carousel"}next(){this._slide($e)}nextWhenVisible(){!document.hidden&&_o(this._element)&&this.next()}prev(){this._slide(Ze)}pause(){this._isSliding&&ui(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?Z.one(this._element,kr,()=>this.cycle()):this.cycle())}to(h){const w=this._getItems();if(h>w.length-1||h<0)return;if(this._isSliding)return void Z.one(this._element,kr,()=>this.to(h));const D=this._getItemIndex(this._getActive());D!==h&&this._slide(h>D?$e:Ze,w[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&Z.on(this._element,"keydown.bs.carousel",h=>this._keydown(h)),"hover"===this._config.pause&&(Z.on(this._element,"mouseenter.bs.carousel",()=>this.pause()),Z.on(this._element,"mouseleave.bs.carousel",()=>this._maybeEnableCycle())),this._config.touch&&wr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const w of Nt.find(".carousel-item img",this._element))Z.on(w,"dragstart.bs.carousel",D=>D.preventDefault());this._swipeHelper=new wr(this._element,{leftCallback:()=>this._slide(this._directionToOrder(En)),rightCallback:()=>this._slide(this._directionToOrder(Ho)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const w=Se[h.key];w&&(h.preventDefault(),this._slide(this._directionToOrder(w)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const w=Nt.findOne(".active",this._indicatorsElement);w.classList.remove(wo),w.removeAttribute("aria-current");const D=Nt.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);D&&(D.classList.add(wo),D.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const w=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=w||this._config.defaultInterval}_slide(h,w=null){if(this._isSliding)return;const D=this._getActive(),V=h===$e,it=w||Rt(this._getItems(),D,V,this._config.wrap);if(it===D)return;const S=this._getItemIndex(it),Ot=kt=>Z.trigger(this._element,kt,{relatedTarget:it,direction:this._orderToDirection(h),from:this._getItemIndex(D),to:S});if(Ot("slide.bs.carousel").defaultPrevented||!D||!it)return;const $t=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(S),this._activeElement=it;const Wt=V?"carousel-item-start":"carousel-item-end",Ie=V?"carousel-item-next":"carousel-item-prev";it.classList.add(Ie),D.classList.add(Wt),it.classList.add(Wt),this._queueCallback(()=>{it.classList.remove(Wt,Ie),it.classList.add(wo),D.classList.remove(wo,Ie,Wt),this._isSliding=!1,Ot(kr)},D,this._isAnimated()),$t&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return Nt.findOne(".active.carousel-item",this._element)}_getItems(){return Nt.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return ge()?h===En?Ze:$e:h===En?$e:Ze}_orderToDirection(h){return ge()?h===Ze?En:Ho:h===Ze?Ho:En}static jQueryInterface(h){return this.each(function(){const w=cn.getOrCreateInstance(this,h);if("number"!=typeof h){if("string"==typeof h){if(void 0===w[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);w[h]()}}else w.to(h)})}}Z.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",function(B){const h=Pn(this);if(!h||!h.classList.contains(Co))return;B.preventDefault();const w=cn.getOrCreateInstance(h),D=this.getAttribute("data-bs-slide-to");return D?(w.to(D),void w._maybeEnableCycle()):"next"===Et.getDataAttribute(this,"slide")?(w.next(),void w._maybeEnableCycle()):(w.prev(),void w._maybeEnableCycle())}),Z.on(window,"load.bs.carousel.data-api",()=>{const B=Nt.find('[data-bs-ride="carousel"]');for(const h of B)cn.getOrCreateInstance(h)}),zt(cn);const we="show",_s="collapse",Dt="collapsing",$o='[data-bs-toggle="collapse"]',rd={parent:null,toggle:!0},gi={parent:"(null|element)",toggle:"boolean"};class xo extends Je{constructor(h,w){super(h,w),this._isTransitioning=!1,this._triggerArray=[];const D=Nt.find($o);for(const V of D){const it=bs(V),S=Nt.find(it).filter(Ot=>Ot===this._element);null!==it&&S.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return rd}static get DefaultType(){return gi}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(V=>V!==this._element).map(V=>xo.getOrCreateInstance(V,{toggle:!1}))),h.length&&h[0]._isTransitioning||Z.trigger(this._element,"show.bs.collapse").defaultPrevented)return;for(const V of h)V.hide();const w=this._getDimension();this._element.classList.remove(_s),this._element.classList.add(Dt),this._element.style[w]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const D=`scroll${w[0].toUpperCase()+w.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Dt),this._element.classList.add(_s,we),this._element.style[w]="",Z.trigger(this._element,"shown.bs.collapse")},this._element,!0),this._element.style[w]=`${this._element[D]}px`}hide(){if(this._isTransitioning||!this._isShown()||Z.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,this._element.classList.add(Dt),this._element.classList.remove(_s,we);for(const w of this._triggerArray){const D=Pn(w);D&&!this._isShown(D)&&this._addAriaAndCollapsedClass([w],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Dt),this._element.classList.add(_s),Z.trigger(this._element,"hidden.bs.collapse")},this._element,!0)}_isShown(h=this._element){return h.classList.contains(we)}_configAfterMerge(h){return h.toggle=Boolean(h.toggle),h.parent=xn(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren($o);for(const w of h){const D=Pn(w);D&&this._addAriaAndCollapsedClass([w],this._isShown(D))}}_getFirstLevelChildren(h){const w=Nt.find(":scope .collapse .collapse",this._config.parent);return Nt.find(h,this._config.parent).filter(D=>!w.includes(D))}_addAriaAndCollapsedClass(h,w){if(h.length)for(const D of h)D.classList.toggle("collapsed",!w),D.setAttribute("aria-expanded",w)}static jQueryInterface(h){const w={};return"string"==typeof h&&/show|hide/.test(h)&&(w.toggle=!1),this.each(function(){const D=xo.getOrCreateInstance(this,w);if("string"==typeof h){if(void 0===D[h])throw new TypeError(`No method named "${h}"`);D[h]()}})}}Z.on(document,"click.bs.collapse.data-api",$o,function(B){("A"===B.target.tagName||B.delegateTarget&&"A"===B.delegateTarget.tagName)&&B.preventDefault();const h=bs(this),w=Nt.find(h);for(const D of w)xo.getOrCreateInstance(D,{toggle:!1}).toggle()}),zt(xo);const qo="dropdown",hi="ArrowUp",Cs="ArrowDown",Mt="click.bs.dropdown.data-api",Ct="keydown.bs.dropdown.data-api",Sn="show",Jn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',za=`${Jn}.show`,Vo=".dropdown-menu",ws=ge()?"top-end":"top-start",pi=ge()?"top-start":"top-end",xr=ge()?"bottom-end":"bottom-start",ks=ge()?"bottom-start":"bottom-end",Ha=ge()?"left-start":"right-start",Eo=ge()?"right-start":"left-start",So={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},$a={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class qe extends Je{constructor(h,w){super(h,w),this._popper=null,this._parent=this._element.parentNode,this._menu=Nt.next(this._element,Vo)[0]||Nt.prev(this._element,Vo)[0]||Nt.findOne(Vo,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return So}static get DefaultType(){return $a}static get NAME(){return qo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(an(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!Z.trigger(this._element,"show.bs.dropdown",h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const w of[].concat(...document.body.children))Z.on(w,"mouseover",le);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Sn),this._element.classList.add(Sn),Z.trigger(this._element,"shown.bs.dropdown",h)}}hide(){!an(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!Z.trigger(this._element,"hide.bs.dropdown",h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))Z.off(w,"mouseover",le);this._popper&&this._popper.destroy(),this._menu.classList.remove(Sn),this._element.classList.remove(Sn),this._element.setAttribute("aria-expanded","false"),Et.removeDataAttribute(this._menu,"popper"),Z.trigger(this._element,"hidden.bs.dropdown",h)}}_getConfig(h){if("object"==typeof(h=super._getConfig(h)).reference&&!sn(h.reference)&&"function"!=typeof h.reference.getBoundingClientRect)throw new TypeError(`${qo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(void 0===hs)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;"parent"===this._config.reference?h=this._parent:sn(this._config.reference)?h=xn(this._config.reference):"object"==typeof this._config.reference&&(h=this._config.reference);const w=this._getPopperConfig();this._popper=hs.createPopper(h,this._menu,w)}_isShown(){return this._menu.classList.contains(Sn)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return Ha;if(h.classList.contains("dropstart"))return Eo;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const w="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return h.classList.contains("dropup")?w?pi:ws:w?ks:xr}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:h}=this._config;return"string"==typeof h?h.split(",").map(w=>Number.parseInt(w,10)):"function"==typeof h?w=>h(w,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Et.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,..."function"==typeof this._config.popperConfig?this._config.popperConfig(h):this._config.popperConfig}}_selectMenuItem({key:h,target:w}){const D=Nt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(V=>_o(V));D.length&&Rt(D,w,h===Cs,!D.includes(w)).focus()}static jQueryInterface(h){return this.each(function(){const w=qe.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===w[h])throw new TypeError(`No method named "${h}"`);w[h]()}})}static clearMenus(h){if(2===h.button||"keyup"===h.type&&"Tab"!==h.key)return;const w=Nt.find(za);for(const D of w){const V=qe.getInstance(D);if(!V||!1===V._config.autoClose)continue;const it=h.composedPath(),S=it.includes(V._menu);if(it.includes(V._element)||"inside"===V._config.autoClose&&!S||"outside"===V._config.autoClose&&S||V._menu.contains(h.target)&&("keyup"===h.type&&"Tab"===h.key||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const Ot={relatedTarget:V._element};"click"===h.type&&(Ot.clickEvent=h),V._completeHide(Ot)}}static dataApiKeydownHandler(h){const w=/input|textarea/i.test(h.target.tagName),D="Escape"===h.key,V=[hi,Cs].includes(h.key);if(!V&&!D||w&&!D)return;h.preventDefault();const it=this.matches(Jn)?this:Nt.prev(this,Jn)[0]||Nt.next(this,Jn)[0]||Nt.findOne(Jn,h.delegateTarget.parentNode),S=qe.getOrCreateInstance(it);if(V)return h.stopPropagation(),S.show(),void S._selectMenuItem(h);S._isShown()&&(h.stopPropagation(),S.hide(),it.focus())}}Z.on(document,Ct,Jn,qe.dataApiKeydownHandler),Z.on(document,Ct,Vo,qe.dataApiKeydownHandler),Z.on(document,Mt,qe.clearMenus),Z.on(document,"keyup.bs.dropdown.data-api",qe.clearMenus),Z.on(document,Mt,Jn,function(B){B.preventDefault(),qe.getOrCreateInstance(this).toggle()}),zt(qe);const Wo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bi=".sticky-top",Er="padding-right",ce="margin-right";class oe{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Er,w=>w+h),this._setElementAttributes(Wo,Er,w=>w+h),this._setElementAttributes(bi,ce,w=>w-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Er),this._resetElementAttributes(Wo,Er),this._resetElementAttributes(bi,ce)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,w,D){const V=this.getWidth();this._applyManipulationCallback(h,it=>{if(it!==this._element&&window.innerWidth>it.clientWidth+V)return;this._saveInitialAttribute(it,w);const S=window.getComputedStyle(it).getPropertyValue(w);it.style.setProperty(w,`${D(Number.parseFloat(S))}px`)})}_saveInitialAttribute(h,w){const D=h.style.getPropertyValue(w);D&&Et.setDataAttribute(h,w,D)}_resetElementAttributes(h,w){this._applyManipulationCallback(h,D=>{const V=Et.getDataAttribute(D,w);null!==V?(Et.removeDataAttribute(D,w),D.style.setProperty(w,V)):D.style.removeProperty(w)})}_applyManipulationCallback(h,w){if(sn(h))w(h);else for(const D of Nt.find(h,this._element))w(D)}}const xs="mousedown.bs.backdrop",Ko={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},sd={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class yi extends W{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return Ko}static get DefaultType(){return sd}static get NAME(){return"backdrop"}show(h){if(!this._config.isVisible)return void It(h);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{It(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),It(h)})):It(h)}dispose(){this._isAppended&&(Z.off(this._element,xs),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=xn(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),Z.on(h,xs,()=>{It(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){et(h,this._getElement(),this._config.isAnimated)}}const dn=".bs.focustrap",Yo="backward",Es={autofocus:!0,trapElement:null},_i={autofocus:"boolean",trapElement:"element"};class Nn extends W{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Es}static get DefaultType(){return _i}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),Z.off(document,dn),Z.on(document,"focusin.bs.focustrap",h=>this._handleFocusin(h)),Z.on(document,"keydown.tab.bs.focustrap",h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,Z.off(document,dn))}_handleFocusin(h){const{trapElement:w}=this._config;if(h.target===document||h.target===w||w.contains(h.target))return;const D=Nt.focusableChildren(w);0===D.length?w.focus():this._lastTabNavDirection===Yo?D[D.length-1].focus():D[0].focus()}_handleKeydown(h){"Tab"===h.key&&(this._lastTabNavDirection=h.shiftKey?Yo:"forward")}}const qa="hidden.bs.modal",Va="show.bs.modal",Ci="modal-open",Ss="modal-static",Wa={backdrop:!0,focus:!0,keyboard:!0},Ka={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Zn extends Je{constructor(h,w){super(h,w),this._dialog=Nt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new oe,this._addEventListeners()}static get Default(){return Wa}static get DefaultType(){return Ka}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||Z.trigger(this._element,Va,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ci),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(Z.trigger(this._element,"hide.bs.modal").defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){for(const h of[window,this._dialog])Z.off(h,".bs.modal");this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new yi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Nn({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const w=Nt.findOne(".modal-body",this._dialog);w&&(w.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,Z.trigger(this._element,"shown.bs.modal",{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){Z.on(this._element,"keydown.dismiss.bs.modal",h=>{if("Escape"===h.key)return this._config.keyboard?(h.preventDefault(),void this.hide()):void this._triggerBackdropTransition()}),Z.on(window,"resize.bs.modal",()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),Z.on(this._element,"mousedown.dismiss.bs.modal",h=>{Z.one(this._element,"click.dismiss.bs.modal",w=>{this._element===h.target&&this._element===w.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ci),this._resetAdjustments(),this._scrollBar.reset(),Z.trigger(this._element,qa)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(Z.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,w=this._element.style.overflowY;"hidden"===w||this._element.classList.contains(Ss)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Ss),this._queueCallback(()=>{this._element.classList.remove(Ss),this._queueCallback(()=>{this._element.style.overflowY=w},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,w=this._scrollBar.getWidth(),D=w>0;if(D&&!h){const V=ge()?"paddingLeft":"paddingRight";this._element.style[V]=`${w}px`}if(!D&&h){const V=ge()?"paddingRight":"paddingLeft";this._element.style[V]=`${w}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,w){return this.each(function(){const D=Zn.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===D[h])throw new TypeError(`No method named "${h}"`);D[h](w)}})}}Z.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',function(B){const h=Pn(this);["A","AREA"].includes(this.tagName)&&B.preventDefault(),Z.one(h,Va,D=>{D.defaultPrevented||Z.one(h,qa,()=>{_o(this)&&this.focus()})});const w=Nt.findOne(".modal.show");w&&Zn.getInstance(w).hide(),Zn.getOrCreateInstance(h).toggle(this)}),Qn(Zn),zt(Zn);const Ya="showing",xi=".offcanvas.show",Ei="hidePrevented.bs.offcanvas",Si="hidden.bs.offcanvas",Ga={backdrop:!0,keyboard:!0,scroll:!1},Qa={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class An extends Je{constructor(h,w){super(h,w),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ga}static get DefaultType(){return Qa}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||Z.trigger(this._element,"show.bs.offcanvas",{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new oe).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ya),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(Ya),Z.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(Z.trigger(this._element,"hide.bs.offcanvas").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new oe).reset(),Z.trigger(this._element,Si)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=Boolean(this._config.backdrop);return new yi({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{"static"!==this._config.backdrop?this.hide():Z.trigger(this._element,Ei)}:null})}_initializeFocusTrap(){return new Nn({trapElement:this._element})}_addEventListeners(){Z.on(this._element,"keydown.dismiss.bs.offcanvas",h=>{"Escape"===h.key&&(this._config.keyboard?this.hide():Z.trigger(this._element,Ei))})}static jQueryInterface(h){return this.each(function(){const w=An.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===w[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);w[h](this)}})}}Z.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',function(B){const h=Pn(this);if(["A","AREA"].includes(this.tagName)&&B.preventDefault(),an(this))return;Z.one(h,Si,()=>{_o(this)&&this.focus()});const w=Nt.findOne(xi);w&&w!==h&&An.getInstance(w).hide(),An.getOrCreateInstance(h).toggle(this)}),Z.on(window,"load.bs.offcanvas.data-api",()=>{for(const B of Nt.find(xi))An.getOrCreateInstance(B).show()}),Z.on(window,"resize.bs.offcanvas",()=>{for(const B of Nt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(B).position&&An.getOrCreateInstance(B).hide()}),Qn(An),zt(An);const Ja=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Za=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,id=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,ad=(B,h)=>{const w=B.nodeName.toLowerCase();return h.includes(w)?!Ja.has(w)||Boolean(Za.test(B.nodeValue)||id.test(B.nodeValue)):h.filter(D=>D instanceof RegExp).some(D=>D.test(w))},tl={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ld={allowList:tl,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},No={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},cd={entry:"(string|element|function|null)",selector:"(string|element)"};class Ni extends W{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return ld}static get DefaultType(){return No}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[V,it]of Object.entries(this._config.content))this._setContent(h,it,V);const w=h.children[0],D=this._resolvePossibleFunction(this._config.extraClass);return D&&w.classList.add(...D.split(" ")),w}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[w,D]of Object.entries(h))super._typeCheckConfig({selector:w,entry:D},cd)}_setContent(h,w,D){const V=Nt.findOne(D,h);V&&((w=this._resolvePossibleFunction(w))?sn(w)?this._putElementInTemplate(xn(w),V):this._config.html?V.innerHTML=this._maybeSanitize(w):V.textContent=w:V.remove())}_maybeSanitize(h){return this._config.sanitize?function(w,D,V){if(!w.length)return w;if(V&&"function"==typeof V)return V(w);const it=(new window.DOMParser).parseFromString(w,"text/html"),S=[].concat(...it.body.querySelectorAll("*"));for(const Ot of S){const $t=Ot.nodeName.toLowerCase();if(!Object.keys(D).includes($t)){Ot.remove();continue}const Wt=[].concat(...Ot.attributes),Ie=[].concat(D["*"]||[],D[$t]||[]);for(const kt of Wt)ad(kt,Ie)||Ot.removeAttribute(kt.nodeName)}return it.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return"function"==typeof h?h(this):h}_putElementInTemplate(h,w){if(this._config.html)return w.innerHTML="",void w.append(h);w.textContent=h.textContent}}const Rn=new Set(["sanitize","allowList","sanitizeFn"]),tn="fade",Tn="show",At="hide.bs.modal",Ns="hover",nl={AUTO:"auto",TOP:"top",RIGHT:ge()?"left":"right",BOTTOM:"bottom",LEFT:ge()?"right":"left"},Y={allowList:tl,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Xo={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Jt extends Je{constructor(h,w){if(void 0===hs)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,w),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Y}static get DefaultType(){return Xo}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),Z.off(this._element.closest(".modal"),At,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=Z.trigger(this._element,this.constructor.eventName("show")),w=(ft(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!w)return;this._disposePopper();const D=this._getTipElement();this._element.setAttribute("aria-describedby",D.getAttribute("id"));const{container:V}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(V.append(D),Z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(D),D.classList.add(Tn),"ontouchstart"in document.documentElement)for(const it of[].concat(...document.body.children))Z.on(it,"mouseover",le);this._queueCallback(()=>{Z.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!Z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Tn),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))Z.off(h,"mouseover",le);this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),Z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const w=this._getTemplateFactory(h).toHtml();if(!w)return null;w.classList.remove(tn,Tn),w.classList.add(`bs-${this.constructor.NAME}-auto`);const D=(V=>{do{V+=Math.floor(1e6*Math.random())}while(document.getElementById(V));return V})(this.constructor.NAME).toString();return w.setAttribute("id",D),this._isAnimated()&&w.classList.add(tn),w}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new Ni({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(tn)}_isShown(){return this.tip&&this.tip.classList.contains(Tn)}_createPopper(h){const w="function"==typeof this._config.placement?this._config.placement.call(this,h,this._element):this._config.placement,D=nl[w.toUpperCase()];return hs.createPopper(this._element,h,this._getPopperConfig(D))}_getOffset(){const{offset:h}=this._config;return"string"==typeof h?h.split(",").map(w=>Number.parseInt(w,10)):"function"==typeof h?w=>h(w,this._element):h}_resolvePossibleFunction(h){return"function"==typeof h?h.call(this._element):h}_getPopperConfig(h){const w={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:D=>{this._getTipElement().setAttribute("data-popper-placement",D.state.placement)}}]};return{...w,..."function"==typeof this._config.popperConfig?this._config.popperConfig(w):this._config.popperConfig}}_setListeners(){const h=this._config.trigger.split(" ");for(const w of h)if("click"===w)Z.on(this._element,this.constructor.eventName("click"),this._config.selector,D=>{this._initializeOnDelegatedTarget(D).toggle()});else if("manual"!==w){const D=this.constructor.eventName(w===Ns?"mouseenter":"focusin"),V=this.constructor.eventName(w===Ns?"mouseleave":"focusout");Z.on(this._element,D,this._config.selector,it=>{const S=this._initializeOnDelegatedTarget(it);S._activeTrigger["focusin"===it.type?"focus":Ns]=!0,S._enter()}),Z.on(this._element,V,this._config.selector,it=>{const S=this._initializeOnDelegatedTarget(it);S._activeTrigger["focusout"===it.type?"focus":Ns]=S._element.contains(it.relatedTarget),S._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},Z.on(this._element.closest(".modal"),At,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,w){clearTimeout(this._timeout),this._timeout=setTimeout(h,w)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const w=Et.getDataAttributes(this._element);for(const D of Object.keys(w))Rn.has(D)&&delete w[D];return h={...w,..."object"==typeof h&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=!1===h.container?document.body:xn(h.container),"number"==typeof h.delay&&(h.delay={show:h.delay,hide:h.delay}),"number"==typeof h.title&&(h.title=h.title.toString()),"number"==typeof h.content&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const w in this._config)this.constructor.Default[w]!==this._config[w]&&(h[w]=this._config[w]);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const w=Jt.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===w[h])throw new TypeError(`No method named "${h}"`);w[h]()}})}}zt(Jt);const Sr={...Jt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ft={...Jt.DefaultType,content:"(null|string|element|function)"};class Nr extends Jt{static get Default(){return Sr}static get DefaultType(){return Ft}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const w=Nr.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===w[h])throw new TypeError(`No method named "${h}"`);w[h]()}})}}zt(Nr);const Ar="click.bs.scrollspy",pe="active",dd={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ud={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ao extends Je{constructor(h,w){super(h,w),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return dd}static get DefaultType(){return ud}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=xn(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,"string"==typeof h.threshold&&(h.threshold=h.threshold.split(",").map(w=>Number.parseFloat(w))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(Z.off(this._config.target,Ar),Z.on(this._config.target,Ar,"[href]",h=>{const w=this._observableSections.get(h.target.hash);if(w){h.preventDefault();const D=this._rootElement||window,V=w.offsetTop-this._element.offsetTop;if(D.scrollTo)return void D.scrollTo({top:V,behavior:"smooth"});D.scrollTop=V}}))}_getNewObserver(){return new IntersectionObserver(w=>this._observerCallback(w),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(h){const w=S=>this._targetLinks.get(`#${S.target.id}`),D=S=>{this._previousScrollData.visibleEntryTop=S.target.offsetTop,this._process(w(S))},V=(this._rootElement||document.documentElement).scrollTop,it=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const S of h){if(!S.isIntersecting){this._activeTarget=null,this._clearActiveClass(w(S));continue}const Ot=S.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(it&&Ot){if(D(S),!V)return}else it||Ot||D(S)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=Nt.find("[href]",this._config.target);for(const w of h){if(!w.hash||an(w))continue;const D=Nt.findOne(w.hash,this._element);_o(D)&&(this._targetLinks.set(w.hash,w),this._observableSections.set(w.hash,D))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(pe),this._activateParents(h),Z.trigger(this._element,"activate.bs.scrollspy",{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))Nt.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(pe);else for(const w of Nt.parents(h,".nav, .list-group"))for(const D of Nt.prev(w,".nav-link, .nav-item > .nav-link, .list-group-item"))D.classList.add(pe)}_clearActiveClass(h){h.classList.remove(pe);const w=Nt.find("[href].active",h);for(const D of w)D.classList.remove(pe)}static jQueryInterface(h){return this.each(function(){const w=Ao.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===w[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);w[h]()}})}}Z.on(window,"load.bs.scrollspy.data-api",()=>{for(const B of Nt.find('[data-bs-spy="scroll"]'))Ao.getOrCreateInstance(B)}),zt(Ao);const ol="ArrowLeft",re="ArrowRight",to="ArrowUp",Ve="ArrowDown",en="active",se="show",Ri='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Tr=`.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Ri}`;class un extends Je{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),Z.on(this._element,"keydown.bs.tab",w=>this._keydown(w)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const w=this._getActiveElem(),D=w?Z.trigger(w,"hide.bs.tab",{relatedTarget:h}):null;Z.trigger(h,"show.bs.tab",{relatedTarget:w}).defaultPrevented||D&&D.defaultPrevented||(this._deactivate(w,h),this._activate(h,w))}_activate(h,w){h&&(h.classList.add(en),this._activate(Pn(h)),this._queueCallback(()=>{"tab"===h.getAttribute("role")?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),Z.trigger(h,"shown.bs.tab",{relatedTarget:w})):h.classList.add(se)},h,h.classList.contains("fade")))}_deactivate(h,w){h&&(h.classList.remove(en),h.blur(),this._deactivate(Pn(h)),this._queueCallback(()=>{"tab"===h.getAttribute("role")?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),Z.trigger(h,"hidden.bs.tab",{relatedTarget:w})):h.classList.remove(se)},h,h.classList.contains("fade")))}_keydown(h){if(![ol,re,to,Ve].includes(h.key))return;h.stopPropagation(),h.preventDefault();const w=[re,Ve].includes(h.key),D=Rt(this._getChildren().filter(V=>!an(V)),h.target,w,!0);D&&(D.focus({preventScroll:!0}),un.getOrCreateInstance(D).show())}_getChildren(){return Nt.find(Tr,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,w){this._setAttributeIfNotExists(h,"role","tablist");for(const D of w)this._setInitialAttributesOnChild(D)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const w=this._elemIsActive(h),D=this._getOuterElement(h);h.setAttribute("aria-selected",w),D!==h&&this._setAttributeIfNotExists(D,"role","presentation"),w||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const w=Pn(h);w&&(this._setAttributeIfNotExists(w,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(w,"aria-labelledby",`#${h.id}`))}_toggleDropDown(h,w){const D=this._getOuterElement(h);if(!D.classList.contains("dropdown"))return;const V=(it,S)=>{const Ot=Nt.findOne(it,D);Ot&&Ot.classList.toggle(S,w)};V(".dropdown-toggle",en),V(".dropdown-menu",se),D.setAttribute("aria-expanded",w)}_setAttributeIfNotExists(h,w,D){h.hasAttribute(w)||h.setAttribute(w,D)}_elemIsActive(h){return h.classList.contains(en)}_getInnerElement(h){return h.matches(Tr)?h:Nt.findOne(Tr,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const w=un.getOrCreateInstance(this);if("string"==typeof h){if(void 0===w[h]||h.startsWith("_")||"constructor"===h)throw new TypeError(`No method named "${h}"`);w[h]()}})}}Z.on(document,"click.bs.tab",Ri,function(B){["A","AREA"].includes(this.tagName)&&B.preventDefault(),an(this)||un.getOrCreateInstance(this).show()}),Z.on(window,"load.bs.tab",()=>{for(const B of Nt.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]'))un.getOrCreateInstance(B)}),zt(un);const Or="show",Dr="showing",Br={animation:"boolean",autohide:"boolean",delay:"number"},rl={animation:!0,autohide:!0,delay:5e3};class eo extends Je{constructor(h,w){super(h,w),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return rl}static get DefaultType(){return Br}static get NAME(){return"toast"}show(){Z.trigger(this._element,"show.bs.toast").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Or,Dr),this._queueCallback(()=>{this._element.classList.remove(Dr),Z.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(Z.trigger(this._element,"hide.bs.toast").defaultPrevented||(this._element.classList.add(Dr),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(Dr,Or),Z.trigger(this._element,"hidden.bs.toast")},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Or),super.dispose()}isShown(){return this._element.classList.contains(Or)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,w){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=w;break;case"focusin":case"focusout":this._hasKeyboardInteraction=w}if(w)return void this._clearTimeout();const D=h.relatedTarget;this._element===D||this._element.contains(D)||this._maybeScheduleHide()}_setListeners(){Z.on(this._element,"mouseover.bs.toast",h=>this._onInteraction(h,!0)),Z.on(this._element,"mouseout.bs.toast",h=>this._onInteraction(h,!1)),Z.on(this._element,"focusin.bs.toast",h=>this._onInteraction(h,!0)),Z.on(this._element,"focusout.bs.toast",h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const w=eo.getOrCreateInstance(this,h);if("string"==typeof h){if(void 0===w[h])throw new TypeError(`No method named "${h}"`);w[h](this)}})}}return Qn(eo),zt(eo),{Alert:gt,Button:he,Carousel:cn,Collapse:xo,Dropdown:qe,Modal:Zn,Offcanvas:An,Popover:Nr,ScrollSpy:Ao,Tab:un,Toast:eo,Tooltip:Jt}}),function(){"use strict";var Fo=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Ln=function(t){return{eq:t}},hs=Ln(function(t,e){return t===e}),ps=function(t){return Ln(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},di=function(t){return Ln(function(e,n){var l,d,u,o=Object.keys(e),r=Object.keys(n);if(!(l=hs,d=ps(l),u=function(d){return Array.prototype.slice.call(d).sort(void 0)},Ln(function(g,p){return d.eq(u(g),u(p))})).eq(o,r))return!1;for(var s=o.length,i=0;i<s;i++){var a=o[i];if(!t.eq(e[a],n[a]))return!1}return!0})},bs=Ln(function(t,e){if(t===e)return!0;var n=Fo(t);return n===Fo(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?ps(bs).eq(t,e):"object"===n&&di(bs).eq(t,e))});const Pn=Object.getPrototypeOf,ui=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},sn=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&ui(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,xn=t=>e=>typeof e===t,_o=t=>e=>t===e,an=(t,e)=>le(t)&&ui(t,e,(n,o)=>Pn(n)===o),ft=sn("string"),le=sn("object"),jo=t=>an(t,Object),Xt=sn("array"),In=_o(null),ge=xn("boolean"),zt=_o(void 0),It=t=>null==t,et=t=>!It(t),Rt=xn("function"),ln=xn("number"),Uo=(t,e)=>{if(Xt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},xt=()=>{},Mn=(t,e)=>(...n)=>t(e.apply(null,n)),mi=(t,e)=>n=>t(e(n)),J=t=>()=>t,Ce=t=>t,Ua=(t,e)=>t===e;function rt(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const yr=t=>e=>!t(e),vs=t=>t(),zo=t=>{t()},jt=J(!1),Gt=J(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return et(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const Z=Array.prototype.slice,fi=Array.prototype.indexOf,Gn=Array.prototype.push,ys=(t,e)=>fi.call(t,e),Bt=(t,e)=>ys(t,e)>-1,Ht=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},Et=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},W=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Je=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Qn=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const i=t[r];(e(i,r)?n:o).push(i)}return{pass:n,fail:o}},gt=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},_r=(t,e,n)=>(Je(t,(o,r)=>{n=e(n,o,r)}),n),he=(t,e,n)=>(W(t,(o,r)=>{n=e(n,o,r)}),n),Nt=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},ne=(t,e)=>Nt(t,e,jt),Cr=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},wr=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Xt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Gn.apply(e,t[n])}return e},$e=(t,e)=>wr(Et(t,e)),Ze=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},En=t=>{const e=Z.call(t,0);return e.reverse(),e},Ho=(t,e)=>gt(t,n=>!Bt(e,n)),kr=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},Co=(t,e)=>{const n=Z.call(t,0);return n.sort(e),n},wo=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),Se=t=>wo(t,0),ko=t=>wo(t,t.length-1),Le=Rt(Array.from)?Array.from:t=>Z.call(t),cn=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},we=Object.keys,_s=Object.hasOwnProperty,Dt=(t,e)=>{const n=we(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},$o=(t,e)=>rd(t,(n,o)=>({k:o,v:e(n,o)})),rd=(t,e)=>{const n={};return Dt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},gi=t=>(e,n)=>{t[n]=e},xo=(t,e,n,o)=>{Dt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},qo=(t,e)=>{const n={};return xo(t,e,gi(n),xt),n},hi=(t,e)=>{const n=[];return Dt(t,(o,r)=>{n.push(e(o,r))}),n},Cs=t=>hi(t,Ce),Mt=(t,e)=>Ct(t,e)?C.from(t[e]):C.none(),Ct=(t,e)=>_s.call(t,e),Sn=(t,e)=>Ct(t,e)&&null!=t[e],Jn=t=>{const e={};return W(t,n=>{e[n]={}}),we(e)},za=t=>void 0!==t.length,Vo=Array.isArray,ws=(t,e,n)=>{if(!t)return!1;if(n=n||t,za(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(Ct(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},pi=(t,e)=>{const n=[];return ws(t,(o,r)=>{n.push(e(o,r,t))}),n},xr=(t,e)=>{const n=[];return ws(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},ks=(t,e,n,o)=>{let r=zt(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},Ha=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},Eo=t=>t[t.length-1],So=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},$a=()=>qe(0,0),qe=(t,e)=>({major:t,minor:e}),Wo={nu:qe,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?$a():((o,r)=>{const s=((a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const i=a=>Number(r.replace(s,"$"+a));return qe(i(1),i(2))})(t,n)},unknown:$a},bi=(t,e)=>{const n=String(e).toLowerCase();return ne(t,o=>o.search(n))},Er=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,ce=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!zt(o)||r+e.length<=o)},oe=(t,e)=>Er(t,e,0),vi=(t,e)=>Er(t,e,t.length-e.length),xs=t=>e=>e.replace(t,""),Ko=xs(/^\s+|\s+$/g),sd=xs(/^\s+/g),yi=xs(/\s+$/g),dn=t=>t.length>0,Yo=t=>!dn(t),Es=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},_i=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Nn=t=>e=>ce(e,t),qa=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ce(t,"edge/")&&ce(t,"chrome")&&ce(t,"safari")&&ce(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,_i],search:t=>ce(t,"chrome")&&!ce(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ce(t,"msie")||ce(t,"trident")},{name:"Opera",versionRegexes:[_i,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Nn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Nn("firefox")},{name:"Safari",versionRegexes:[_i,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ce(t,"safari")||ce(t,"mobile/"))&&ce(t,"applewebkit")}],Va=[{name:"Windows",search:Nn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ce(t,"iphone")||ce(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Nn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Nn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Nn("linux"),versionRegexes:[]},{name:"Solaris",search:Nn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Nn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Nn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ci={browsers:J(qa),oses:J(Va)},Ss="Chromium",Ka="Firefox",ki=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(Ss),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Ka),isSafari:o("Safari")}},Ya=()=>ki({current:void 0,version:Wo.unknown()}),Xa=ki,xi=(J("Edge"),J(Ss),J("IE"),J("Opera"),J(Ka),J("Safari"),"Windows"),Ei="Android",Qa="Solaris",An="FreeBSD",Ja="ChromeOS",Za=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(xi),isiOS:o("iOS"),isAndroid:o(Ei),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Qa),isFreeBSD:o(An),isChromeOS:o(Ja)}},id=()=>Za({current:void 0,version:Wo.unknown()}),ad=Za,tl=(J(xi),J("iOS"),J(Ei),J("Linux"),J("macOS"),J(Qa),J(An),J(Ja),t=>window.matchMedia(t).matches);let ld=So(()=>((t,e,n)=>{const o=Ci.browsers(),r=Ci.oses(),s=e.bind(l=>{return c=o,cn(l.brands,u=>{const g=u.brand.toLowerCase();return ne(c,p=>{var m;return g===(null===(m=p.brand)||void 0===m?void 0:m.toLowerCase())}).map(p=>({current:p.name,version:Wo.nu(parseInt(u.version,10),0)}))});var c}).orThunk(()=>{return bi(o,c=t).map(d=>{const u=Wo.detect(d.versionRegexes,c);return{current:d.name,version:u}});var c}).fold(Ya,Xa),i=(l=r,c=t,bi(l,c).map(d=>{const u=Wo.detect(d.versionRegexes,c);return{current:d.name,version:u}})).fold(id,ad),a=((l,c,d,u)=>{const g=l.isiOS()&&!0===/ipad/i.test(d),p=l.isiOS()&&!g,m=l.isiOS()||l.isAndroid(),b=m||u("(pointer:coarse)"),f=g||!p&&m&&u("(min-device-width:768px)"),v=p||m&&!f,y=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(d),_=!v&&!f&&!y;return{isiPad:J(g),isiPhone:J(p),isTablet:J(f),isPhone:J(v),isTouch:J(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:J(y),isDesktop:J(_)}})(i,s,t,n);var l,c;return{browser:s,os:i,deviceType:a}})(navigator.userAgent,C.from(navigator.userAgentData),tl));const No=()=>ld(),cd=navigator.userAgent,Ni=No(),Rn=Ni.browser,tn=Ni.os,Tn=Ni.deviceType,el=-1!==cd.indexOf("Windows Phone"),At={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Rn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Rn.isIE(),windowsPhone:el,browser:{current:Rn.current,version:Rn.version,isChromium:Rn.isChromium,isEdge:Rn.isEdge,isFirefox:Rn.isFirefox,isIE:Rn.isIE,isOpera:Rn.isOpera,isSafari:Rn.isSafari},os:{current:tn.current,version:tn.version,isAndroid:tn.isAndroid,isChromeOS:tn.isChromeOS,isFreeBSD:tn.isFreeBSD,isiOS:tn.isiOS,isLinux:tn.isLinux,isMacOS:tn.isMacOS,isSolaris:tn.isSolaris,isWindows:tn.isWindows},deviceType:{isDesktop:Tn.isDesktop,isiPad:Tn.isiPad,isiPhone:Tn.isiPhone,isPhone:Tn.isPhone,isTablet:Tn.isTablet,isTouch:Tn.isTouch,isWebView:Tn.isWebView}},Ns=/^\s*|\s*$/g,Ai=t=>It(t)?"":(""+t).replace(Ns,""),nl=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),ws(t,(r,s)=>!1!==e.call(o,r,s,n)&&(nl(r,e,n,o),!0)))},Y={trim:Ai,isArray:Vo,is:(t,e)=>e?!("array"!==e||!Vo(t))||typeof t===e:void 0!==t,toArray:t=>{if(Vo(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=ft(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:ws,map:pi,grep:xr,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:Ct,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(Ct(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:nl,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Xt(t)?t:""===t?[]:pi(t.split(e||","),Ai),_addCacheSuffix:t=>{const e=At.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Xo=(t,e,n=Ua)=>t.exists(o=>n(o,e)),Jt=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),Sr=(t,e)=>t?C.some(e):C.none();typeof window<"u"||Function("return this;")();const Ft=t=>t.dom.nodeName.toLowerCase(),Nr=t=>t.dom.nodeType,Ar=t=>e=>Nr(e)===t,pe=Ar(1),Pe=Ar(3),dd=Ar(9),ud=Ar(11),Ao=t=>e=>pe(e)&&Ft(e)===t,ol=(t,e,n)=>{if(!(ft(n)||ge(n)||ln(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},re=(t,e,n)=>{ol(t.dom,e,n)},to=(t,e)=>{const n=t.dom;Dt(e,(o,r)=>{ol(n,r,o)})},Ve=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},en=(t,e)=>C.from(Ve(t,e)),Rr=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},se=(t,e)=>{t.dom.removeAttribute(e)},Ri=t=>he(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Tr=(t,e)=>{const n=Ve(t,e);return void 0===n||""===n?[]:n.split(" ")},un=t=>void 0!==t.dom.classList,Ti=t=>Tr(t,"class"),Or=(t,e)=>((n,o,r)=>{const s=Tr(n,o).concat([r]);return re(n,o,s.join(" ")),!0})(t,"class",e),Dr=(t,e)=>((n,o,r)=>{const s=gt(Tr(n,o),i=>i!==r);return s.length>0?re(n,o,s.join(" ")):se(n,o),!1})(t,"class",e),Br=(t,e)=>{un(t)?t.dom.classList.add(e):Or(t,e)},rl=t=>{0===(un(t)?t.dom.classList:Ti(t)).length&&se(t,"class")},eo=(t,e)=>{un(t)?t.dom.classList.remove(e):Dr(t,e),rl(t)},B=(t,e)=>un(t)&&t.dom.classList.contains(e),h=t=>void 0!==t.style&&Rt(t.style.getPropertyValue),w=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},D=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return w(n.childNodes[0])},V=(t,e)=>{const n=(e||document).createElement(t);return w(n)},it=(t,e)=>{const n=(e||document).createTextNode(t);return w(n)},S=w,$t=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},Wt=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Ie=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,kt=(t,e)=>t.dom===e.dom,ke=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},mn=t=>S(t.dom.ownerDocument),Ne=t=>dd(t)?t:mn(t),Ae=t=>S(Ne(t).dom.defaultView),Re=t=>C.from(t.dom.parentNode).map(S),Lr=t=>C.from(t.dom.parentElement).map(S),sl=(t,e)=>{const n=Rt(e)?e:jt;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,i=S(s);if(r.push(i),!0===n(i))break;o=s}return r},We=t=>C.from(t.dom.previousSibling).map(S),Pr=t=>C.from(t.dom.nextSibling).map(S),ag=t=>En($t(t,We)),lg=t=>$t(t,Pr),ye=t=>Et(t.dom.childNodes,S),il=(t,e)=>C.from(t.dom.childNodes[e]).map(S),cg=t=>il(t,0),md=t=>il(t,t.dom.childNodes.length-1),dg=t=>t.dom.childNodes.length,fd=t=>ud(t)&&et(t.dom.host),ug=Rt(Element.prototype.attachShadow)&&Rt(Node.prototype.getRootNode),xw=J(ug),Go=ug?t=>S(t.dom.getRootNode()):Ne,gd=t=>fd(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return S(n)})(Ne(t)),Ew=t=>S(t.dom.host),mg=t=>{if(xw()&&et(t.target)){const e=S(t.target);if(pe(e)&&Sw(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Se(n)}}return C.from(t.target)},Sw=t=>et(t.dom.shadowRoot),As=t=>{const e=Pe(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=Go(o);return fd(r)?C.some(r):C.none()})(S(e)).fold(()=>n.body.contains(e),mi(As,Ew))},fg=(t,e,n)=>{if(!ft(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);h(t)&&t.style.setProperty(e,n)},gg=(t,e,n)=>{fg(t.dom,e,n)},al=(t,e)=>{const n=t.dom;Dt(e,(o,r)=>{fg(n,r,o)})},no=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||As(t)?o:hg(n,e)},hg=(t,e)=>h(t)?t.style.getPropertyValue(e):"",ll=(t,e)=>{const o=hg(t.dom,e);return C.from(o).filter(r=>r.length>0)},pg=t=>{const e={},n=t.dom;if(h(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},bg=(t,e)=>{var n,o;o=e,h(n=t.dom)&&n.style.removeProperty(o),Xo(en(t,"style").map(Ko),"")&&se(t,"style")},fn=(t,e)=>{Re(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Qo=(t,e)=>{Pr(t).fold(()=>{Re(t).each(n=>{de(n,e)})},n=>{fn(n,e)})},vg=(t,e)=>{cg(t).fold(()=>{de(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},de=(t,e)=>{t.dom.appendChild(e.dom)},Ir=(t,e)=>{W(e,n=>{de(t,n)})},Oi=t=>{t.dom.textContent="",W(ye(t),e=>{qt(e)})},qt=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Jo=t=>{const e=ye(t);var n,o;e.length>0&&(n=t,W(o=e,(r,s)=>{Qo(0===s?n:o[s-1],r)})),qt(t)},yg=t=>Et(t,S),_g=t=>t.dom.innerHTML,cl=(t,e)=>{const n=mn(t).dom,o=S(n.createDocumentFragment()),r=((s,i)=>{const a=(i||document).createElement("div");return a.innerHTML=s,ye(S(a))})(e,n);Ir(o,r),Oi(t),de(t,o)},Aw=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},Cg=(t,e)=>({left:t,top:e,translate:(n,o)=>Cg(t+n,e+o)}),Rs=Cg,dl=(t,e)=>void 0!==t?t:void 0!==e?e:0,hd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Rs(n.offsetLeft,n.offsetTop):As(t)?(o=>{const r=o.getBoundingClientRect();return Rs(r.left,r.top)})(e):Rs(0,0)},pd=t=>{const e=void 0!==t?t.dom:document;return Rs(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},wg=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},kg=(t,e)=>{No().browser.isSafari()&&Rt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},xg=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Eg=t=>{const e=void 0===t?window:t,o=pd(S(e.document));return(r=>{const s=void 0===r?window:r;return No().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return xg(o.left,o.top,r.clientWidth,r.clientHeight)},r=>xg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Sg=(t,e)=>{let n=[];return W(ye(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(Sg(o,e))}),n};var Ng=(t,e,n,o,r)=>t(n,o)?C.some(n):Rt(r)&&r(n)?C.none():e(n,o,r);const Zo=(t,e,n)=>{let o=t.dom;const r=Rt(n)?n:jt;for(;o.parentNode;){o=o.parentNode;const s=S(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},Mr=(t,e,n)=>Ng((o,r)=>r(o),Zo,t,e,n),Di=(t,e,n)=>Zo(t,o=>Wt(o,e),n),Bi=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Ie(r)?C.none():C.from(r.querySelector(n)).map(S)})(e,t),Fr=(t,e,n)=>Ng((o,r)=>Wt(o,r),Di,t,e,n),Ag=(t,e,n)=>Di(t,e,n).isSome();class ie{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const jr=t=>e=>!!e&&e.nodeType===t,ul=t=>!!t&&!Object.getPrototypeOf(t),ot=jr(1),bd=t=>{const e=t.toLowerCase();return n=>et(n)&&n.nodeName.toLowerCase()===e},Fn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Bt(e,o)}return!1}},ml=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(ot(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const i=r.getComputedStyle(o,null);if((i?i.getPropertyValue(t):null)===n[s])return!0}}return!1}},Rg=t=>e=>ot(e)&&e.hasAttribute(t),Ur=t=>ot(t)&&t.hasAttribute("data-mce-bogus"),Ro=t=>ot(t)&&"TABLE"===t.tagName,Tg=t=>e=>!(!ot(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),vd=Fn(["textarea","input"]),K=jr(3),Rw=jr(4),Tw=jr(7),tr=jr(8),Li=jr(9),yd=jr(11),Zt=bd("br"),Og=bd("img"),jn=Tg("true"),Ut=Tg("false"),fl=Fn(["td","th"]),Dg=Fn(["td","th","caption"]),oo=Fn(["video","audio","object","embed"]),Ow=bd("li"),be="\xa0",Bg=t=>"\ufeff"===t,Te=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Ie(r)?[]:Et(r.querySelectorAll(n),S)})(e,t),Lg=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Pe),_d=t=>Lg.get(t),Pg=t=>Lg.getOption(t),Dw=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),er=t=>{let e;return n=>(e=e||kr(t,Gt),Ct(e,Ft(n)))},Un=er(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Cd=t=>pe(t)&&!Un(t),zr=t=>pe(t)&&"br"===Ft(t),Ig=er(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),wd=er(["ul","ol","dl"]),Ii=er(["li","dd","dt"]),Bw=er(["thead","tbody","tfoot"]),Mi=er(["td","th"]),gl=er(["pre","script","textarea","style"]),Lw=er(Dw),Pw=t=>Lw(t)||Cd(t),kd=()=>{const t=V("br");return re(t,"data-mce-bogus","1"),t},Hr=t=>{Oi(t),de(t,kd())},Iw=t=>{md(t).each(e=>{We(e).each(n=>{Un(t)&&zr(e)&&Un(n)&&qt(e)})})},xe="\ufeff",hl=Bg,To=t=>t.replace(/\uFEFF/g,""),Mw=ot,Ts=K,Os=t=>(Ts(t)&&(t=t.parentNode),Mw(t)&&t.hasAttribute("data-mce-caret")),nr=t=>Ts(t)&&hl(t.data),gn=t=>Os(t)||nr(t),Mg=t=>t.firstChild!==t.lastChild||!Zt(t.firstChild),xd=t=>{const e=t.container();return!!K(e)&&(e.data.charAt(t.offset())===xe||t.isAtStart()&&nr(e.previousSibling))},Ed=t=>{const e=t.container();return!!K(e)&&(e.data.charAt(t.offset()-1)===xe||t.isAtEnd()&&nr(e.nextSibling))},pl=t=>Ts(t)&&t.data[0]===xe,bl=t=>Ts(t)&&t.data[t.data.length-1]===xe,Sd=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Ur(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Fg=t=>Os(t.startContainer),jg=jn,Fw=Ut,jw=Zt,Uw=K,zw=Fn(["script","style","textarea"]),Ug=Fn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Hw=Fn(["table"]),$w=gn,On=t=>!$w(t)&&(Uw(t)?!zw(t.parentNode):Ug(t)||jw(t)||Hw(t)||Nd(t)),Nd=t=>{return!(ot(e=t)&&"true"===e.getAttribute("unselectable"))&&Fw(t);var e},zg=(t,e)=>On(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Nd(r))return!1;if(jg(r))return!0}return!0})(t,e),qw=/^[ \t\r\n]*$/,$r=t=>qw.test(t),Hg=t=>"\n"===t||"\r"===t,$g=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return he(s,(a,l)=>{return-1!==" \f\t\v".indexOf(l)||l===be?a.pcIsSpace||""===a.str&&n||a.str.length===s.length-1&&o||(d=a.str.length+1)<(c=s).length&&d>=0&&Hg(c[d])?{pcIsSpace:!1,str:a.str+be}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Hg(l),str:a.str+l};var c,d},{pcIsSpace:!1,str:""}).str},vl=(t,e)=>{return On(t)&&(o=e,!(K(n=t)&&$r(n.data)&&!((r,s)=>{const i=S(s),a=S(r);return Ag(a,"pre,code",rt(kt,i))})(n,o)))||(n=>ot(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||Vw(t);var n,o},Vw=Rg("data-mce-bookmark"),Ww=Rg("data-mce-bogus"),Kw=t=>ot(t)&&"all"===t.getAttribute("data-mce-bogus"),te=(t,e=!0)=>((n,o)=>{let r=0;if(vl(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const i=new ie(s,n);do{if(o){if(Kw(s)){s=i.next(!0);continue}if(Ww(s)){s=i.next();continue}}if(Zt(s))r++,s=i.next();else{if(vl(s,n))return!1;s=i.next()}}while(s);return r<=1}})(t.dom,e),Fi="data-mce-block",Ad=t=>{return(e=t,gt(we(e),n=>!/[A-Z]/.test(n))).join(",");var e},qg=(t,e)=>et(e.querySelector(t))?(e.setAttribute(Fi,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Fi),!1),Vg=(t,e)=>{const n=Ad(t.getTransparentElements()),o=Ad(t.getBlockElements());return gt(e.querySelectorAll(n),r=>qg(o,r))},Wg=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(te(S(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},Rd=(t,e)=>{((t,e,n)=>{const o=t.getBlockElements(),r=S(e),s=a=>Ft(a)in o,i=a=>kt(a,r);W(yg(n),a=>{Zo(a,s,i).each(l=>{const c=gt(ye(a),g=>s(g)&&!t.isValidChild(Ft(l),Ft(g)));if(c.length>0){const d=Lr(l);W(c,u=>{Zo(u,s,i).each(g=>{((p,m)=>{const b=document.createRange(),f=p.parentNode;if(f){b.setStartBefore(p),b.setEndBefore(m);const v=b.extractContents();Wg(v,!0),b.setStartAfter(m),b.setEndAfter(p);const y=b.extractContents();Wg(y,!1),te(S(v))||f.insertBefore(v,p),te(S(m))||f.insertBefore(m,p),te(S(y))||f.insertBefore(y,p),f.removeChild(p)}})(g.dom,u.dom)})}),d.each(u=>Vg(t,u.dom))}})})})(t,e,Vg(t,e))},Xw=(t,e)=>{if(Yg(t,e)){const n=Ad(t.getBlockElements());qg(n,e)}},Kg=t=>t.hasAttribute(Fi),yl=(t,e)=>Ct(t.getTransparentElements(),e),Yg=(t,e)=>ot(e)&&yl(t,e.nodeName),ji=(t,e)=>Yg(t,e)&&Kg(e),Xg=(t,e)=>1===e.type&&yl(t,e.name)&&zt(e.attr(Fi)),Gw=No().browser,Gg=t=>ne(t,pe),Qg=(t,e)=>t.children&&Bt(t.children,e),Jg=(t,e={})=>{let n=0;const o={},r=S(t),s=Ne(r),i=e.maxLoadTime||5e3,a=c=>new Promise((d,u)=>{let g;const p=Y._addCacheSuffix(c),m=Mt(o,p).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[p]=m,m.count++;const b=(x,A)=>{W(x,zo),m.status=A,m.passed=[],m.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},f=()=>b(m.passed,2),v=()=>b(m.failed,3),y=()=>{var x;x=y,(()=>{const A=t.styleSheets;let N=A.length;for(;N--;){const R=A[N].ownerNode;if(R&&g&&R.id===g.id)return f(),!0}return!1})()||(Date.now()-k<i?setTimeout(x):v())};if(d&&m.passed.push(d),u&&m.failed.push(u),1===m.status)return;if(2===m.status)return void f();if(3===m.status)return void v();m.status=1;const _=V("link",s.dom);to(_,{rel:"stylesheet",type:"text/css",id:m.id});const k=Date.now();var E;e.contentCssCors&&re(_,"crossOrigin","anonymous"),e.referrerPolicy&&re(_,"referrerpolicy",e.referrerPolicy),g=_.dom,g.onload=y,g.onerror=v,E=_,de(gd(r),E),re(_,"href",p)}),l=c=>{const d=Y._addCacheSuffix(c);Mt(o,d).each(u=>{0==--u.count&&(delete o[d],(g=>{const p=gd(r);Bi(p,"#"+g).each(qt)})(u.id))})};return{load:a,loadAll:c=>Promise.allSettled(Et(c,d=>a(d).then(J(d)))).then(d=>{const u=Qn(d,g=>"fulfilled"===g.status);return u.fail.length>0?Promise.reject(Et(u.fail,g=>g.reason)):Et(u.pass,g=>g.value)}),unload:l,unloadAll:c=>{W(c,d=>{l(d)})},_setReferrerPolicy:c=>{e.referrerPolicy=c},_setContentCssCors:c=>{e.contentCssCors=c}}},Zg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=Go(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=Jg(o,n);return t.set(o,r),r})}}})(),th=(t,e)=>et(t)&&(vl(t,e)||Cd(S(t))),eh=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Td=(t,e,n)=>{var o;const r=n||e;if(ot(e)&&eh(e))return e;const s=e.childNodes;for(let i=s.length-1;i>=0;i--)Td(t,s[i],r);if(ot(e)){const i=e.childNodes;1===i.length&&eh(i[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(i[0],e))}return yd(i=e)||Li(i)||vl(e,r)||(i=>!!ot(i)&&i.childNodes.length>0)(e)||((i,a)=>K(i)&&i.data.length>0&&((l,c)=>{const d=new ie(l,c).prev(!1),u=new ie(l,c).next(!1),g=zt(d)||th(d,c),p=zt(u)||th(u,c);return g&&p})(i,a))(e,r)||t.remove(e),e;var i},Qw=Y.makeMap,_l=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jw=/[<>&\"\']/g,Zw=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,tk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},qr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ek={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},nh=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!qr[s]){const i="&"+o[r+1]+";";n[s]=i,n[i]=s}}return n}},Od=nh("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),oh=(t,e)=>t.replace(e?_l:Cl,n=>qr[n]||n),rh=(t,e)=>t.replace(e?_l:Cl,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":qr[n]||"&#"+n.charCodeAt(0)+";"),Dd=(t,e,n)=>{const o=n||Od;return t.replace(e?_l:Cl,r=>qr[r]||o[r]||r)},or={encodeRaw:oh,encodeAllRaw:t=>(""+t).replace(Jw,e=>qr[e]||e),encodeNumeric:rh,encodeNamed:Dd,getEncodeFunc:(t,e)=>{const n=nh(e)||Od,o=Qw(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?_l:Cl,i=>void 0!==qr[i]?qr[i]:void 0!==n[i]?n[i]:i.length>1?"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";":"&#"+i.charCodeAt(0)+";"):o.named?e?(r,s)=>Dd(r,s,n):Dd:o.numeric?rh:oh},decode:t=>t.replace(Zw,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):tk[n]||String.fromCharCode(n):ek[e]||Od[e]||(o=>{const r=V("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},wl={},kl={},nk={},Ds=Y.makeMap,Ee=Y.each,Bd=Y.extend,sh=Y.explode,ok=Y.inArray,_e=(t,e)=>(t=Y.trim(t))?t.split(e||" "):[],ih=(t,e={})=>{const n=Ds(t," ",Ds(t.toUpperCase()," "));return Bd(n,e)},ah=t=>ih("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Ld=(t,e)=>{if(t){const n={};return ft(t)&&(t={"*":t}),Ee(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?Ds(o,/[, ]/):sh(o,/[, ]/)}),n}},rr=(t={})=>{var e;const n={},o={};let r=[];const s={},i={},a=(q,X,nt)=>{const lt=t[q];if(lt)return Ds(lt,/[, ]/,Ds(lt.toUpperCase(),/[, ]/));{let pt=kl[q];return pt||(pt=ih(X,nt),kl[q]=pt),pt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(q=>{const X={};let nt,lt,pt,vt;const tt=(ee,Vt="",ze="")=>{const He=_e(ze),Yn=_e(ee);let Bn=Yn.length;for(;Bn--;){const ve=_e([nt,Vt].join(" "));X[Yn[Bn]]={attributes:kr(ve,()=>({})),attributesOrder:ve,children:kr(He,J(nk))}}},_t=(ee,Vt)=>{const ze=_e(ee),He=_e(Vt);let Yn=ze.length;for(;Yn--;){const Bn=X[ze[Yn]];for(let ve=0,Ge=He.length;ve<Ge;ve++)Bn.attributes[He[ve]]={},Bn.attributesOrder.push(He[ve])}};if(wl[q])return wl[q];if(nt="id accesskey class dir lang style tabindex title role",lt="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",pt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==q&&(nt+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",lt+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",pt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==q){nt+=" xml:lang";const ee="acronym applet basefont big font strike tt";pt=[pt,ee].join(" "),Ee(_e(ee),ze=>{tt(ze,"",pt)});const Vt="center dir isindex noframes";lt=[lt,Vt].join(" "),vt=[lt,pt].join(" "),Ee(_e(Vt),ze=>{tt(ze,"",vt)})}return vt=vt||[lt,pt].join(" "),tt("html","manifest","head body"),tt("head","","base command link meta noscript script style title"),tt("title hr noscript br"),tt("base","href target"),tt("link","href rel media hreflang type sizes hreflang"),tt("meta","name http-equiv content charset"),tt("style","media type scoped"),tt("script","src async defer type charset"),tt("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",vt),tt("address dt dd div caption","",vt),tt("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",pt),tt("blockquote","cite",vt),tt("ol","reversed start type","li"),tt("ul","","li"),tt("li","value",vt),tt("dl","","dt dd"),tt("a","href target rel media hreflang type",vt),tt("q","cite",pt),tt("ins del","cite datetime",vt),tt("img","src sizes srcset alt usemap ismap width height"),tt("iframe","src name width height",vt),tt("embed","src type width height"),tt("object","data type typemustmatch name usemap form width height",[vt,"param"].join(" ")),tt("param","name value"),tt("map","name",[vt,"area"].join(" ")),tt("area","alt coords shape href target rel media hreflang type"),tt("table","border","caption colgroup thead tfoot tbody tr"+("html4"===q?" col":"")),tt("colgroup","span","col"),tt("col","span"),tt("tbody thead tfoot","","tr"),tt("tr","","td th"),tt("td","colspan rowspan headers",vt),tt("th","colspan rowspan headers scope abbr",vt),tt("form","accept-charset action autocomplete enctype method name novalidate target",vt),tt("fieldset","disabled form name",[vt,"legend"].join(" ")),tt("label","form for",pt),tt("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),tt("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===q?vt:pt),tt("select","disabled form multiple name required size","option optgroup"),tt("optgroup","disabled label","option"),tt("option","disabled label selected value"),tt("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),tt("menu","type label",[vt,"li"].join(" ")),tt("noscript","",vt),"html4"!==q&&(tt("wbr"),tt("ruby","",[pt,"rt rp"].join(" ")),tt("figcaption","",vt),tt("mark rt rp summary bdi","",pt),tt("canvas","width height",vt),tt("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[vt,"track source"].join(" ")),tt("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[vt,"track source"].join(" ")),tt("picture","","img source"),tt("source","src srcset type media sizes"),tt("track","kind src srclang label default"),tt("datalist","",[pt,"option"].join(" ")),tt("article section nav aside main header footer","",vt),tt("hgroup","","h1 h2 h3 h4 h5 h6"),tt("figure","",[vt,"figcaption"].join(" ")),tt("time","datetime",pt),tt("dialog","open",vt),tt("command","type label icon disabled checked radiogroup command"),tt("output","for form name",pt),tt("progress","value max",pt),tt("meter","value min max low high optimum",pt),tt("details","open",[vt,"summary"].join(" ")),tt("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==q&&(_t("script","language xml:space"),_t("style","xml:space"),_t("object","declare classid code codebase codetype archive standby align border hspace vspace"),_t("embed","align name hspace vspace"),_t("param","valuetype type"),_t("a","charset name rev shape coords"),_t("br","clear"),_t("applet","codebase archive code object alt name width height align hspace vspace"),_t("img","name longdesc align border hspace vspace"),_t("iframe","longdesc frameborder marginwidth marginheight scrolling align"),_t("font basefont","size color face"),_t("input","usemap align"),_t("select"),_t("textarea"),_t("h1 h2 h3 h4 h5 h6 div p legend caption","align"),_t("ul","type compact"),_t("li","type"),_t("ol dl menu dir","compact"),_t("pre","width xml:space"),_t("hr","align noshade size width"),_t("isindex","prompt"),_t("table","summary width frame rules cellspacing cellpadding align bgcolor"),_t("col","width align char charoff valign"),_t("colgroup","width align char charoff valign"),_t("thead","align char charoff valign"),_t("tr","align char charoff valign bgcolor"),_t("th","axis align char charoff valign nowrap bgcolor width height"),_t("form","accept"),_t("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),_t("tfoot","align char charoff valign"),_t("tbody","align char charoff valign"),_t("area","nohref"),_t("body","background bgcolor text link vlink alink")),"html4"!==q&&(_t("input button select textarea","autofocus"),_t("input textarea","placeholder"),_t("a","download"),_t("link script img","crossorigin"),_t("img","loading"),_t("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==q&&W([X.video,X.audio],ee=>{delete ee.children.audio,delete ee.children.video}),Ee(_e("a form meter progress dfn"),ee=>{X[ee]&&delete X[ee].children[ee]}),delete X.caption.children.table,delete X.script,wl[q]=X,X})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const d=Ld(t.valid_styles),u=Ld(t.invalid_styles,"map"),g=Ld(t.valid_classes,"map"),p=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),m=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),f=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",y=a("non_empty_elements",v+" pre",b),_=a("move_caret_before_on_enter_elements",v+" table",b),k=a("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),E=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",k),x=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),A=a("transparent_elements","a ins del canvas map");Ee("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),q=>{i[q]=new RegExp("</"+q+"[^>]*>","gi")});const N=q=>new RegExp("^"+q.replace(/([?+*])/g,".$1")+"$"),R=q=>{const X=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,nt=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,lt=/[*?+]/;if(q){const pt=_e(q,",");let vt,tt;n["@"]&&(vt=n["@"].attributes,tt=n["@"].attributesOrder);for(let _t=0,ee=pt.length;_t<ee;_t++){let Vt=X.exec(pt[_t]);if(Vt){const ze=Vt[1],He=Vt[2],Yn=Vt[3],Bn=Vt[5],ve={},Ge=[],Yt={attributes:ve,attributesOrder:Ge};if("#"===ze&&(Yt.paddEmpty=!0),"-"===ze&&(Yt.removeEmpty=!0),"!"===Vt[4]&&(Yt.removeEmptyAttrs=!0),vt&&(Dt(vt,(bo,br)=>{ve[br]=bo}),tt&&Ge.push(...tt)),Bn){const bo=_e(Bn,"|");for(let br=0,ed=bo.length;br<ed;br++)if(Vt=nt.exec(bo[br]),Vt){const vo={},Ma=Vt[1],on=Vt[2].replace(/[\\:]:/g,":"),vr=Vt[3],rn=Vt[4];if("!"===Ma&&(Yt.attributesRequired=Yt.attributesRequired||[],Yt.attributesRequired.push(on),vo.required=!0),"-"===Ma){delete ve[on],Ge.splice(ok(Ge,on),1);continue}if(vr&&("="===vr&&(Yt.attributesDefault=Yt.attributesDefault||[],Yt.attributesDefault.push({name:on,value:rn}),vo.defaultValue=rn),"~"===vr&&(Yt.attributesForced=Yt.attributesForced||[],Yt.attributesForced.push({name:on,value:rn}),vo.forcedValue=rn),"<"===vr&&(vo.validValues=Ds(rn,"?"))),lt.test(on)){const gs=vo;Yt.attributePatterns=Yt.attributePatterns||[],gs.pattern=N(on),Yt.attributePatterns.push(gs)}else ve[on]||Ge.push(on),ve[on]=vo}}if(vt||"@"!==He||(vt=ve,tt=Ge),Yn&&(Yt.outputName=He,n[Yn]=Yt),lt.test(He)){const bo=Yt;bo.pattern=N(He),r.push(bo)}else n[He]=Yt}}}},L=q=>{r=[],W(we(n),X=>{delete n[X]}),R(q),Ee(c,(X,nt)=>{o[nt]=X.children})},P=q=>{const X=/^(~)?(.+)$/;q&&(delete kl.text_block_elements,delete kl.block_elements,Ee(_e(q,","),nt=>{const lt=X.exec(nt);if(lt){const pt="~"===lt[1],vt=pt?"span":"div",tt=lt[2];if(o[tt]=o[vt],s[tt]=vt,y[tt.toUpperCase()]={},y[tt]={},pt||(E[tt.toUpperCase()]={},E[tt]={}),!n[tt]){let _t=n[vt];_t=Bd({},_t),delete _t.removeEmptyAttrs,delete _t.removeEmpty,n[tt]=_t}Ee(o,(_t,ee)=>{_t[vt]&&(o[ee]=_t=Bd({},o[ee]),_t[tt]=_t[vt])})}}))},F=q=>{const X=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete wl[l],q&&Ee(_e(q,","),nt=>{const lt=X.exec(nt);if(lt){const pt=lt[1];let vt;vt=pt?o[lt[2]]:o[lt[2]]={"#comment":{}},vt=o[lt[2]],Ee(_e(lt[3],"|"),tt=>{"-"===pt?delete vt[tt]:vt[tt]={}})}})},M=q=>{const X=n[q];if(X)return X;let nt=r.length;for(;nt--;){const lt=r[nt];if(lt.pattern.test(q))return lt}};t.valid_elements?L(t.valid_elements):(Ee(c,(q,X)=>{n[X]={attributes:q.attributes,attributesOrder:q.attributesOrder},o[X]=q.children}),Ee(_e("strong/b em/i"),q=>{const X=_e(q,"/");n[X[1]].outputName=X[0]}),Ee(x,(q,X)=>{n[X]&&(t.padd_empty_block_inline_children&&(n[X].paddInEmptyBlock=!0),n[X].removeEmpty=!0)}),Ee(_e("ol ul blockquote a table tbody"),q=>{n[q]&&(n[q].removeEmpty=!0)}),Ee(_e("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),q=>{n[q].paddEmpty=!0}),Ee(_e("span"),q=>{n[q].removeEmptyAttrs=!0})),P(t.custom_elements),F(t.valid_children),R(t.extended_valid_elements),F("+ol[ul|ol],+ul[ul|ol]"),Ee({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(q,X)=>{n[X]&&(n[X].parentsRequired=_e(q))}),t.invalid_elements&&Ee(sh(t.invalid_elements),q=>{n[q]&&delete n[q]}),M("span")||R("span[!data-mce-type|*]");const z=J(d),G=J(u),Q=J(g),dt=J(f),mt=J(E),St=J(k),Lt=J(x),at=J(Object.seal(b)),yt=J(m),bt=J(y),T=J(_),O=J(p),U=J(A),$=J(Object.seal(i)),H=J(s);return{type:l,children:o,elements:n,getValidStyles:z,getValidClasses:Q,getBlockElements:mt,getInvalidStyles:G,getVoidElements:at,getTextBlockElements:St,getTextInlineElements:Lt,getBoolAttrs:dt,getElementRule:M,getSelfClosingElements:yt,getNonEmptyElements:bt,getMoveCaretBeforeOnEnterElements:T,getWhitespaceElements:O,getTransparentElements:U,getSpecialElements:$,isValidChild:(q,X)=>{const nt=o[q.toLowerCase()];return!(!nt||!nt[X.toLowerCase()])},isValid:(q,X)=>{const nt=M(q);if(nt){if(!X)return!0;{if(nt.attributes[X])return!0;const lt=nt.attributePatterns;if(lt){let pt=lt.length;for(;pt--;)if(lt[pt].pattern.test(X))return!0}}}return!1},getCustomElements:H,addValidElements:R,setValidElements:L,addCustomElements:P,addValidChildren:F}},Pd=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let i,a;e&&(i=e.getValidStyles(),a=e.getInvalidStyles());const l="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let d=0;d<l.length;d++)s[l[d]]="\ufeff"+d,s["\ufeff"+d]=l[d];const c={parse:d=>{const u={};let g=!1;const p=t.url_converter,m=t.url_converter_scope||c,b=(R,L,P)=>{const F=u[R+"-top"+L];if(!F)return;const M=u[R+"-right"+L];if(!M)return;const z=u[R+"-bottom"+L];if(!z)return;const G=u[R+"-left"+L];if(!G)return;const Q=[F,M,z,G];let dt=Q.length-1;for(;dt--&&Q[dt]===Q[dt+1];);dt>-1&&P||(u[R+L]=-1===dt?Q[0]:Q.join(" "),delete u[R+"-top"+L],delete u[R+"-right"+L],delete u[R+"-bottom"+L],delete u[R+"-left"+L])},f=R=>{const L=u[R];if(!L)return;const P=L.split(" ");let F=P.length;for(;F--;)if(P[F]!==P[0])return!1;return u[R]=P[0],!0},v=R=>(g=!0,s[R]),y=(R,L)=>(g&&(R=R.replace(/\uFEFF[0-9]/g,P=>s[P])),L||(R=R.replace(/\\([\'\";:])/g,"$1")),R),_=R=>String.fromCharCode(parseInt(R.slice(1),16)),k=R=>R.replace(/\\[0-9a-f]+/gi,_),E=(R,L,P,F,M,z)=>{if(M=M||z)return"'"+(M=y(M)).replace(/\'/g,"\\'")+"'";if(L=y(L||P||F||""),!t.allow_script_urls){const G=L.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(G)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(G))return""}return p&&(L=p.call(m,L,"style")),"url('"+L.replace(/\'/g,"\\'")+"')"};if(d){let R;for(d=(d=d.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,L=>L.replace(/[;:]/g,v));R=o.exec(d);){o.lastIndex=R.index+R[0].length;let L=R[1].replace(r,"").toLowerCase(),P=R[2].replace(r,"");if(L&&P){if(L=k(L),P=k(P),-1!==L.indexOf("\ufeff")||-1!==L.indexOf('"')||!t.allow_script_urls&&("behavior"===L||/expression\s*\(|\/\*|\*\//.test(P)))continue;"font-weight"===L&&"700"===P?P="bold":"color"!==L&&"background-color"!==L||(P=P.toLowerCase()),P=P.replace(n,E),u[L]=g?y(P,!0):P}}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),A="border-style",N="border-color",f(x="border-width")&&f(A)&&f(N)&&(u.border=u[x]+" "+u[A]+" "+u[N],delete u[x],delete u[A],delete u[N]),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}var x,A,N;return u},serialize:(d,u)=>{let g="";const p=(m,b)=>{const f=b[m];if(f)for(let v=0,y=f.length;v<y;v++){const _=f[v],k=d[_];k&&(g+=(g.length>0?" ":"")+_+": "+k+";")}};return u&&i?(p("*",i),p(u,i)):Dt(d,(m,b)=>{m&&((f,v)=>{if(!a||!v)return!0;let y=a["*"];return!(y&&y[f]||(y=a[v],y&&y[f]))})(b,u)&&(g+=(g.length>0?" ":"")+b+": "+m+";")}),g}};return c},rk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},lh=(t,e)=>{const n=e??{};for(const o in t)Ct(rk,o)||(n[o]=t[o]);return et(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},Id=(t,e,n,o)=>{var r;const s=lh(e,o);return s.type=t,It(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(It((i=e).preventDefault)||(a=i)instanceof Event||Rt(a.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Gt,Rt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Gt,Rt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Gt,s.stopPropagation()},(i=>i.isDefaultPrevented===Gt||i.isDefaultPrevented===jt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Gt:jt,s.isPropagationStopped=!0===s.cancelBubble?Gt:jt,s.isImmediatePropagationStopped=jt)),s;var i,a},sk=/^(?:mouse|contextmenu)|click/,Md=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},xl=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Ui=(t,e)=>{const n=Id(t.type,t,document,e);if(et(o=t)&&sk.test(o.type)&&zt(t.pageX)&&!zt(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,i=n;i.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),i.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},ik=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{xl(t,"DOMContentLoaded",s),xl(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Md(t,"DOMContentLoaded",s),n.domLoaded||Md(t,"load",s)};class Vr{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let i;const a=window,l=g=>{s.executeHandlers(Ui(g||a.event),c)};if(!e||K(e)||tr(e))return o;let c;e[s.expando]?c=e[s.expando]:(c=s.count++,e[s.expando]=c,s.events[c]={}),r=r||e;const d=n.split(" ");let u=d.length;for(;u--;){let g=d[u],p=l,m=!1,b=!1;"DOMContentLoaded"===g&&(g="ready"),s.domLoaded&&"ready"===g&&"complete"===e.readyState?o.call(r,Ui({type:g})):(s.hasFocusIn||"focusin"!==g&&"focusout"!==g||(m=!0,b="focusin"===g?"focus":"blur",p=f=>{const v=Ui(f||a.event);v.type="focus"===v.type?"focusin":"focusout",s.executeHandlers(v,c)}),i=s.events[c][g],i?"ready"===g&&s.domLoaded?o(Ui({type:g})):i.push({func:o,scope:r}):(s.events[c][g]=i=[{func:o,scope:r}],i.fakeName=b,i.capture=m,i.nativeHandler=p,"ready"===g?ik(e,p,s):Md(e,b||g,p,m)))}return e=i=null,o}unbind(e,n,o){if(!e||K(e)||tr(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const l=i[a],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const u=c.nativeHandler,g=c.fakeName,p=c.capture,m=c.slice(0,d).concat(c.slice(d+1));m.nativeHandler=u,m.fakeName=g,m.capture=p,s[l]=m}}o&&0!==c.length||(delete s[l],xl(e,c.fakeName||l,c.nativeHandler,c.capture))}}}else Dt(s,(i,a)=>{xl(e,i.fakeName||a,i.nativeHandler,i.capture)}),s={};for(const i in s)if(Ct(s,i))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||K(e)||tr(e))return this;const r=Ui({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||K(e)||tr(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,i=r.length;s<i;s++){const a=r[s];if(a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Vr.Event=new Vr;const Fd=Y.each,ak=Y.grep,jd="data-mce-style",lk=Y.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),zi=(t,e,n)=>{It(n)||""===n?se(t,e):re(t,e,n)},ch=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Bs=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!K(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},dh=(t,e)=>{const n=Ve(e,"style"),o=t.serialize(t.parse(n),Ft(e));zi(e,jd,o)},uh=(t,e,n)=>{const o=ch(e);var r,s;It(n)||""===n?bg(t,o):gg(t,o,(s=o,ln(r=n)?Ct(lk,s)?r+"":r+"px":r))},Pt=(t,e={})=>{const n={},o=window,r={};let s=0;const i=Zg.forElement(S(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),a=[],l=e.schema?e.schema:rr({}),c=Pd({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),d=e.ownEvents?new Vr:Vr.Event,u=l.getBlockElements(),g=T=>T&&t&&ft(T)?t.getElementById(T):T,p=T=>{const O=g(T);return et(O)?S(O):null},m=(T,O,U="")=>{let $;const H=p(T);if(et(H)&&pe(H)){const q=bt[O];$=q&&q.get?q.get(H.dom,O):Ve(H,O)}return et($)?$:U},b=T=>{const O=g(T);return It(O)?[]:O.attributes},f=(T,O,U)=>{N(T,$=>{if(ot($)){const H=S($),q=""===U?null:U,X=Ve(H,O),nt=bt[O];nt&&nt.set?nt.set(H.dom,q,O):zi(H,O,q),X!==q&&e.onSetAttrib&&e.onSetAttrib({attrElm:H.dom,attrName:O,attrValue:q})}})},v=()=>e.root_element||t.body,y=(T,O)=>((U,$,H)=>{let q=0,X=0;const nt=U.ownerDocument;if(H=H||U,$){if(H===U&&$.getBoundingClientRect&&"static"===no(S(U),"position")){const pt=$.getBoundingClientRect();return q=pt.left+(nt.documentElement.scrollLeft||U.scrollLeft)-nt.documentElement.clientLeft,X=pt.top+(nt.documentElement.scrollTop||U.scrollTop)-nt.documentElement.clientTop,{x:q,y:X}}let lt=$;for(;lt&&lt!==H&&lt.nodeType&&!Qg(lt,H);)q+=lt.offsetLeft||0,X+=lt.offsetTop||0,lt=lt.offsetParent;for(lt=$.parentNode;lt&&lt!==H&&lt.nodeType&&!Qg(lt,H);)q-=lt.scrollLeft||0,X-=lt.scrollTop||0,lt=lt.parentNode;X+=(pt=S($),Gw.isFirefox()&&"table"===Ft(pt)?Gg(ye(pt)).filter(vt=>"caption"===Ft(vt)).bind(vt=>Gg(lg(vt)).map(tt=>tt.dom.offsetTop<=vt.dom.offsetTop?-vt.dom.offsetHeight:0)).getOr(0):0)}var pt;return{x:q,y:X}})(t.body,g(T),O),_=(T,O,U)=>{const $=g(T);if(!It($)&&ot($))return U?no(S($),ch(O)):("float"===(O=O.replace(/-(\D)/g,(H,q)=>q.toUpperCase()))&&(O="cssFloat"),$.style?$.style[O]:void 0)},k=T=>{const O=g(T);if(!O)return{w:0,h:0};let U=_(O,"width"),$=_(O,"height");return U&&-1!==U.indexOf("px")||(U="0"),$&&-1!==$.indexOf("px")||($="0"),{w:parseInt(U,10)||O.offsetWidth||O.clientWidth,h:parseInt($,10)||O.offsetHeight||O.clientHeight}},E=(T,O)=>{if(!T)return!1;const U=Xt(T)?T:[T];return Ht(U,$=>Wt(S($),O))},x=(T,O,U,$)=>{const H=[];let q=g(T);$=void 0===$;const X=U||("BODY"!==v().nodeName?v().parentNode:null);if(ft(O))if("*"===O)O=ot;else{const nt=O;O=lt=>E(lt,nt)}for(;q&&!(q===X||It(q.nodeType)||Li(q)||yd(q));){if(!O||O(q)){if(!$)return[q];H.push(q)}q=q.parentNode}return $?H:null},A=(T,O,U)=>{let $=O;if(T){ft(O)&&($=H=>E(H,O));for(let H=T[U];H;H=H[U])if(Rt($)&&$(H))return H}return null},N=function(T,O,U){const $=U??this;if(Xt(T)){const H=[];return Fd(T,(q,X)=>{const nt=g(q);nt&&H.push(O.call($,nt,X))}),H}{const H=g(T);return!!H&&O.call($,H)}},R=(T,O)=>{N(T,U=>{Dt(O,($,H)=>{f(U,H,$)})})},L=(T,O)=>{N(T,U=>{const $=S(U);cl($,O)})},P=(T,O,U,$,H)=>N(T,q=>{const X=ft(O)?t.createElement(O):O;return et(U)&&R(X,U),$&&(!ft($)&&$.nodeType?X.appendChild($):ft($)&&L(X,$)),H?X:q.appendChild(X)}),F=(T,O,U)=>P(t.createElement(T),T,O,U,!0),M=or.encodeAllRaw,z=(T,O)=>N(T,U=>{const $=S(U);return O&&W(ye($),H=>{Pe(H)&&0===H.dom.length?qt(H):fn($,H)}),qt($),$.dom}),G=(T,O,U)=>{N(T,$=>{if(ot($)){const H=S($),q=O.split(" ");W(q,X=>{var nt,lt,vt,tt;et(U)?(U?Br:eo)(H,X):(lt=X,un(nt=H)?nt.dom.classList.toggle(lt):(tt=lt,Bt(Ti(vt=nt),tt)?Dr(vt,tt):Or(vt,tt)),rl(nt))})}})},Q=(T,O,U)=>N(O,$=>{var H;const q=Xt(O)?T.cloneNode(!0):T;return U&&Fd(ak($.childNodes),X=>{q.appendChild(X)}),null===(H=$.parentNode)||void 0===H||H.replaceChild(q,$),$}),dt=T=>{if(ot(T)){const O="a"===T.nodeName.toLowerCase()&&!m(T,"href")&&m(T,"id");if(m(T,"name")||m(T,"data-mce-bookmark")||O)return!0}return!1},mt=()=>t.createRange(),St=(T,O,U,$)=>{if(Xt(T)){let H=T.length;const q=[];for(;H--;)q[H]=St(T[H],O,U,$);return q}return!e.collect||T!==t&&T!==o||a.push([T,O,U,$]),d.bind(T,O,U,$||yt)},Lt=(T,O,U)=>{if(Xt(T)){let $=T.length;const H=[];for(;$--;)H[$]=Lt(T[$],O,U);return H}if(a.length>0&&(T===t||T===o)){let $=a.length;for(;$--;){const[H,q,X]=a[$];T!==H||O&&O!==q||U&&U!==X||d.unbind(H,q,X)}}return d.unbind(T,O,U)},at=T=>{if(T&&ot(T)){const O=T.getAttribute("data-mce-contenteditable");return O&&"inherit"!==O?O:"inherit"!==T.contentEditable?T.contentEditable:null}return null},yt={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:T=>ft(T)?Ct(u,T):ot(T)&&(Ct(u,T.nodeName)||ji(l,T)),root:null,clone:(T,O)=>T.cloneNode(O),getRoot:v,getViewPort:T=>{const O=Eg(T);return{x:O.x,y:O.y,w:O.width,h:O.height}},getRect:T=>{const O=g(T),U=y(O),$=k(O);return{x:U.x,y:U.y,w:$.w,h:$.h}},getSize:k,getParent:(T,O,U)=>{const $=x(T,O,U,!1);return $&&$.length>0?$[0]:null},getParents:x,get:g,getNext:(T,O)=>A(T,O,"nextSibling"),getPrev:(T,O)=>A(T,O,"previousSibling"),select:(T,O)=>{var U,$;const H=null!==($=null!==(U=g(O))&&void 0!==U?U:e.root_element)&&void 0!==$?$:t;return Rt(H.querySelectorAll)?Le(H.querySelectorAll(T)):[]},is:E,add:P,create:F,createHTML:(T,O,U="")=>{let $="<"+T;for(const H in O)Sn(O,H)&&($+=" "+H+'="'+M(O[H])+'"');return Yo(U)&&Ct(l.getVoidElements(),T)?$+" />":$+">"+U+"</"+T+">"},createFragment:T=>{const O=t.createElement("div"),U=t.createDocumentFragment();let $;for(U.appendChild(O),T&&(O.innerHTML=T);$=O.firstChild;)U.appendChild($);return U.removeChild(O),U},remove:z,setStyle:(T,O,U)=>{N(T,$=>{const H=S($);uh(H,O,U),e.update_styles&&dh(c,H)})},getStyle:_,setStyles:(T,O)=>{N(T,U=>{const $=S(U);Dt(O,(H,q)=>{uh($,q,H)}),e.update_styles&&dh(c,$)})},removeAllAttribs:T=>N(T,O=>{const U=O.attributes;for(let $=U.length-1;$>=0;$--)O.removeAttributeNode(U.item($))}),setAttrib:f,setAttribs:R,getAttrib:m,getPos:y,parseStyle:T=>c.parse(T),serializeStyle:(T,O)=>c.serialize(T,O),addStyle:T=>{if(yt!==Pt.DOM&&t===document){if(n[T])return;n[T]=!0}let O=t.getElementById("mceDefaultStyles");if(!O){O=t.createElement("style"),O.id="mceDefaultStyles",O.type="text/css";const U=t.head;U.firstChild?U.insertBefore(O,U.firstChild):U.appendChild(O)}O.styleSheet?O.styleSheet.cssText+=T:O.appendChild(t.createTextNode(T))},loadCSS:T=>{T||(T=""),W(T.split(","),O=>{r[O]=!0,i.load(O).catch(xt)})},addClass:(T,O)=>{G(T,O,!0)},removeClass:(T,O)=>{G(T,O,!1)},hasClass:(T,O)=>{const U=p(T),$=O.split(" ");return et(U)&&Ze($,H=>B(U,H))},toggleClass:G,show:T=>{N(T,O=>bg(S(O),"display"))},hide:T=>{N(T,O=>gg(S(O),"display","none"))},isHidden:T=>{const O=p(T);return et(O)&&Xo(ll(O,"display"),"none")},uniqueId:T=>(T||"mce_")+s++,setHTML:L,getOuterHTML:T=>{const O=p(T);return et(O)?ot(O.dom)?O.dom.outerHTML:(U=>{const $=V("div"),H=S(U.dom.cloneNode(!0));return de($,H),_g($)})(O):""},setOuterHTML:(T,O)=>{N(T,U=>{ot(U)&&(U.outerHTML=O)})},decode:or.decode,encode:M,insertAfter:(T,O)=>{const U=g(O);return N(T,$=>{const H=U?.parentNode,q=U?.nextSibling;return H&&(q?H.insertBefore($,q):H.appendChild($)),$})},replace:Q,rename:(T,O)=>{if(T.nodeName!==O.toUpperCase()){const U=F(O);return Fd(b(T),$=>{f(U,$.nodeName,m(T,$.nodeName))}),Q(U,T,!0),U}return T},findCommonAncestor:(T,O)=>{let U=T;for(;U;){let $=O;for(;$&&U!==$;)$=$.parentNode;if(U===$)break;U=U.parentNode}return!U&&T.ownerDocument?T.ownerDocument.documentElement:U},run:N,getAttribs:b,isEmpty:(T,O)=>{let U=0;if(dt(T))return!1;const $=T.firstChild;if($){const H=new ie($,T),q=l?l.getWhitespaceElements():{},X=O||(l?l.getNonEmptyElements():null);let nt=$;do{if(ot(nt)){const lt=nt.getAttribute("data-mce-bogus");if(lt){nt=H.next("all"===lt);continue}const pt=nt.nodeName.toLowerCase();if(X&&X[pt]){if("br"===pt){U++,nt=H.next();continue}return!1}if(dt(nt))return!1}if(tr(nt)||K(nt)&&!$r(nt.data)||K(nt)&&nt.parentNode&&q[nt.parentNode.nodeName]&&$r(nt.data))return!1;nt=H.next()}while(nt)}return U<=1},createRng:mt,nodeIndex:Bs,split:(T,O,U)=>{let $,H,q=mt();if(T&&O&&T.parentNode&&O.parentNode){const X=T.parentNode;return q.setStart(X,Bs(T)),q.setEnd(O.parentNode,Bs(O)),$=q.extractContents(),q=mt(),q.setStart(O.parentNode,Bs(O)+1),q.setEnd(X,Bs(T)+1),H=q.extractContents(),X.insertBefore(Td(yt,$),T),X.insertBefore(U||O,T),X.insertBefore(Td(yt,H),T),z(T),U||O}},bind:St,unbind:Lt,fire:(T,O,U)=>d.dispatch(T,O,U),dispatch:(T,O,U)=>d.dispatch(T,O,U),getContentEditable:at,getContentEditableParent:T=>{const O=v();let U=null;for(let $=T;$&&$!==O&&(U=at($),null===U);$=$.parentNode);return U},destroy:()=>{if(a.length>0){let T=a.length;for(;T--;){const[O,U,$]=a[T];d.unbind(O,U,$)}}Dt(r,(T,O)=>{i.unload(O),delete r[O]})},isChildOf:(T,O)=>T===O||O.contains(T),dumpRng:T=>"startContainer: "+T.startContainer.nodeName+", startOffset: "+T.startOffset+", endContainer: "+T.endContainer.nodeName+", endOffset: "+T.endOffset},bt=((T,O,U)=>{const $=O.keep_values,q={style:{set:(X,nt)=>{const lt=S(X);$&&zi(lt,jd,nt),se(lt,"style"),ft(nt)&&al(lt,T.parse(nt))},get:X=>{const nt=S(X),lt=Ve(nt,jd)||Ve(nt,"style");return T.serialize(T.parse(lt),Ft(nt))}}};return $&&(q.href=q.src={set:(X,nt,lt)=>{const pt=S(X);Rt(O.url_converter)&&et(nt)&&(nt=O.url_converter.call(O.url_converter_scope||U(),String(nt),lt,X)),zi(pt,"data-mce-"+lt,nt),zi(pt,lt,nt)},get:(X,nt)=>{const lt=S(X);return Ve(lt,"data-mce-"+nt)||Ve(lt,nt)}}),q})(c,e,J(yt));return yt};Pt.DOM=Pt(document),Pt.nodeIndex=Bs;const ck=Pt.DOM;class Oo{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=ck;let s;const i=()=>{r.remove(a),s&&(s.onerror=s.onload=s=null)},a=r.uniqueId();s=document.createElement("script"),s.id=a,s.type="text/javascript",s.src=Y._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),n()},s.onerror=()=>{i(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,c)=>{Mt(n.scriptLoadedCallbacks,c).each(d=>{W(d,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=gt(l,d=>"rejected"===d.status);return c.length>0?Promise.reject($e(c,({reason:d})=>Xt(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(Et(l,c=>2===n.states[c]?(o("resolve",c),Promise.resolve()):3===n.states[c]?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),i=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return C.from(d).each(zo),r(c)})),a=Jn(e);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>i(a).then(l,c))}):i(a)}}Oo.ScriptLoader=new Oo;const ue=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},Hi={},Ud=ue("en"),mh=()=>Mt(Hi,Ud.get()),zn={getData:()=>$o(Hi,t=>({...t})),setCode:t=>{t&&Ud.set(t)},getCode:()=>Ud.get(),add:(t,e)=>{let n=Hi[t];n||(Hi[t]=n={}),Dt(e,(o,r)=>{n[r.toLowerCase()]=o})},translate:t=>{const e=mh().getOr({}),n=a=>Rt(a)?Object.prototype.toString.call(a):o(a)?"":""+a,o=a=>""===a||null==a,r=a=>{const l=n(a);return Mt(e,l.toLowerCase()).map(n).getOr(l)},s=a=>a.replace(/{context:\w+}$/,"");if(o(t))return"";if(le(i=t)&&Ct(i,"raw"))return n(t.raw);var i,a;if(Xt(a=t)&&a.length>1){const a=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Ct(a,c)?n(a[c]):l))}return s(r(t))},isRtl:()=>mh().bind(t=>Mt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>Ct(Hi,t)},Oe=()=>{const t=[],e={},n={},o=[],r=(l,c)=>{const d=gt(o,u=>u.name===l&&u.state===c);W(d,u=>u.resolve())},s=l=>Ct(e,l),i=(l,c)=>{const d=zn.getCode();!d||c&&-1===(","+(c||"")+",").indexOf(","+d+",")||Oo.ScriptLoader.add(e[l]+"/langs/"+d+".js")},a=(l,c="added")=>"added"===c&&Ct(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==Oe.languageLoad&&(s(l)?i(l,c):a(l,"loaded").then(()=>i(l,c)))},add:(l,c)=>(t.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete e[l],delete n[l]},createUrl:(l,c)=>ft(c)?ft(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(e[l])return Promise.resolve();let d=ft(c)?c:c.prefix+c.resource+c.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=Oe.baseURL+"/"+d),e[l]=d.substring(0,d.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Oo.ScriptLoader.add(d).then(u)},waitFor:a}};Oe.languageLoad=!0,Oe.baseURL="",Oe.PluginManager=Oe(),Oe.ThemeManager=Oe(),Oe.ModelManager=Oe();const dk=t=>{const e=ue(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},sr=()=>{const t=(e=>{const n=ue(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(xt);return{...t,on:e=>t.get().each(e)}},El=(t,e)=>{let n=null;return{cancel:()=>{In(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{In(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},zd=(t,e)=>{let n=null;const o=()=>{In(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},$i=J("mce-annotation"),Wr=J("data-mce-annotation"),Ls=J("data-mce-annotation-uid"),qi=J("data-mce-annotation-active"),Vi=J("data-mce-annotation-classes"),Wi=J("data-mce-annotation-attrs"),fh=t=>e=>kt(e,t),gh=(t,e)=>{const n=t.selection.getRng(),o=S(n.startContainer),r=S(t.getBody()),s=e.fold(()=>"."+$i(),a=>`[${Wr()}="${a}"]`),i=il(o,n.startOffset).getOr(o);return Fr(i,s,fh(r)).bind(a=>en(a,`${Ls()}`).bind(l=>en(a,`${Wr()}`).map(c=>{const d=ph(t,l);return{uid:l,name:c,elements:d}})))},hh=(t,e)=>Rr(t,"data-mce-bogus")||Ag(t,'[data-mce-bogus="all"]',fh(e)),ph=(t,e)=>{const n=S(t.getBody()),o=Te(n,`[${Ls()}="${e}"]`);return gt(o,r=>!hh(r,n))},bh=(t,e)=>{const n=S(t.getBody()),o=Te(n,`[${Wr()}="${e}"]`),r={};return W(o,s=>{if(!hh(s,n)){const i=Ve(s,Ls()),a=Mt(r,i).getOr([]);r[i]=a.concat([s])}}),r};let vh=0;const yh=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return vh++,t+"_"+n+vh+String(e)},_h=(t,e)=>S(t.dom.cloneNode(e)),Ps=t=>_h(t,!1),Ch=t=>_h(t,!0),wh=(t,e,n=jt)=>{const o=new ie(t,e),r=s=>{let i;do{i=o[s]()}while(i&&!K(i)&&!n(i));return C.from(i).filter(K)};return{current:()=>C.from(o.current()).filter(K),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Kr=(t,e)=>{const n=e||(r=>t.isBlock(r)||Zt(r)||Ut(r)),o=(r,s,i,a)=>{if(K(r)){const l=a(r,s,r.data);if(-1!==l)return C.some({container:r,offset:l})}return i().bind(l=>o(l.container,l.offset,i,a))};return{backwards:(r,s,i,a)=>{const l=wh(r,a??t.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),i).getOrNull()},forwards:(r,s,i,a)=>{const l=wh(r,a??t.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),i).getOrNull()}}},Is=Math.round,Yr=t=>t?{left:Is(t.left),top:Is(t.top),bottom:Is(t.bottom),right:Is(t.right),width:Is(t.width),height:Is(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},kh=(t,e)=>(t=Yr(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),xh=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Ki=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&xh(e.top-t.bottom,t,e)},Yi=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&xh(e.bottom-t.top,t,e),Eh=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Sl=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},ir=(t,e)=>{if(ot(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(i=n.length-1,Math.min(Math.max(e,0),i))]}var i;return t},uk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Sh=t=>ft(t)&&t.charCodeAt(0)>=768&&uk.test(t),Nh=ot,mk=On,Ah=ml("display","block table"),fk=ml("float","left right"),Xi=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Nh,mk,yr(fk)),gk=yr(ml("white-space","pre pre-line pre-wrap")),Gi=K,Hd=Zt,Rh=Pt.nodeIndex,Nl=(t,e)=>e<0&&ot(t)&&t.hasChildNodes()?void 0:ir(t,e),$d=t=>t?t.createRange():Pt.DOM.createRng(),qd=t=>ft(t)&&/[\r\n\t ]/.test(t),Th=t=>!!t.setStart&&!!t.setEnd,Vd=t=>{const e=t.startContainer,n=t.startOffset;if(qd(t.toString())&&gk(e.parentNode)&&K(e)){const o=e.data;if(qd(o[n-1])||qd(o[n+1]))return!0}return!1},Oh=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,ar=t=>{var e;let n;const o=t.getClientRects();return n=Yr(o.length>0?o[0]:t.getBoundingClientRect()),!Th(t)&&Hd(t)&&Oh(n)?(r=>{const s=r.ownerDocument,i=$d(s),a=s.createTextNode(be),l=r.parentNode;l.insertBefore(a,r),i.setStart(a,0),i.setEnd(a,1);const c=Yr(i.getBoundingClientRect());return l.removeChild(a),c})(t):Oh(n)&&Th(t)&&null!==(e=(r=>{const i=r.endContainer,a=r.startOffset,l=r.endOffset;if(r.startContainer===i&&K(i)&&0===a&&1===l){const c=r.cloneRange();return c.setEndAfter(i),ar(c)}return null})(t))&&void 0!==e?e:n},Xr=(t,e)=>{const n=kh(t,e);return n.width=1,n.right=n.left+1,n},j=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],i=d=>{var u,g;0!==d.height&&(s.length>0&&(u=d).left===(g=s[s.length-1]).left&&u.top===g.top&&u.bottom===g.bottom&&u.right===g.right||s.push(d))},a=(d,u)=>{const g=$d(d.ownerDocument);if(u<d.data.length){if(Sh(d.data[u]))return;if(Sh(d.data[u-1])&&(g.setStart(d,u),g.setEnd(d,u+1),!Vd(g)))return void i(Xr(ar(g),!1))}u>0&&(g.setStart(d,u-1),g.setEnd(d,u),Vd(g)||i(Xr(ar(g),!1))),u<d.data.length&&(g.setStart(d,u),g.setEnd(d,u+1),Vd(g)||i(Xr(ar(g),!0)))},l=r.container(),c=r.offset();if(Gi(l))return a(l,c),s;if(Nh(l))if(r.isAtEnd()){const d=Nl(l,c);Gi(d)&&a(d,d.data.length),Xi(d)&&!Hd(d)&&i(Xr(ar(d),!1))}else{const d=Nl(l,c);if(Gi(d)&&a(d,0),Xi(d)&&r.isAtEnd())return i(Xr(ar(d),!1)),s;const u=Nl(r.container(),r.offset()-1);Xi(u)&&!Hd(u)&&(Ah(u)||Ah(d)||!Xi(d))&&i(Xr(ar(u),!1)),Xi(d)&&i(Xr(ar(d),!0))}return s})(j(t,e))),n);return{container:J(t),offset:J(e),toRange:()=>{const r=$d(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Gi(t),0===e),isAtEnd:()=>Gi(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Nl(t,r?e-1:e)}};j.fromRangeStart=t=>j(t.startContainer,t.startOffset),j.fromRangeEnd=t=>j(t.endContainer,t.endOffset),j.after=t=>j(t.parentNode,Rh(t)+1),j.before=t=>j(t.parentNode,Rh(t)),j.isAbove=(t,e)=>Jt(Se(e.getClientRects()),ko(t.getClientRects()),Ki).getOr(!1),j.isBelow=(t,e)=>Jt(ko(e.getClientRects()),Se(t.getClientRects()),Yi).getOr(!1),j.isAtStart=t=>!!t&&t.isAtStart(),j.isAtEnd=t=>!!t&&t.isAtEnd(),j.isTextPosition=t=>!!t&&K(t.container()),j.isElementPosition=t=>!j.isTextPosition(t);const Al=(t,e)=>{K(e)&&0===e.data.length&&t.remove(e)},Wd=(t,e,n)=>{var o,s;yd(n)?((o,r,s)=>{const i=C.from(s.firstChild),a=C.from(s.lastChild);r.insertNode(s),i.each(l=>Al(o,l.previousSibling)),a.each(l=>Al(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),Al(o,s.previousSibling),Al(o,s.nextSibling))},Hn=K,Dh=Ur,Bh=Pt.nodeIndex,Lh=t=>{const e=t.parentNode;return Dh(e)?Lh(e):e},Kd=t=>t?ks(t.childNodes,(e,n)=>(Dh(n)&&"BR"!==n.nodeName?e=e.concat(Kd(n)):e.push(n),e),[]):[],Ph=t=>e=>t===e,Ih=t=>(Hn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Kd(Lh(e)),o=Ha(n,Ph(e),e),n=n.slice(0,o+1);const r=ks(n,(s,i,a)=>(Hn(i)&&Hn(n[a-1])&&s++,s),0);return n=xr(n,Fn([e.nodeName])),o=Ha(n,Ph(e),e),o-r})(t)+"]",Mh=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(Hn(r))n=((a,l)=>{let c=a;for(;(c=c.previousSibling)&&Hn(c);)l+=c.data.length;return l})(r,s);else{const a=r.childNodes;s>=a.length?(n="after",s=a.length-1):n="before",r=a[s]}o.push(Ih(r));let i=((a,l,c)=>{const d=[];for(let u=l.parentNode;u&&u!==a;u=u.parentNode)d.push(u);return d})(t,r);return i=xr(i,yr(Ur)),o=o.concat(pi(i,a=>Ih(a))),o.reverse().join("/")+","+n},Fh=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=ks(o,(i,a)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return l?("text()"===l[1]&&(l[1]="#text"),((c,d,u)=>{let g=Kd(c);return g=xr(g,(p,m)=>!Hn(p)||!Hn(g[m-1])),g=xr(g,Fn([d])),g[u]})(i,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!Hn(s)&&s.parentNode){let i;return i="after"===r?Bh(s)+1:Bh(s),j(s.parentNode,i)}return((i,a)=>{let l=i,c=0;for(;Hn(l);){const d=l.data.length;if(a>=c&&a<=c+d){i=l,a-=c;break}if(!Hn(l.nextSibling)){i=l,a=d;break}c+=d,l=l.nextSibling}return Hn(i)&&a>i.data.length&&(a=i.data.length),j(i,a)})(s,parseInt(r,10))},Rl=Ut,jh=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let i=r?o.startOffset:o.endOffset;const a=[],l=t.getRoot();if(K(s))a.push(n?((c,d,u)=>{let g=c(d.data.slice(0,u)).length;for(let p=d.previousSibling;p&&K(p);p=p.previousSibling)g+=c(p.data).length;return g})(e,s,i):i);else{let c=0;const d=s.childNodes;i>=d.length&&d.length&&(c=1,i=Math.max(0,d.length-1)),a.push(t.nodeIndex(d[i],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)a.push(t.nodeIndex(c,n));return a},Yd=(t,e,n)=>{let o=0;return Y.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},Uh=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(ot(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},zh=t=>(Uh(t,!0),Uh(t,!1),t),Hh=(t,e)=>{if(ot(t)&&(t=ir(t,e),Rl(t)))return t;if(gn(t)){K(t)&&Os(t)&&(t=t.parentNode);let n=t.previousSibling;if(Rl(n)||(n=t.nextSibling,Rl(n)))return n}},$h=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||Rl(o)){const i=o.nodeName;return{name:i,index:Yd(n.dom,i,o)}}const s=Hh((i=r).startContainer,i.startOffset)||Hh(i.endContainer,i.endOffset);var i;if(s){const i=s.tagName;return{name:i,index:Yd(n.dom,i,s)}}return((i,a,l,c)=>{const d=a.dom,u=jh(d,i,l,c,!0),g=a.isForward(),p=Fg(c)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:u,forward:g,...p}:{start:u,end:jh(d,i,l,c,!1),forward:g,...p}})(t,n,e,r)},qh=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Vh=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),i=t.getNode(),a=i.nodeName,l=t.isForward();if("IMG"===a)return{name:a,index:Yd(n,a,i)};const c=zh(o.cloneRange());if(!s){c.collapse(!1);const u=qh(n,r+"_end",e);Wd(n,c,u)}o=zh(o),o.collapse(!0);const d=qh(n,r+"_start",e);return Wd(n,o,d),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Xd=rt($h,Ce,!0),Wh=t=>{const e=s=>s(t),n=J(t),o=()=>r,r={tag:!0,inner:t,fold:(s,i)=>i(t),isValue:Gt,isError:jt,map:s=>Me.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},Kh=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,s)=>r(t),isValue:jt,isError:Gt,map:e,mapError:r=>Me.error(r(t)),bind:e,exists:jt,forall:Gt,getOr:Ce,or:Ce,getOrThunk:vs,orThunk:vs,getOrDie:(o=String(t),()=>{throw new Error(o)}),each:xt,toOptional:C.none};var o;return n},Me={value:Wh,error:Kh,fromOption:(t,e)=>t.fold(()=>Kh(e),Wh)},ro=t=>{if(!Xt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return W(t,(o,r)=>{const s=we(o);if(1!==s.length)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Xt(a))throw new Error("case arguments must be an array");e.push(i),n[i]=(...l)=>{const c=l.length;if(c!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+c);return{fold:(...d)=>{if(d.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const u=we(d);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!Ze(e,g=>Bt(u,g)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return d[i].apply(null,l)},log:d=>{console.log(d,{constructors:e,constructor:i,params:l})}}}}),n};ro([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const hk=t=>"inline-command"===t.type||"inline-format"===t.type,pk=t=>"block-command"===t.type||"block-format"===t.type,bk=t=>{const e=o=>Me.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let i;if(Xt(t.format)){if(!Ze(t.format,ft))return e(o+" pattern has non-string items in the `format` array");i=t.format}else{if(!ft(t.format))return e(o+" pattern has non-string `format` parameter");i=[t.format]}return Me.value(r(i))}return void 0!==t.cmd?ft(t.cmd)?Me.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!le(t))return e("Raw pattern is not an object");if(!ft(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!ft(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,i)=>({type:"inline-command",start:o,end:r,cmd:s,value:i}))}return void 0!==t.replacement?ft(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Me.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},Yh=t=>gt(t,pk),Xh=t=>gt(t,hk),Gh=t=>{const e=(n=>{const o=[],r=[];return W(n,s=>{s.fold(i=>{o.push(i)},i=>{r.push(i)})}),{errors:o,values:r}})(Et(t,bk));return W(e.errors,n=>console.error(n.message,n.pattern)),e.values},Gd=No().deviceType,vk=Gd.isTouch(),yk=Pt.DOM,Qh=t=>an(t,RegExp),st=t=>e=>e.options.get(t),Qd=t=>ft(t)||le(t),Jh=(t,e="")=>n=>{const o=ft(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const i=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return he(i,(a,l)=>{const c=l.split("="),d=c[0],u=c.length>1?c[1]:d;return a[Ko(d)]=Ko(u),a},{})})(n);return{value:Mt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},_k=st("iframe_attrs"),Ck=st("doctype"),Zh=st("document_base_url"),wk=st("body_id"),kk=st("body_class"),tp=st("content_security_policy"),xk=st("br_in_pre"),nn=st("forced_root_block"),Qi=st("forced_root_block_attrs"),Ek=st("newline_behavior"),Sk=st("br_newline_selector"),Nk=st("no_newline_selector"),Ak=st("keep_styles"),Rk=st("end_container_on_empty_block"),ep=st("automatic_uploads"),np=st("images_reuse_filename"),Tk=st("images_replace_blob_uris"),op=st("icons"),Ok=st("icons_url"),Dk=st("images_upload_url"),Bk=st("images_upload_base_path"),Lk=st("images_upload_credentials"),Pk=st("images_upload_handler"),Ik=st("content_css_cors"),Jd=st("referrer_policy"),rp=st("language"),Mk=st("language_url"),sp=st("indent_use_margin"),Fk=st("indentation"),jk=st("content_css"),Uk=st("content_style"),ip=st("font_css"),zk=st("directionality"),Hk=st("inline_boundaries_selector"),ap=st("object_resizing"),$k=st("resize_img_proportional"),qk=st("placeholder"),lp=st("event_root"),Vk=st("service_message"),Ms=st("theme"),Wk=st("theme_url"),Zd=st("model"),Kk=st("model_url"),Ji=st("inline_boundaries"),Yk=st("formats"),Xk=st("preview_styles"),Gk=st("format_empty_lines"),Qk=st("format_noneditable_selector"),Jk=st("custom_ui_selector"),tu=st("inline"),Zk=st("hidden_input"),tx=st("submit_patch"),ex=st("add_form_submit_trigger"),nx=st("add_unload_trigger"),ox=st("custom_undo_redo_levels"),rx=st("disable_nodechange"),cp=st("readonly"),dp=st("content_css_cors"),Tl=st("plugins"),sx=st("external_plugins"),ix=st("block_unsupported_drop"),ax=st("visual"),lx=st("visual_table_class"),up=st("visual_anchor_class"),cx=st("iframe_aria_text"),dx=st("setup"),ux=st("init_instance_callback"),mx=st("urlconverter_callback"),fx=st("auto_focus"),gx=st("browser_spellcheck"),hx=st("protect"),px=st("paste_block_drop"),Ol=st("paste_data_images"),bx=st("paste_preprocess"),vx=st("paste_postprocess"),yx=st("paste_webkit_styles"),_x=st("paste_remove_styles_if_webkit"),Cx=st("paste_merge_formats"),wx=st("smart_paste"),kx=st("paste_as_text"),xx=st("paste_tab_spaces"),Ex=st("allow_html_data_urls"),Sx=st("text_patterns"),Nx=st("text_patterns_lookup"),mp=st("noneditable_class"),Ax=st("editable_class"),Rx=st("noneditable_regexp"),Tx=st("preserve_cdata"),fp=t=>Y.explode(t.options.get("images_file_types")),Ox=st("table_tab_navigation"),Dx=ot,gp=K,hp=t=>{const e=t.parentNode;e&&e.removeChild(t)},pp=t=>{const e=To(t);return{count:t.length-e.length,text:e}},bp=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(xe));)t.deleteData(e,1)},vp=(t,e)=>(Gr(t),e),Gr=t=>{Dx(t)&&gn(t)&&(Mg(t)?t.removeAttribute("data-mce-caret"):hp(t)),gp(t)&&(bp(t),0===t.data.length&&hp(t))},Lx=Ut,Px=oo,Ix=fl,yp=(t,e,n)=>{const o=kh(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const a=t.ownerDocument.documentElement;r=t.scrollLeft||a.scrollLeft,s=t.scrollTop||a.scrollTop}else{const a=t.getBoundingClientRect();r=t.scrollLeft-a.left,s=t.scrollTop-a.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let i=e.offsetWidth-e.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},_p=()=>At.browser.isFirefox(),Zi=t=>Lx(t)||Px(t),ta=t=>Zi(t)||Ro(t)&&_p(),Fx=jn,eu=Ut,jx=oo,Cp=ml("display","block table table-cell table-caption list-item"),wp=gn,kp=Os,Ux=ot,zx=K,Hx=On,Fs=t=>t>0,Qr=t=>t<0,Dl=(t,e)=>{let n;for(;n=t(e);)if(!kp(n))return n;return null},ea=(t,e,n,o,r)=>{const s=new ie(t,o),i=eu(t)||kp(t);let a;if(Qr(e)){if(i&&(a=Dl(s.prev.bind(s),!0),n(a)))return a;for(;a=Dl(s.prev.bind(s),r);)if(n(a))return a}if(Fs(e)){if(i&&(a=Dl(s.next.bind(s),!0),n(a)))return a;for(;a=Dl(s.next.bind(s),r);)if(n(a))return a}return null},lr=(t,e)=>{for(;t&&t!==e;){if(Cp(t))return t;t=t.parentNode}return null},so=(t,e,n)=>lr(t.container(),n)===lr(e.container(),n),nu=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return Ux(n)?C.from(n.childNodes[o+t]):C.none()},xp=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},$x=(t,e,n)=>lr(e,t)===lr(n,t),Ep=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&wp(s)&&(s=s[o]),eu(s)||jx(s)){if($x(e,s,r))return s;break}if(Hx(s))break;r=r.parentNode}return null},na=rt(xp,!0),oa=rt(xp,!1),ou=(t,e,n)=>{let o;const r=rt(Ep,!0,e),s=rt(Ep,!1,e),i=n.startContainer,a=n.startOffset;if(Os(i)){const l=zx(i)?i.parentNode:i,c=l.getAttribute("data-mce-caret");if("before"===c&&(o=l.nextSibling,ta(o)))return na(o);if("after"===c&&(o=l.previousSibling,ta(o)))return oa(o)}if(!n.collapsed)return n;if(K(i)){if(wp(i)){if(1===t){if(o=s(i),o)return na(o);if(o=r(i),o)return oa(o)}if(-1===t){if(o=r(i),o)return oa(o);if(o=s(i),o)return na(o)}return n}if(bl(i)&&a>=i.data.length-1)return 1===t&&(o=s(i),o)?na(o):n;if(pl(i)&&a<=1)return-1===t&&(o=r(i),o)?oa(o):n;if(a===i.data.length)return o=s(i),o?na(o):n;if(0===a)return o=r(i),o?oa(o):n}return n},Sp=(t,e)=>nu(t?0:-1,e).filter(eu),ra=(t,e,n)=>{const o=ou(t,e,n);return-1===t?j.fromRangeStart(o):j.fromRangeEnd(o)},Bl=t=>C.from(t.getNode()).map(S),ru=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},Ll=(t,e)=>{const n=so(t,e);return!(n||!Zt(t.getNode()))||n};var me,t;(t=me||(me={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const qx=Ut,io=K,Np=ot,su=Zt,js=On,Ap=t=>{return Ug(t)||!!Nd(e=t)&&!he(Le(e.getElementsByTagName("*")),(n,o)=>n||jg(o),!1);var e},Pl=zg,Rp=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Tp=(t,e)=>{if(Fs(t)){if(js(e.previousSibling)&&!io(e.previousSibling))return j.before(e);if(io(e))return j(e,0)}if(Qr(t)){if(js(e.nextSibling)&&!io(e.nextSibling))return j.after(e);if(io(e))return j(e,e.data.length)}return Qr(t)?su(e)?j.before(e):j.after(e):j.before(e)},iu=(t,e,n)=>{let o,r,s,i;if(!Np(n)||!e)return null;if(e.isEqual(j.after(n))&&n.lastChild){if(i=j.after(n.lastChild),Qr(t)&&js(n.lastChild)&&Np(n.lastChild))return su(n.lastChild)?j.before(n.lastChild):i}else i=e;const a=i.container();let l=i.offset();if(io(a)){if(Qr(t)&&l>0)return j(a,--l);if(Fs(t)&&l<a.length)return j(a,++l);o=a}else{if(Qr(t)&&l>0&&(r=Rp(a,l-1),js(r)))return!Ap(r)&&(s=ea(r,t,Pl,r),s)?io(s)?j(s,s.data.length):j.after(s):io(r)?j(r,r.data.length):j.before(r);if(Fs(t)&&l<a.childNodes.length&&(r=Rp(a,l),js(r)))return su(r)?((d,u)=>{const g=u.nextSibling;return g&&js(g)?io(g)?j(g,0):j.before(g):iu(me.Forwards,j.after(u),d)})(n,r):!Ap(r)&&(s=ea(r,t,Pl,r),s)?io(s)?j(s,0):j.before(s):io(r)?j(r,0):j.after(r);o=r||i.getNode()}if(o&&(Fs(t)&&i.isAtEnd()||Qr(t)&&i.isAtStart())&&(o=ea(o,t,Gt,n,!0),Pl(o,n)))return Tp(t,o);r=o&&ea(o,t,Pl,n);const c=Eo(gt(((d,u)=>{const g=[];let p=d;for(;p&&p!==u;)g.push(p),p=p.parentNode;return g})(a,n),qx));return!c||r&&c.contains(r)?r?Tp(t,r):null:(i=Fs(t)?j.after(c):j.before(c),i)},ao=t=>({next:e=>iu(me.Forwards,e,t),prev:e=>iu(me.Backwards,e,t)}),Op=t=>j.isTextPosition(t)?0===t.offset():On(t.getNode()),Dp=t=>{if(j.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return On(t.getNode(!0))},Bp=(t,e)=>!j.isTextPosition(t)&&!j.isTextPosition(e)&&t.getNode()===e.getNode(!0),hn=(t,e,n)=>{const o=ao(e);return C.from(t?o.next(n):o.prev(n))},Il=(t,e,n)=>hn(t,e,n).bind(o=>{return so(n,o,e)&&(s=n,i=o,t?!Bp(s,i)&&(j.isTextPosition(a=s)||!Zt(a.getNode()))&&Dp(s)&&Op(i):!Bp(i,s)&&Op(s)&&Dp(i))?hn(t,e,o):C.some(o);var s,i,a}),Lp=(t,e,n,o)=>Il(t,e,n).bind(r=>o(r)?Lp(t,e,r,o):C.some(r)),Us=(t,e)=>{const n=t?e.firstChild:e.lastChild;return K(n)?C.some(j(n,t?0:n.data.length)):n?On(n)?C.some(t?j.before(n):Zt(o=n)?j.before(o):j.after(o)):((r,s,i)=>{const a=r?j.before(i):j.after(i);return hn(r,s,a)})(t,e,n):C.none();var o},Ke=rt(hn,!0),pn=rt(hn,!1),Fe=rt(Us,!0),lo=rt(Us,!1),au="_mce_caret",$n=t=>ot(t)&&t.id===au,Jr=(t,e)=>{let n=e;for(;n&&n!==t;){if($n(n))return n;n=n.parentNode}return null},Pp=t=>Ct(t,"name"),Ip=t=>Y.isArray(t.start),Ml=t=>!(!Pp(t)&&ge(t.forward))||t.forward,Mp=(t,e)=>(ot(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),Vx=(t,e)=>lo(t).fold(jt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Fp=(t,e,n)=>!(e.hasChildNodes()||!Jr(t,e)||(((o,r)=>{var s;const i=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(xe);o.appendChild(i),r.setStart(i,0),r.setEnd(i,0)})(e,n),0)),jp=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let i=s,a=r[0];for(let l=r.length-1;i&&l>=1;l--){const c=i.childNodes;if(Fp(s,i,o))return!0;if(r[l]>c.length-1)return!!Fp(s,i,o)||Vx(i,o);i=c[r[l]]}K(i)&&(a=Math.min(r[0],i.data.length)),ot(i)&&(a=Math.min(r[0],i.childNodes.length)),e?o.setStart(i,a):o.setEnd(i,a)}return!0},lu=t=>K(t)&&t.data.length>0,Up=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let i,a;if("start"===e?s?o.hasChildNodes()?(i=o.firstChild,a=1):lu(o.nextSibling)?(i=o.nextSibling,a=0):lu(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=t.nodeIndex(o)+1):(i=r,a=t.nodeIndex(o)):s?o.hasChildNodes()?(i=o.firstChild,a=1):lu(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=t.nodeIndex(o)):(i=r,a=t.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(Y.each(Y.grep(o.childNodes),u=>{K(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});d=t.get(n.id+"_"+e);)t.remove(d,!0);if(K(c)&&K(l)&&!At.browser.isOpera()){const u=l.data.length;l.appendData(c.data),t.remove(c),i=l,a=u}}return C.some(j(i,a))}return C.none()},Wx=(t,e,n)=>((o,r,s=!1)=>{return 2===r?$h(To,s,o):3===r?(i=>{const a=i.getRng();return{start:Mh(i.dom.getRoot(),j.fromRangeStart(a)),end:Mh(i.dom.getRoot(),j.fromRangeEnd(a)),forward:i.isForward()}})(o):r?{rng:(i=o).getRng(),forward:i.isForward()}:Vh(o,!1);var i})(t,e,n),Kx=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(Ip(o))return((s,i)=>{const a=s.createRng();return jp(s,!0,i,a)&&jp(s,!1,i,a)?C.some({range:a,forward:Ml(i)}):C.none()})(r,o);if(ft(o.start))return((s,i)=>{const a=C.from(Fh(s.getRoot(),i.start)),l=C.from(Fh(s.getRoot(),i.end));return Jt(a,l,(c,d)=>{const u=s.createRng();return u.setStart(c.container(),c.offset()),u.setEnd(d.container(),d.offset()),{range:u,forward:Ml(i)}})})(r,o);if(Ct(o,"id"))return((s,i)=>{const a=Up(s,"start",i),l=Up(s,"end",i);return Jt(a,l.or(a),(c,d)=>{const u=s.createRng();return u.setStart(Mp(s,c.container()),c.offset()),u.setEnd(Mp(s,d.container()),d.offset()),{range:u,forward:Ml(i)}})})(r,o);if(Pp(o))return((s,i)=>C.from(s.select(i.name)[i.index]).map(a=>{const l=s.createRng();return l.selectNode(a),{range:l,forward:!0}}))(r,o);if((s=>Ct(s,"rng"))(o))return C.some({range:o.rng,forward:Ml(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},bn=t=>ot(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Fl=t=>"\xa0"===t,zs=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),cu=t=>!zs(t)&&!Fl(t)&&!Bg(t),du=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Yx=t=>({value:du(t.red)+du(t.green)+du(t.blue)}),Xx=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Gx=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,zp=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Hp=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),i=parseInt(n,10),a=parseFloat(o);return zp(r,s,i,a)},jl=t=>(e=>{if("transparent"===e)return C.some(zp(0,0,0,0));const n=Xx.exec(e);if(null!==n)return C.some(Hp(n[1],n[2],n[3],"1"));const o=Gx.exec(e);return null!==o?C.some(Hp(o[1],o[2],o[3],o[4])):C.none()})(t).map(Yx).map(e=>"#"+e.value).getOr(t),uu=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},$p=(t,e)=>{const n=Te(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:gt($e(t,s=>{const i=Sl(s);return i?[S(i)]:[]}),Mi)},Hs=t=>$p(uu(t.selection.getSel()),S(t.getBody())),sa=(t,e)=>Di(t,"table",e),qp=t=>cg(t).fold(J([t]),e=>[t].concat(qp(e))),mu=t=>md(t).fold(J([t]),e=>"br"===Ft(e)?We(e).map(n=>[t].concat(mu(n))).getOr([]):[t].concat(mu(e))),fu=(t,e)=>Jt((n=>{const o=n.startContainer,r=n.startOffset;return K(o)?0===r?C.some(S(o)):C.none():C.from(o.childNodes[r]).map(S)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return K(o)?r===o.data.length?C.some(S(o)):C.none():C.from(o.childNodes[r-1]).map(S)})(e),(n,o)=>{const r=ne(qp(t),rt(kt,n)),s=ne(mu(t),rt(kt,o));return r.isSome()&&s.isSome()}).getOr(!1),gu=(t,e,n,o)=>{const r=n,s=new ie(n,r),i=qo(t.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!Bt(["td","th","table"],c.toLowerCase()));let a=n;do{if(K(a)&&0!==Y.trim(a.data).length)return void(o?e.setStart(a,0):e.setEnd(a,a.data.length));if(i[a.nodeName])return void(o?e.setStartBefore(a):"BR"===a.nodeName?e.setEndBefore(a):e.setEndAfter(a))}while(a=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Ul=t=>{const e=t.selection.getSel();return et(e)&&e.rangeCount>0},hu=(t,e)=>{const n=Hs(t);n.length>0?W(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},Vp=(t,e,n)=>{const o=Vh(t,e);n(o),t.moveToBookmark(o)},zl=t=>ln(t?.nodeType),pu=t=>ot(t)&&!bn(t)&&!$n(t)&&!Ur(t),Zr=t=>!0===t.isContentEditable,Wp=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),i=Ut(s);Vp(o,!0,()=>{e()}),i&&Ut(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&Qx(r,o)},Qx=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:i}=r;if(!((a,l)=>{if(pu(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=a.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(t,e.getNode())&&ot(s)){const a=s.childNodes,l=t.getRoot();let c;if(i<a.length){const d=a[i];c=new ie(d,null!==(n=t.getParent(d,t.isBlock))&&void 0!==n?n:l)}else{const d=a[a.length-1];c=new ie(d,null!==(o=t.getParent(d,t.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if("false"===t.getContentEditable(d))return;if(K(d)&&!vu(d))return r.setStart(d,0),void e.setRng(r)}}},Kp=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(ot(t)||!vu(t))return t}},bu=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||ji(t,e),$s=(t,e,n)=>t.schema.isValidChild(e,n),vu=(t,e=!1)=>{if(et(t)&&K(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return $r(n)}return!1},Yp=(t,e)=>{const n=t.dom;return pu(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",i=Qk(o),a=Yo(i)?s:`${s},${i}`;return Wt(S(r),a)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},cr=(t,e)=>Rt(t)?t(e):(et(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),yu=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),_u=(t,e)=>{if(It(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=jl(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Hl=(t,e,n)=>{const o=t.getStyle(e,n);return _u(o,n)},Xp=(t,e)=>{let n;return t.getParent(e,o=>!!ot(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},$l=(t,e,n)=>t.getParents(e,n,t.getRoot()),Cu=(t,e,n)=>{const o=t.formatter.get(e);return et(o)&&Ht(o,n)},co=t=>Sn(t,"block"),vn=t=>Sn(t,"selector"),ae=t=>Sn(t,"inline"),wu=t=>vn(t)&&!1!==t.expand&&!ae(t),qs=bn,Gp=$l,Qp=vu,Jx=bu,Jp=(t,e)=>{let n=e;for(;n;){if(ot(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},Zp=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},Zx=(t,e,n)=>Zp(t,e,n,o=>Fl(o)||zs(o)),tE=(t,e,n)=>Zp(t,e,n,cu),tb=(t,e,n,o,r,s)=>{let i;const a=t.getParent(n,t.isBlock)||e,l=(c,d,u)=>{const g=Kr(t);return C.from((r?g.backwards:g.forwards)(c,d,(m,b)=>qs(m.parentNode)?-1:(i=m,u(r,m,b)),a))};return l(n,o,Zx).bind(c=>s?l(c.container,c.offset+(r?-1:0),tE):C.some(c)).orThunk(()=>i?C.some({container:i,offset:r?0:i.length}):C.none())},eb=(t,e,n,o,r)=>{const s=o[r];K(o)&&Yo(o.data)&&s&&(o=s);const i=Gp(t,o);for(let a=0;a<i.length;a++)for(let l=0;l<e.length;l++){const c=e[l];if((!et(c.collapsed)||c.collapsed===n.collapsed)&&vn(c)&&t.is(i[a],c.selector))return i[a]}return o},nb=(t,e,n,o)=>{var r;let s=n;const i=t.getRoot(),a=e[0];if(co(a)&&(s=a.wrapper?null:t.getParent(n,a.block,i)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH"))&&void 0!==r?r:i;s=t.getParent(K(n)?n.parentNode:n,c=>c!==i&&Jx(t.schema,c),l)}if(s&&co(a)&&a.wrapper&&(s=Gp(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!yu(s,"br")););return s||n},ob=(t,e,n,o)=>{const r=n.parentNode;return!et(n[o])&&(!(r!==e&&!It(r)&&!t.isBlock(r))||ob(t,e,r,o))},ql=(t,e,n,o,r)=>{let s=n;const i=r?"previousSibling":"nextSibling",a=t.getRoot();if(K(n)&&!Qp(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let c=s[i];c;c=c[i]){const d=K(c)&&!ob(t,a,c,i);if(!qs(c)&&(!Zt(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Qp(c,d))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},rb=t=>qs(t.parentNode)||qs(t),ts=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:i,endOffset:a}=e;const l=n[0];return ot(r)&&r.hasChildNodes()&&(r=ir(r,s),K(r)&&(s=0)),ot(i)&&i.hasChildNodes()&&(i=ir(i,e.collapsed?a:a-1),K(i)&&(a=i.data.length)),r=Jp(t,r),i=Jp(t,i),rb(r)&&(r=qs(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,K(r)&&(s=e.collapsed?r.length:0)),rb(i)&&(i=qs(i)?i:i.parentNode,i=e.collapsed?i.nextSibling||i:i.previousSibling||i,K(i)&&(a=e.collapsed?0:i.length)),e.collapsed&&(tb(t,t.getRoot(),r,s,!0,o).each(({container:c,offset:d})=>{r=c,s=d}),tb(t,t.getRoot(),i,a,!1,o).each(({container:c,offset:d})=>{i=c,a=d})),(ae(l)||l.block_expand)&&(ae(l)&&K(r)&&0!==s||(r=ql(t,n,r,s,!0)),ae(l)&&K(i)&&a!==i.data.length||(i=ql(t,n,i,a,!1))),wu(l)&&(r=eb(t,n,e,r,"previousSibling"),i=eb(t,n,e,i,"nextSibling")),(co(l)||vn(l))&&(r=nb(t,n,r,"previousSibling"),i=nb(t,n,i,"nextSibling"),co(l)&&(t.isBlock(r)||(r=ql(t,n,r,s,!0)),t.isBlock(i)||(i=ql(t,n,i,a,!1)))),ot(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),ot(i)&&i.parentNode&&(a=t.nodeIndex(i)+1,i=i.parentNode),{startContainer:r,startOffset:s,endContainer:i,endOffset:a}},ia=(t,e,n)=>{var o;const r=e.startOffset,s=ir(e.startContainer,r),i=e.endOffset,a=ir(e.endContainer,i-1),l=f=>{const v=f[0];K(v)&&v===s&&r>=v.data.length&&f.splice(0,1);const y=f[f.length-1];return 0===i&&f.length>0&&y===a&&K(y)&&f.splice(f.length-1,1),f},c=(f,v,y)=>{const _=[];for(;f&&f!==y;f=f[v])_.push(f);return _},d=(f,v)=>t.getParent(f,y=>y.parentNode===v,v),u=(f,v,y)=>{const _=y?"nextSibling":"previousSibling";for(let k=f,E=k.parentNode;k&&k!==v;k=E){E=k.parentNode;const x=c(k===f?k:k[_],_);x.length&&(y||x.reverse(),n(l(x)))}};if(s===a)return n(l([s]));const g=null!==(o=t.findCommonAncestor(s,a))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,a))return u(s,g,!0);if(t.isChildOf(a,s))return u(a,g);const p=d(s,g)||s,m=d(a,g)||a;u(s,p,!0);const b=c(p===s?p:p.nextSibling,"nextSibling",m===a?m.nextSibling:m);b.length&&n(l(b)),u(a,m)},eE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],sb=(t,e,n,o,r,s)=>{const{uid:i=e,...a}=n;Br(t,$i()),re(t,`${Ls()}`,i),re(t,`${Wr()}`,o);const{attributes:l={},classes:c=[]}=r(i,a);if(to(t,l),d=t,W(c,g=>{Br(d,g)}),s){c.length>0&&re(t,`${Vi()}`,c.join(","));const d=we(l);d.length>0&&re(t,`${Wi()}`,d.join(","))}var d},ib=(t,e,n,o,r)=>{const s=V("span",t);return sb(s,e,n,o,r,!1),s},ab=t=>{const e=(()=>{const s={};return{register:(i,a)=>{s[i]={name:i,settings:a}},lookup:i=>Mt(s,i).map(a=>a.settings),getNames:()=>we(s)}})();((s,i)=>{const a=Wr(),l=d=>C.from(d.attr(a)).bind(i.lookup),c=d=>{var u,g;d.attr(Ls(),null),d.attr(Wr(),null),d.attr(qi(),null);const p=C.from(d.attr(Wi())).map(v=>v.split(",")).getOr([]),m=C.from(d.attr(Vi())).map(v=>v.split(",")).getOr([]);W(p,v=>d.attr(v,null));const b=null!==(g=null===(u=d.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==g?g:[],f=Ho(b,[$i()].concat(m));d.attr("class",f.length>0?f.join(" "):null),d.attr(Vi(),null),d.attr(Wi(),null)};s.serializer.addTempAttr(qi()),s.serializer.addAttributeFilter(a,d=>{for(const u of d)l(u).each(g=>{!1===g.persistent&&("span"===u.name?u.unwrap():c(u))})})})(t,e);const n=((s,i)=>{const a=ue({}),l=()=>({listeners:[],previous:sr()}),c=(p,m)=>{d(p,b=>(m(b),b))},d=(p,m)=>{const b=a.get(),f=m(Mt(b,p).getOrThunk(l));b[p]=f,a.set(b)},u=(p,m)=>{W(ph(s,p),b=>{m?re(b,qi(),"true"):se(b,qi())})},g=zd(()=>{const p=Co(i.getNames());W(p,m=>{d(m,b=>{const f=b.previous.get();return gh(s,C.some(m)).fold(()=>{f.each(v=>{var y;c(y=m,_=>{W(_.listeners,k=>k(!1,y))}),b.previous.clear(),u(v,!1)})},({uid:v,name:y,elements:_})=>{var k,E,x;Xo(f,v)||(f.each(k=>u(k,!1)),E=v,x=_,c(k=y,A=>{W(A.listeners,N=>N(!0,k,{uid:E,nodes:Et(x,R=>R.dom)}))}),b.previous.set(v),u(v,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return s.on("remove",()=>{g.cancel()}),s.on("NodeChange",()=>{g.throttle()}),{addListener:(p,m)=>{d(p,b=>({previous:b.previous,listeners:b.listeners.concat([m])}))}}})(t,e),o=Ao("span"),r=s=>{W(s,i=>{o(i)?Jo(i):(a=>{eo(a,$i()),se(a,`${Ls()}`),se(a,`${Wr()}`),se(a,`${qi()}`);const l=en(a,`${Wi()}`).map(u=>u.split(",")).getOr([]),c=en(a,`${Vi()}`).map(u=>u.split(",")).getOr([]);var d;W(l,u=>se(a,u)),d=a,W(c,u=>{eo(d,u)}),se(a,`${Vi()}`),se(a,`${Wi()}`)})(i)})};return{register:(s,i)=>{e.register(s,i)},annotate:(s,i)=>{e.lookup(s).each(a=>{var l,c,d,u;c=s,d=a,u=i,(l=t).undoManager.transact(()=>{const g=l.selection,p=g.getRng(),m=Hs(l).length>0,b=yh("mce-annotation");if(p.collapsed&&!m&&((f,v)=>{const y=ts(f.dom,v,[{inline:"span"}]);v.setStart(y.startContainer,y.startOffset),v.setEnd(y.endContainer,y.endOffset),f.selection.setRng(v)})(l,p),g.getRng().collapsed&&!m){const f=ib(l.getDoc(),b,u,c,d.decorate);cl(f,be),g.getRng().insertNode(f.dom),g.select(f.dom)}else Vp(g,!1,()=>{hu(l,f=>{((t,e,n,o,r,s)=>{const i=[],a=ib(t.getDoc(),n,s,o,r),l=sr(),c=()=>{l.clear()},d=g=>{W(g,u)},u=g=>{switch(p=t,m=g,b="span",f=Ft(g),Re(m).fold(()=>"skipping",v=>{return"br"===f||Pe(y=m)&&_d(y)===xe?"valid":(y=>pe(y)&&B(y,$i()))(m)?"existing":$n(m.dom)?"caret":Ht(eE,y=>Wt(m,y))?"valid-block":$s(p,b,f)&&$s(p,Ft(v),b)?"valid":"invalid-child";var y})){case"invalid-child":{c();const p=ye(g);d(p),c();break}case"valid-block":c(),sb(g,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const m=Ps(a);return i.push(m),l.set(m),m});((m,b)=>{fn(m,b),de(b,m)})(g,p);break}}var p,m,b,f};ia(t.dom,e,g=>{c(),(p=>{const m=Et(p,S);d(m)})(g)})})(l,f,b,c,d.decorate,u)})})})})},annotationChanged:(s,i)=>{n.addListener(s,i)},remove:s=>{const i=t.selection.getBookmark();gh(t,C.some(s)).each(({elements:a})=>{r(a)}),t.selection.moveToBookmark(i)},removeAll:s=>{const i=t.selection.getBookmark();Dt(bh(t,s),(a,l)=>{r(a)}),t.selection.moveToBookmark(i)},getAll:s=>{const i=bh(t,s);return $o(i,a=>Et(a,l=>l.dom))}}},aa=t=>({getBookmark:rt(Wx,t),moveToBookmark:rt(Kx,t)});aa.isBookmarkNode=bn;const lb=(t,e,n)=>!n.collapsed&&Ht(n.getClientRects(),o=>{return i=e,(s=t)>=(r=o).left&&s<=r.right&&i>=r.top&&i<=r.bottom;var r,s,i}),cb=(t,e,n)=>{t.dispatch(e,n)},db=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},ub=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},mb=(t,e)=>t.dispatch("SetContent",e),fb=(t,e)=>t.dispatch("GetContent",e),gb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),ct={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||ct.metaKeyPressed(t),metaKeyPressed:t=>At.os.isMacOS()||At.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},la="data-mce-selected",hb=Math.abs,Vl=Math.round,ku={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},pb=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let i,a,l,c,d,u,g,p,m,b,f,v,y,_,k;const E=at=>et(at)&&(Og(at)||n.is(at,"figure.image")),x=at=>oo(at)||n.hasClass(at,"mce-preview-object"),A=at=>{const yt=at.target;((bt,T)=>{if("longpress"===(O=bt).type||0===O.type.indexOf("touch")){const O=bt.touches[0];return E(bt.target)&&!lb(O.clientX,O.clientY,T)}var O;return E(bt.target)&&!lb(bt.clientX,bt.clientY,T)})(at,e.selection.getRng())&&!at.isDefaultPrevented()&&e.selection.select(yt)},N=at=>n.hasClass(at,"mce-preview-object")&&et(at.firstElementChild)?[at,at.firstElementChild]:n.is(at,"figure.image")?[at.querySelector("img")]:[at],R=at=>{const yt=ap(e);return!!yt&&"false"!==at.getAttribute("data-mce-resize")&&at!==e.getBody()&&(n.hasClass(at,"mce-preview-object")&&et(at.firstElementChild)?Wt(S(at.firstElementChild),yt):Wt(S(at),yt))},L=(at,yt,bt)=>{if(et(bt)){const T=N(at);W(T,O=>{O.style[yt]||!e.schema.isValid(O.nodeName.toLowerCase(),yt)?n.setStyle(O,yt,bt):n.setAttrib(O,yt,""+bt)})}},P=(at,yt,bt)=>{L(at,"width",yt),L(at,"height",bt)},F=at=>{let yt,bt,T,O,U;yt=at.screenX-u,bt=at.screenY-g,v=yt*c[2]+p,y=bt*c[3]+m,v=v<5?5:v,y=y<5?5:y,T=(E(i)||x(i))&&!1!==$k(e)?!ct.modifierPressed(at):ct.modifierPressed(at),T&&(hb(yt)>hb(bt)?(y=Vl(v*b),v=Vl(y/b)):(v=Vl(y/b),y=Vl(v*b))),P(a,v,y),O=c.startPos.x+yt,U=c.startPos.y+bt,O=O>0?O:0,U=U>0?U:0,n.setStyles(l,{left:O,top:U,display:"block"}),l.innerHTML=v+" &times; "+y,c[2]<0&&a.clientWidth<=v&&n.setStyle(a,"left",void 0+(p-v)),c[3]<0&&a.clientHeight<=y&&n.setStyle(a,"top",void 0+(m-y)),yt=s.scrollWidth-_,bt=s.scrollHeight-k,yt+bt!==0&&n.setStyles(l,{left:O-yt,top:U-bt}),f||(e.dispatch("ObjectResizeStart",{target:i,width:p,height:m,origin:"corner-"+c.name}),f=!0)},M=()=>{const at=f;f=!1,at&&(L(i,"width",v),L(i,"height",y)),n.unbind(o,"mousemove",F),n.unbind(o,"mouseup",M),r!==o&&(n.unbind(r,"mousemove",F),n.unbind(r,"mouseup",M)),n.remove(a),n.remove(l),n.remove(d),z(i),at&&(e.dispatch("ObjectResized",{target:i,width:v,height:y,origin:"corner-"+c.name}),n.setAttrib(i,"style",n.getAttrib(i,"style"))),e.nodeChanged()},z=at=>{St();const yt=n.getPos(at,s),bt=yt.x,T=yt.y,O=at.getBoundingClientRect(),U=O.width||O.right-O.left,$=O.height||O.bottom-O.top;i!==at&&(Q(),i=at,v=y=0);const H=e.dispatch("ObjectSelected",{target:at});R(at)&&!H.isDefaultPrevented()?Dt(ku,(q,X)=>{let nt=n.get("mceResizeHandle"+X);nt&&n.remove(nt),nt=n.add(s,"div",{id:"mceResizeHandle"+X,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+X+"-resize; margin:0; padding:0"}),n.bind(nt,"mousedown",lt=>{lt.stopImmediatePropagation(),lt.preventDefault(),(pt=>{const vt=N(i)[0];var tt;u=pt.screenX,g=pt.screenY,p=vt.clientWidth,m=vt.clientHeight,b=m/p,c=q,c.name=X,c.startPos={x:U*q[0]+bt,y:$*q[1]+T},_=s.scrollWidth,k=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=x(tt=i)?n.create("img",{src:At.transparentSrc}):tt.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:bt,top:T,margin:0}),P(a,U,$),a.removeAttribute(la),s.appendChild(a),n.bind(o,"mousemove",F),n.bind(o,"mouseup",M),r!==o&&(n.bind(r,"mousemove",F),n.bind(r,"mouseup",M)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+m)})(lt)}),q.elm=nt,n.setStyles(nt,{left:U*q[0]+bt-nt.offsetWidth/2,top:$*q[1]+T-nt.offsetHeight/2})}):Q(!1)},G=El(z,0),Q=(at=!0)=>{G.cancel(),St(),i&&at&&i.removeAttribute(la),Dt(ku,(yt,bt)=>{const T=n.get("mceResizeHandle"+bt);T&&(n.unbind(T),n.remove(T))})},dt=(at,yt)=>n.isChildOf(at,yt),mt=at=>{if(f||e.removed||e.composing)return;const yt="mousedown"===at.type?at.target:t.getNode(),bt=Fr(S(yt),"table,img,figure.image,hr,video,span.mce-preview-object").map(O=>O.dom).getOrUndefined(),T=et(bt)?n.getAttrib(bt,la,"1"):"1";if(W(n.select("img[data-mce-selected],hr[data-mce-selected]"),O=>{O.removeAttribute(la)}),et(bt)&&dt(bt,s)){Lt();const O=t.getStart(!0);if(dt(O,bt)&&dt(t.getEnd(!0),bt))return n.setAttrib(bt,la,T),void G.throttle(bt)}Q()},St=()=>{Dt(ku,at=>{at.elm&&(n.unbind(at.elm),delete at.elm)})},Lt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{Lt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",mt),e.on("keyup compositionend",at=>{i&&"TABLE"===i.nodeName&&mt(at)}),e.on("hide blur",Q),e.on("contextmenu longpress",A,!0)}),e.on("remove",St),{isResizable:R,showResizeRect:z,hideResizeRect:Q,updateResizeRect:mt,destroy:()=>{G.cancel(),i=a=d=null}}},bb=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,i)=>{r.setStart(s.dom,i)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(a=>{s.setEndBefore(a.dom)},(a,l)=>{s.setEnd(a.dom,l)},a=>{s.setEndAfter(a.dom)}),o},xu=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},ca=ro([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vb=(t,e,n)=>e(S(n.startContainer),n.startOffset,S(n.endContainer),n.endOffset),yb=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),oE=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return C.none();const i=t.dom.createRange();return i.setStart(s.offsetNode,s.offset),i.collapse(),C.some(i)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,Eu=ro([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Do={before:Eu.before,on:Eu.on,after:Eu.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(Ce,Ce,Ce)},Wl=ro([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Vs={domRange:Wl.domRange,relative:Wl.relative,exact:Wl.exact,exactFromRange:t=>Wl.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>S(o.startContainer),relative:(o,r)=>Do.getStart(o),exact:(o,r,s,i)=>o});return Ae(e)},range:yb},Kl=(t,e)=>{const n=Ft(t);return"input"===n?Do.after(t):Bt(["br","img"],n)?0===e?Do.before(t):Do.after(t):Do.on(t,e)},rE=(t,e)=>{const n=t.fold(Do.before,Kl,Do.after),o=e.fold(Do.before,Kl,Do.after);return Vs.relative(n,o)},_b=(t,e,n,o)=>{const r=Kl(t,e),s=Kl(n,o);return Vs.relative(r,s)},Su=(t,e)=>{const n=(e||document).createDocumentFragment();return W(t,o=>{n.appendChild(o.dom)}),S(n)},Cb=(t,e,n)=>{return(o=Ae(S(n)).dom,r=t,s=e,((i,a,l)=>{const c=S(i.document);return oE(c,a,l).map(d=>yb(S(d.startContainer),d.startOffset,S(d.endContainer),d.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},Nu=(t,e)=>et(t)&&et(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,wb=(t,e,n)=>null!==((o,r,s)=>{let i=o;for(;i&&i!==r;){if(s(i))return i;i=i.parentNode}return null})(t,e,n),iE=(t,e,n)=>wb(t,e,o=>o.nodeName===n),aE=(t,e)=>gn(t)&&!wb(t,e,$n),kb=(t,e,n)=>{const o=e.parentNode;if(o){const r=new ie(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Zt(s))return!0}return!1},Au=(t,e,n,o,r)=>{const s=t.getRoot(),i=t.schema.getNonEmptyElements(),a=r.parentNode;let l,c;if(!a)return C.none();const d=t.getParent(a,t.isBlock)||s;if(o&&Zt(r)&&e&&t.isEmpty(d))return C.some(j(a,t.nodeIndex(r)));const u=new ie(r,d);for(;c=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||aE(c,s))return C.none();if(K(c)&&c.data.length>0)return iE(c,s,"A")?C.none():C.some(j(c,o?c.data.length:0));if(t.isBlock(c)||i[c.nodeName.toLowerCase()])return C.none();l=c}return tr(l)?C.none():n&&l?C.some(j(l,0)):C.none()},xb=(t,e,n,o)=>{const r=t.getRoot();let s,i=!1,a=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=ot(a)&&l===a.childNodes.length,d=t.schema.getNonEmptyElements();let u=n;if(gn(a))return C.none();if(ot(a)&&l>a.childNodes.length-1&&(u=!1),Li(a)&&(a=r,l=0),a===r){if(u&&(s=a.childNodes[l>0?l-1:0],s)&&(gn(s)||d[s.nodeName]||Ro(s)))return C.none();if(a.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=K(a)&&c?a.data.length:0,!e&&a===r.lastChild&&Ro(a)||((g,p)=>{let m=p;for(;m&&m!==g;){if(Ut(m))return!0;m=m.parentNode}return!1})(r,a)||gn(a))return C.none();if(a.hasChildNodes()&&!Ro(a)){s=a;const g=new ie(a,r);do{if(Ut(s)||gn(s)){i=!1;break}if(K(s)&&s.data.length>0){l=u?0:s.data.length,a=s,i=!0;break}if(d[s.nodeName.toLowerCase()]&&!Dg(s)){l=t.nodeIndex(s),a=s.parentNode,u||l++,i=!0;break}}while(s=u?g.next():g.prev())}}}return e&&(K(a)&&0===l&&Au(t,c,e,!0,a).each(g=>{a=g.container(),l=g.offset(),i=!0}),ot(a)&&(s=a.childNodes[l],s||(s=a.childNodes[l-1]),!s||!Zt(s)||"A"===(null===(m=s.previousSibling)||void 0===m?void 0:m.nodeName)||kb(t,s,!1)||kb(t,s,!0)||Au(t,c,e,!0,s).each(g=>{a=g.container(),l=g.offset(),i=!0}))),u&&!e&&K(a)&&l===a.data.length&&Au(t,c,e,!1,a).each(g=>{a=g.container(),l=g.offset(),i=!0}),i&&a?C.some(j(a,l)):C.none();var m},Yl=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=j.fromRangeStart(e);return xb(t,n,!0,o).each(s=>{n&&j.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||xb(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),Nu(e,o)?C.none():C.some(o)},Xl=(t,e)=>t.splitText(e),Gl=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&K(e)){if(n>0&&n<e.data.length)if(o=Xl(e,n),e=o.previousSibling,r>n){r-=n;const s=Xl(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(K(e)&&n>0&&n<e.data.length&&(e=Xl(e,n),n=0),K(o)&&r>0&&r<o.data.length){const s=Xl(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},es=t=>({walk:(e,n)=>ia(t,e,n),split:Gl,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=ts(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>Yl(t,e).fold(jt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});es.compareRanges=Nu,es.getCaretRangeFromPoint=Cb,es.getSelectedNode=Sl,es.getNode=ir;const lE=((t,e)=>{const n=r=>{const s=(i=>{const a=i.dom;return As(i)?a.getBoundingClientRect().height:a.offsetHeight})(r);if(s<=0||null===s){const i=no(r,t);return parseFloat(i)||0}return s},o=(r,s)=>he(s,(i,a)=>{const l=no(r,a),c=void 0===l?0:parseInt(l,10);return isNaN(c)?i:i+c},0);return{set:(r,s)=>{if(!ln(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const i=r.dom;h(i)&&(i.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,i)=>{const a=o(r,i);return s>a?s-a:0}}})("height"),Eb=()=>S(document),Sb=(t,e)=>t.view(e).fold(J([]),n=>{const o=t.owner(n),r=Sb(t,o);return[n].concat(r)});var cE=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(S)},owner:t=>Ne(t)});const Ru=t=>"textarea"===Ft(t),Nb=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,i=s.body,a=s.defaultView,l=s.documentElement;if(i===r.dom)return Rs(i.offsetLeft,i.offsetTop);const c=dl(a?.pageYOffset,l.scrollTop),d=dl(a?.pageXOffset,l.scrollLeft),u=dl(l.clientTop,i.clientTop),g=dl(l.clientLeft,i.clientLeft);return hd(r).translate(d-g,c-u)})(t),o=lE.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},Ab=(t,e,n,o)=>{uE(t,(r,s)=>dE(t,e,n,o),n)},Rb=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,pd(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},dE=(t,e,n,o)=>{S(t.getBody());const s=S(t.getDoc()),i=((a,l)=>{const c=((u,g)=>{const p=ye(u);if(0===p.length||Ru(u))return{element:u,offset:g};if(g<p.length&&!Ru(p[g]))return{element:p[g],offset:0};{const m=p[p.length-1];return Ru(m)?{element:u,offset:g}:"img"===Ft(m)?{element:m,offset:1}:Pe(m)?{element:m,offset:_d(m).length}:{element:m,offset:ye(m).length}}})(a,l),d=D('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return fn(c.element,d),Nb(d,()=>qt(d))})(S(n.startContainer),n.startOffset);Rb(t,s,e,i,o),i.cleanup()},Tb=(t,e,n,o)=>{const r=S(t.getDoc());Rb(t,r,n,Nb(S(e),xt),o)},uE=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,i=n.endOffset;e(S(o),S(s));const a=t.dom.createRng();a.setStart(o,r),a.setEnd(s,i),t.selection.setRng(n)},Tu=(t,e,n,o)=>{const r=t.pos;wg(r.left,n?r.top:r.top-e+t.height,o)},Ob=(t,e,n,o,r)=>{const s=n+e,i=o.pos.top,a=o.bottom,l=a-i>=n;i<e?Tu(o,n,!1!==r,t):i>s?Tu(o,n,l?!1!==r:!0===r,t):a>s&&!l&&Tu(o,n,!0===r,t)},Db=(t,e,n,o)=>{const r=Ae(t).dom.innerHeight;Ob(t,e,r,n,o)},Bb=(t,e,n,o)=>{const r=Ae(t).dom.innerHeight;Ob(t,e,r,n,o);const s=(a=>{const l=Eb(),c=pd(l),d=((p,m)=>{const b=m.owner(p);return Sb(m,b)})(a,cE),u=hd(a),g=_r(d,(p,m)=>{const b=hd(m);return{left:p.left+b.left,top:p.top+b.top}},{left:0,top:0});return Rs(g.left+u.left+c.left,g.top+u.top+c.top)})(n.element),i=Eg(window);s.top<i.y?kg(n.element,!1!==o):s.top>i.bottom&&kg(n.element,!0===o)},mE=(t,e,n)=>Ab(t,Db,e,n),fE=(t,e,n)=>Tb(t,e,Db,n),gE=(t,e,n)=>Ab(t,Bb,e,n),hE=(t,e,n)=>Tb(t,e,Bb,n),da=(t,e,n)=>{(t.inline?mE:gE)(t,e,n)},Lb=t=>t.dom.focus(),Pb=t=>{const e=Go(t).dom;return t.dom===e.activeElement},Ou=(t=Eb())=>C.from(t.dom.activeElement).map(S),Ib=(t,e)=>{const n=Pe(e)?_d(e).length:ye(e).length+1;return t>n?n:t<0?0:t},pE=t=>Vs.range(t.start,Ib(t.soffset,t.start),t.finish,Ib(t.foffset,t.finish)),Mb=(t,e)=>!ul(e.dom)&&(ke(t,e)||kt(t,e)),Fb=t=>e=>Mb(t,e.start)&&Mb(t,e.finish),bE=t=>Vs.range(S(t.startContainer),t.startOffset,S(t.endContainer),t.endOffset),vE=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},Du=t=>{const e=t.inline||At.browser.isFirefox()?(n=S(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(bE)})(Ae(n).dom).filter(Fb(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Bu=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=S(t.getBody()),C.from(e).filter(Fb(n)).map(pE);var n}).bind(vE),jb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},yn={setEditorTimeout:(t,e,n)=>{return ln(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(ln(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let Ws;const Lu=Pt.DOM,Ql=(t,e)=>{const n=Jk(t);return null!==Lu.getParent(e,r=>{return ot(s=r)&&jb.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},yE=(t,e)=>{const n=e.editor;(o=>{const r=El(()=>{Du(o)},0);o.on("init",()=>{var s,l;o.inline&&((s,i)=>{const a=()=>{i.throttle()};Pt.DOM.bind(document,"mouseup",a),s.on("remove",()=>{Pt.DOM.unbind(document,"mouseup",a)})})(o,r),l=r,(s=o).on("mouseup touchend",c=>{l.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",a=>{(l=>"nodechange"===l.type&&l.selectionChange)(a)||Du(s)})}),o.on("remove",()=>{r.cancel()})})(n),n.on("focusin",()=>{const o=t.focusedEditor;o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{yn.setEditorTimeout(n,()=>{const o=t.focusedEditor;Ql(n,(r=>{try{const s=Go(S(r.getElement()));return Ou(s).fold(()=>document.body,i=>i.dom)}catch{return document.body}})(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Ws||(Ws=o=>{const r=t.activeEditor;r&&mg(o).each(s=>{s.ownerDocument===document&&(s===document.body||Ql(r,s)||t.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Lu.bind(document,"focusin",Ws))},_E=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Ws&&(Lu.unbind(document,"focusin",Ws),Ws=null)},Ub=(t,e)=>{var n,o,r;(n=S(t.getBody()),o=e,(r=o,r.collapsed?C.from(ir(r.startContainer,r.startOffset)).map(S):C.none()).bind(r=>Bw(r)?C.some(r):ke(n,r)?C.none():C.some(n))).bind(n=>Fe(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Pu=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},ns=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=S(n),Pb(o)||(r=o,Ou(Go(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):et((e=t).iframeElement)&&Pb(S(e.iframeElement));var e},Iu=t=>t.editorManager.setActive(t),zb=(t,e,n,o,r)=>{const i=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(S).map(a=>o&&e.collapsed?a:il(a,r(a,i)).getOr(a)).bind(a=>pe(a)?C.some(a):Re(a).filter(pe)).map(a=>a.dom).getOr(t)},Hb=(t,e,n=!1)=>zb(t,e,!0,n,(o,r)=>Math.min(dg(o),r)),$b=(t,e,n=!1)=>zb(t,e,!1,n,(o,r)=>r>0?r-1:r),qb=(t,e)=>{const n=t;for(;t&&K(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Mu=(t,e)=>Et(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),CE=["img","br"],Vb=t=>Pg(t).filter(n=>0!==n.trim().length||n.indexOf(be)>-1).isSome()||Bt(CE,Ft(t)),Wb="[data-mce-autocompleter]",Kb=t=>Bi(t,Wb),kE={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Jl=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let i=t.parent;i&&i!==e;i=i.parent)if(s=i[r],s)return s}},xE=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!$r(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Yb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class je{constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}static create(e,n){const o=new je(e,kE[e]||1);return n&&Dt(n,(r,s)=>{o.attr(s,r)}),o}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!ft(e))return et(e)&&Dt(e,(s,i)=>{o.attr(i,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new je(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,i=o.length;s<i;s++){const a=o[s];"id"!==a.name&&(r[r.length]={name:a.name,value:a.value},r.map[a.name]=a.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Jl(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Jl(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let i=s.firstChild;if(Yb(s))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(e[i.name]||Yb(i))return!1}if(8===i.type||3===i.type&&!xE(i)||3===i.type&&i.parent&&n[i.parent.name]&&$r(null!==(r=i.value)&&void 0!==r?r:"")||o&&o(i))return!1}while(i=Jl(i,s));return!0}walk(e){return Jl(this,null,e)}}const Xb=(t,e,n=0)=>{const o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(n))){const r=o.indexOf("[endif]",n);return o.indexOf(">",r)}if(e){const r=o.indexOf(">",n);return-1!==r?r:o.length}{const r=/--!?>/g;r.lastIndex=n;const s=r.exec(t);return s?s.index+s[0].length:o.length}},EE=(t,e,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let i=1,a=n;for(;0!==i;)for(o.lastIndex=a;;){const l=o.exec(e);if(null===l)return a;if("!"===l[1]){a=oe(l[2],"--")?Xb(e,!1,l.index+3):Xb(e,!0,l.index+1);break}{r.lastIndex=o.lastIndex;const c=r.exec(e);if(In(c)||c.index!==o.lastIndex)continue;"/"===l[1]?i-=1:Ct(s,l[2])||(i+=1),a=o.lastIndex+c[0].length;break}}return a},Gb=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema;let r=((a,l)=>{const c=new RegExp(["\\s?("+a.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(c,"")})(t.getTempAttrs(),e);const s=o.getVoidElements();let i;for(;i=n.exec(r);){const a=n.lastIndex,l=i[0].length;let c;c=s[i[1]]?a:EE(o,r,a),r=r.substring(0,a-l)+r.substring(c),n.lastIndex=a-l}return To(r)},SE=Gb,Qb=t=>{const e=Te(t,"[data-mce-bogus]");W(e,n=>{"all"===Ve(n,"data-mce-bogus")?qt(n):zr(n)?(fn(n,it("\ufeff")),qt(n)):Jo(n)})},Jb=t=>{const e=Te(t,"input");W(e,n=>{se(n,"name")})},Zb=Y.makeMap,tv=t=>{const e=[],n=(t=t||{}).indent,o=Zb(t.indent_before||""),r=Zb(t.indent_after||""),s=or.getEncodeFunc(t.entity_encoding||"raw",t.entities),i="xhtml"!==t.element_format;return{start:(a,l,c)=>{if(n&&o[a]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}if(e.push("<",a),l)for(let d=0,u=l.length;d<u;d++){const g=l[d];e.push(" ",g.name,'="',s(g.value,!0),'"')}if(e[e.length]=!c||i?">":" />",c&&n&&r[a]&&e.length>0){const d=e[e.length-1];d.length>0&&"\n"!==d&&e.push("\n")}},end:a=>{let l;e.push("</",a,">"),n&&r[a]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(a,l)=>{a.length>0&&(e[e.length]=l?a:s(a))},cdata:a=>{e.push("<![CDATA[",a,"]]>")},comment:a=>{e.push("\x3c!--",a,"--\x3e")},pi:(a,l)=>{l?e.push("<?",a," ",s(l),"?>"):e.push("<?",a,"?>"),n&&e.push("\n")},doctype:a=>{e.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},dr=(t={},e=rr())=>{const n=tv(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:a=>{var l;n.text(null!==(l=a.value)&&void 0!==l?l:"",a.raw)},8:a=>{var l;n.comment(null!==(l=a.value)&&void 0!==l?l:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var l;n.doctype(null!==(l=a.value)&&void 0!==l?l:"")},4:a=>{var l;n.cdata(null!==(l=a.value)&&void 0!==l?l:"")},11:a=>{let l=a;if(l=l.firstChild)do{i(l)}while(l=l.next)}};n.reset();const i=a=>{var l;const c=s[a.type];if(c)c(a);else{const d=a.name,u=d in e.getVoidElements();let g=a.attributes;if(r&&g&&g.length>1){const p=[];p.map={};const m=e.getElementRule(a.name);if(m){for(let b=0,f=m.attributesOrder.length;b<f;b++){const v=m.attributesOrder[b];if(v in g.map){const y=g.map[v];p.map[v]=y,p.push({name:v,value:y})}}for(let b=0,f=g.length;b<f;b++){const v=g[b].name;if(!(v in p.map)){const y=g.map[v];p.map[v]=y,p.push({name:v,value:y})}}g=p}}if(n.start(d,g,u),!u){let p=a.firstChild;if(p){"pre"!==d&&"textarea"!==d||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{i(p)}while(p=p.next)}n.end(d)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):i(o),n.getContent()}}},ev=new Set;W(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{ev.add(t)});const nv=["font","text-decoration","text-emphasis"],Fu=(t,e)=>we(t.parseStyle(t.getAttrib(e,"style"))),AE=(t,e,n)=>{const o=Fu(t,e),r=Fu(t,n),s=i=>{var a,l;const c=null!==(a=t.getStyle(e,i))&&void 0!==a?a:"",d=null!==(l=t.getStyle(n,i))&&void 0!==l?l:"";return dn(c)&&dn(d)&&c!==d};return Ht(o,i=>{const a=l=>Ht(l,c=>c===i);if(!a(r)&&a(nv)){const l=gt(r,c=>Ht(nv,d=>oe(c,d)));return Ht(l,s)}return s(i)})},ov=(t,e,n)=>C.from(n.container()).filter(K).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),ju=rt(ov,!0,zs),Uu=rt(ov,!1,zs),RE=t=>{const e=t.container();return K(e)&&(0===e.data.length||hl(e.data)&&aa.isBookmarkNode(e.parentNode))},ur=(t,e)=>n=>nu(t?0:-1,n).filter(e).isSome(),rv=t=>Og(t)&&"block"===no(S(t),"display"),sv=t=>{return Ut(t)&&!(ot(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},TE=ur(!0,rv),OE=ur(!1,rv),ua=ur(!0,oo),ma=ur(!1,oo),iv=ur(!0,Ro),av=ur(!1,Ro),mr=ur(!0,sv),fr=ur(!1,sv),lv=(t,e)=>{return r=jt,ke(o=e,n=t)?sl(n,s=>r(s)||kt(s,o)).slice(0,-1):[];var n,o,r},Bo=(t,e)=>[t].concat(lv(t,e)),zu=(t,e,n)=>Lp(t,e,n,RE),cv=(t,e)=>ne(Bo(S(e.container()),t),Un),dv=(t,e,n)=>zu(t,e.dom,n).forall(o=>cv(e,n).fold(()=>!so(o,n,e.dom),r=>!so(o,n,e.dom)&&ke(r,S(o.container())))),uv=(t,e,n)=>cv(e,n).fold(()=>zu(t,e.dom,n).forall(o=>!so(o,n,e.dom)),o=>zu(t,o.dom,n).isNone()),Hu=rt(uv,!1),mv=rt(uv,!0),DE=rt(dv,!1),BE=rt(dv,!0),LE=t=>Bl(t).exists(zr),Zl=(t,e,n)=>{const o=gt(Bo(S(n.container()),e),Un),r=Se(o).getOr(e);return hn(t,r.dom,n).filter(LE)},$u=(t,e)=>Bl(e).exists(zr)||Zl(!0,t,e).isSome(),qu=(t,e)=>{return(n=e,C.from(n.getNode(!0)).map(S)).exists(zr)||Zl(!1,t,e).isSome();var n},PE=rt(Zl,!1),IE=rt(Zl,!0),fv=t=>j.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),gv=(t,e)=>{const n=gt(Bo(S(e.container()),t),Un);return Se(n).getOr(t)},hv=(t,e)=>fv(e)?Uu(e):Uu(e)||pn(gv(t,e).dom,e).exists(Uu),pv=(t,e)=>fv(e)?ju(e):ju(e)||Ke(gv(t,e).dom,e).exists(ju),Vu=t=>Bl(t).bind(e=>Mr(e,pe)).exists(e=>{return n=no(e,"white-space"),Bt(["pre","pre-wrap"],n);var n}),bv=(t,e)=>n=>{return o=new ie(n,t)[e](),et(o)&&Ut(o)&&Cp(o);var o},fa=(t,e)=>!Vu(e)&&(Hu(t,e)||DE(t,e)||qu(t,e)||hv(t,e)||((n,o)=>{const r=pn(n.dom,o).getOr(o),s=bv(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),ga=(t,e)=>!Vu(e)&&(mv(t,e)||BE(t,e)||$u(t,e)||pv(t,e)||((n,o)=>{const r=Ke(n.dom,o).getOr(o),s=bv(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),Wu=(t,e)=>fa(t,e)||ga(t,(n=>{const o=n.container(),r=n.offset();return K(o)&&r<o.data.length?j(o,r+1):n})(e)),vv=(t,e)=>Fl(t.charAt(e)),yv=(t,e)=>zs(t.charAt(e)),_v=(t,e,n)=>{const o=e.data,r=j(e,0);return n||!vv(o,0)||Wu(t,r)?!!(n&&yv(o,0)&&fa(t,r))&&(e.data=be+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},Cv=(t,e,n)=>{const o=e.data,r=j(e,o.length-1);return n||!vv(o,o.length-1)||Wu(t,r)?!!(n&&yv(o,o.length-1)&&ga(t,r))&&(e.data=o.slice(0,-1)+be,!0):(e.data=o.slice(0,-1)+" ",!0)},wv=(t,e,n)=>{if(0===n)return;const o=S(t),r=Zo(o,Un).getOr(o),s=t.data.slice(e,e+n),i=e+n>=t.data.length&&ga(r,j(t,t.data.length)),a=0===e&&fa(r,j(t,0));t.replaceData(e,n,$g(s,4,a,i))},tc=(t,e)=>{const n=t.data.slice(e),o=n.length-sd(n).length;wv(t,e,o)},Ku=(t,e)=>{const n=t.data.slice(0,e),o=n.length-yi(n).length;wv(t,e-o,o)},Yu=(t,e,n,o=!0)=>{const r=yi(t.data).length,s=o?t:e,i=o?e:t;return o?s.appendData(i.data):s.insertData(0,i.data),qt(S(i)),n&&tc(s,r),s},FE=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!j.isTextPosition(n)&&r===o.parentNode&&s>j.before(o).offset()})(e,t)?j(e.container(),e.offset()-1):e,kv=t=>{return On(t.previousSibling)?C.some(K(e=t.previousSibling)?j(e,e.data.length):j.after(e)):t.previousSibling?lo(t.previousSibling):C.none();var e},xv=t=>{return On(t.nextSibling)?C.some(K(e=t.nextSibling)?j(e,0):j.before(e)):t.nextSibling?Fe(t.nextSibling):C.none();var e},Ev=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},UE=(t,e)=>e&&Ct(t.schema.getBlockElements(),Ft(e)),zE=t=>{if(te(t)){const e=D('<br data-mce-bogus="1">');return Oi(t),de(t,e),C.some(j.before(e.dom))}return C.none()},os=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(i=r,xv(a=s).orThunk(()=>kv(a)).orThunk(()=>{return Ke(l=i,j.after(c=a)).orThunk(()=>pn(l,j.before(c)));var l,c})):((i,a)=>kv(a).orThunk(()=>xv(a)).orThunk(()=>{return l=i,C.from((c=a).previousSibling?c.previousSibling:c.parentNode).bind(d=>pn(l,j.before(d))).orThunk(()=>Ke(l,j.after(c)));var l,c}))(r,s)).map(rt(FE,n));var o,r,s,i,a})(e,t.getBody(),n.dom),s=Zo(n,rt(UE,t),(i=t.getBody(),l=>l.dom===i));var i;const a=((l,c,d)=>{const u=We(l).filter(Pe),g=Pr(l).filter(Pe);return qt(l),(p=u,m=g,b=c,f=(v,y,_)=>{const k=v.dom,E=y.dom,x=k.data.length;return Yu(k,E,d),_.container()===E?j(k,x):_},p.isSome()&&m.isSome()&&b.isSome()?C.some(f(p.getOrDie(),m.getOrDie(),b.getOrDie())):C.none()).orThunk(()=>(d&&(u.each(v=>Ku(v.dom,v.dom.length)),g.each(v=>tc(v.dom,0))),c));var p,m,b,f})(n,r,(c=n,Ct(t.schema.getTextInlineElements(),Ft(c))));var c;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(zE).fold(()=>{o&&Ev(t,e,a)},l=>{o&&Ev(t,e,C.some(l))})},HE=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,rs=(t,e)=>Wt(S(e),Hk(t))&&!ji(t.schema,e),gr=(t,e,n)=>{const o=(r=t,s=e,gt(Pt.DOM.getParents(n.container(),"*",s),r));var r,s;return C.from(o[o.length-1])},_n=(t,e)=>{const n=e.container(),o=e.offset();return t?nr(n)?K(n.nextSibling)?j(n.nextSibling,0):j.after(n):xd(e)?j(n,o+1):e:nr(n)?K(n.previousSibling)?j(n.previousSibling,n.previousSibling.data.length):j.before(n):Ed(e)?j(n,o-1):e},Sv=rt(_n,!0),Nv=rt(_n,!1),Av=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Rv=t=>Av(t,"Delete"),$E=t=>Ig(t)||Ii(t),ec=(t,e)=>{return ke(t,e)?Mr(e,$E,(n=t,o=>Xo(Re(o),n,kt))):C.none();var n},Xu=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Tv=t=>{var e;return(8===Nr(e=t)||"#comment"===Ft(e)?We(t):md(t)).bind(Tv).orThunk(()=>C.some(t))},Ov=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=Tv(n).getOr(n),i=S(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(i.dom===t.getBody()?Xu(t,o):te(i)&&(Hr(i),o&&t.selection.setCursorLocation(i.dom,0)),!kt(n,i)){const l=Xo(Re(i),n)?[]:Re(a=i).map(ye).map(c=>gt(c,d=>!kt(a,d))).getOr([]);W(l.concat(ye(n)),c=>{kt(c,i)||ke(c,i)||!te(c)||qt(c)})}var a},Gu=t=>Te(t,"td,th"),Qu=(t,e)=>({start:t,end:e}),ha=ro([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),nc=(t,e)=>Fr(S(t),"td,th",e),Dv=t=>!kt(t.start,t.end),Bv=(t,e)=>sa(t.start,e).bind(n=>sa(t.end,e).bind(o=>Sr(kt(n,o),n))),Ju=t=>e=>Bv(e,t).map(n=>({rng:e,table:n,cells:Gu(n)})),Lv=(t,e,n,o)=>{if(n.collapsed||!t.forall(Dv))return C.none();if(e.isSameTable){const r=t.bind(Ju(o));return C.some({start:r,end:r})}{const r=nc(n.startContainer,o),s=nc(n.endContainer,o),i=r.bind((l=o,c=>sa(c,l).bind(d=>ko(Gu(d)).map(u=>Qu(c,u))))).bind(Ju(o)),a=s.bind((l=>c=>sa(c,l).bind(d=>Se(Gu(d)).map(u=>Qu(u,c))))(o)).bind(Ju(o));return C.some({start:i,end:a})}var l},Pv=(t,e)=>Cr(t,n=>kt(n,e)),Zu=t=>Jt(Pv(t.cells,t.rng.start),Pv(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Iv=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},Mv=t=>W(t,e=>{se(e,"contenteditable"),Hr(e)}),tm=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),em(t,r,e,!1).each(s=>s())},Fv=t=>{const e=Hs(t),n=S(t.selection.getNode());fl(n.dom)&&te(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Ht(e,o=>kt(o,n))&&re(n,"data-mce-selected","1")},jv=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:i})=>{const a=C.from((c=t).dom.getParent(i?s.endContainer:s.startContainer,c.dom.isBlock)).map(S);var c;s.deleteContents(),((c,d,u)=>{u.each(g=>{d?qt(g):(Hr(g),c.selection.setCursorLocation(g.dom,0))})})(t,i,a.filter(te));const l=i?e[0]:e[e.length-1];return tm(t,l,o,i),te(l)?C.none():C.some(i?e.slice(1):e.slice(0,-1))}).getOr(e);Mv(r),Fv(t)}),VE=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],i=n[n.length-1];tm(t,s,r,!0),tm(t,i,r,!1);const a=te(s)?e:e.slice(1),l=te(i)?n:n.slice(0,-1);Mv(a.concat(l)),o.deleteContents(),Fv(t)}),em=(t,e,n,o=!0)=>C.some(()=>{Ov(t,e,n,o)}),WE=(t,e)=>C.some(()=>os(t,!1,e)),Uv=(t,e)=>ne(Bo(e,t),Mi),nm=(t,e)=>ne(Bo(e,t),Ao("caption")),oc=(t,e)=>C.some(()=>{Hr(e),t.selection.setCursorLocation(e.dom,0)}),zv=(t,e)=>t?iv(e):av(e),om=(t,e)=>{const n=S(t.selection.getStart(!0)),o=Hs(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=S(t.getBody());return nm(o,n).fold(()=>((r,s,i,a)=>{const l=j.fromRangeStart(r.selection.getRng());return Uv(i,a).bind(c=>{return te(c)?oc(r,c):(u=i,p=c,m=l,Il(s,r.getBody(),m).bind(b=>Uv(u,S(b.getNode())).bind(f=>kt(f,p)?C.none():C.some(xt))));var u,p,m})})(t,e,o,n).orThunk(()=>Sr(((r,s)=>{const i=j.fromRangeStart(r.selection.getRng());return zv(s,i)||hn(s,r.getBody(),i).exists(a=>zv(s,a))})(t,e),xt)),r=>((s,i,a,l)=>{const c=j.fromRangeStart(s.selection.getRng());return te(l)?oc(s,l):(u=a,p=l,m=c,Il(g=i,(d=s).getBody(),m).fold(()=>C.some(xt),b=>{return v=g,y=m,_=b,Fe((f=p).dom).bind(k=>lo(f.dom).map(E=>v?y.isEqual(k)&&_.isEqual(E):y.isEqual(E)&&_.isEqual(k))).getOr(!0)?((f,v)=>oc(f,v))(d,p):((f,v,y)=>nm(f,S(y.getNode())).fold(()=>C.some(xt),_=>Sr(!kt(_,v),xt)))(u,p,b);var f,v,y,_}));var d,u,g,p,m})(t,e,o,r))})(t,e,n):((r,s,i)=>{const a=S(r.getBody()),l=r.selection.getRng();return 0!==i.length?jv(r,i,C.none()):(c=r,u=l,nm(d=a,s).fold(()=>{return p=c,((t,e)=>{const n=(s=t,i=>kt(s,i)),o=((s,i)=>{const a=nc(s.startContainer,i),l=nc(s.endContainer,i);return Jt(a,l,Qu)})(e,n),r=((s,i)=>{const a=p=>sa(S(p),i),l=a(s.startContainer),c=a(s.endContainer),d=l.isSome(),u=c.isSome(),g=Jt(l,c,kt).getOr(!1);return{startTable:l,endTable:c,isStartInTable:d,isEndInTable:u,isSameTable:g,isMultiTable:!g&&d&&u}})(e,n);var s;return((s,i,a)=>s.exists(l=>{return d=a,!Dv(c=l)&&Bv(c,d).exists(u=>{const g=u.dom.rows;return 1===g.length&&1===g[0].cells.length})&&fu(l.start,i);var c,d}))(o,e,n)?o.map(s=>ha.singleCellTable(e,s.start)):r.isMultiTable?((s,i,a,l)=>Lv(s,i,a,l).bind(({start:c,end:d})=>{const u=c.bind(Zu).getOr([]),g=d.bind(Zu).getOr([]);if(u.length>0&&g.length>0){const p=Iv(a,i);return C.some(ha.multiTable(u,g,p))}return C.none()}))(o,r,e,n):((s,i,a,l)=>Lv(s,i,a,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=i,u=Zu(c).getOr([]);if(d&&c.cells.length===u.length)return C.some(ha.fullTable(c.table));if(u.length>0){if(d)return C.some(ha.partialTable(u,C.none()));{const g=Iv(a,i);return C.some(ha.partialTable(u,C.some({...i,rng:g})))}}return C.none()}))(o,r,e,n)})(d,u).bind(f=>f.fold(rt(em,p),rt(WE,p),rt(jv,p),rt(VE,p)));var p},p=>oc(c,p)));var c,d,u})(t,n,o)},ss=(t,e)=>{let n=e;for(;n&&n!==t;){if(jn(n)||Ut(n))return n;n=n.parentNode}return null},YE=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],XE=Y.each,rm=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>Ht(YE,s=>oe(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const i=l=>{const c={};return XE(e.getAttribs(l),d=>{const u=d.nodeName.toLowerCase();"style"===u||o(u)||(c[u]=e.getAttrib(l,u))}),c},a=(l,c)=>{for(const d in l)if(Ct(l,d)){const u=c[d];if(zt(u)||l[d]!==u)return!1;delete c[d]}for(const d in c)if(Ct(c,d))return!1;return!0};return!(ot(r)&&ot(s)&&(!a(i(r),i(s))||!a(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||bn(r)||bn(s))},isAttributeInternal:o}},Hv=(t,e,n,o)=>{const r=n.name;for(let s=0,i=t.length;s<i;s++){const a=t[s];if(a.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:a,nodes:[n]}}}if(n.attributes)for(let s=0,i=e.length;s<i;s++){const a=e[s],l=a.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},$v=(t,e)=>{const n=(o,r)=>{Dt(o,s=>{const i=Le(s.nodes);W(s.filter.callbacks,a=>{for(let l=i.length-1;l>=0;l--){const c=i[l];(r?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!It(c.parent)||i.splice(l,1)}i.length>0&&a(i,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},qv=(t,e,n,o={})=>{const r=((s,i,a)=>{const l={nodes:{},attributes:{}};return a.firstChild&&((c,d)=>{let u=c;for(;u=u.walk();)Hv(s,i,u,l)})(a),l})(t,e,n);$v(r,o)},sm=(t,e,n)=>{if(t.insert&&e(n)){const o=new je("br",1);o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new je("#text",3)).value=be},Vv=(t,e)=>{const n=t?.firstChild;return et(n)&&n===t.lastChild&&n.name===e},pa=(t,e,n,o)=>o.isEmpty(e,n,r=>!0===t.getElementRule(r.name)?.paddEmpty),im=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&im(r,e,n);t.unwrap()}},am=(t,e,n=xt)=>{const o=e.getTextBlockElements(),r=e.getNonEmptyElements(),s=e.getWhitespaceElements(),i=Y.makeMap("tr,td,th,tbody,thead,tfoot,table"),a=new Set;for(let l=0;l<t.length;l++){const c=t[l];let d,u,g;if(!c.parent||a.has(c))continue;if(o[c.name]&&"li"===c.parent.name){let m=c.next;for(;m&&o[m.name];)m.name="li",a.add(m),c.parent.insert(m,c.parent),m=m.next;c.unwrap();continue}const p=[c];for(d=c.parent;d&&!e.isValidChild(d.name,c.name)&&!i[d.name];d=d.parent)p.push(d);if(d&&p.length>1)if(e.isValidChild(d.name,c.name)){p.reverse(),u=p[0].clone(),n(u);let m=u;for(let b=0;b<p.length-1;b++){e.isValidChild(m.name,p[b].name)?(g=p[b].clone(),n(g),m.append(g)):g=m;for(let f=p[b].firstChild;f&&f!==p[b+1];){const v=f.next;g.append(f),f=v}m=g}pa(e,r,s,u)?d.insert(c,p[0],!0):(d.insert(u,p[0],!0),d.insert(c,u)),d=p[0],(pa(e,r,s,d)||Vv(d,"br"))&&d.empty().remove()}else im(c,e);else if(c.parent){if("li"===c.name){let m=c.prev;if(m&&("ul"===m.name||"ol"===m.name)){m.append(c);continue}if(m=c.next,m&&("ul"===m.name||"ol"===m.name)&&m.firstChild){m.insert(c,m.firstChild,!0);continue}const b=new je("ul",1);n(b),c.wrap(b);continue}if(e.isValidChild(c.parent.name,"div")&&e.isValidChild("div",c.name)){const m=new je("div",1);n(m),c.wrap(m)}else im(c,e)}}},Wv=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),lm=t=>t.collapsed?t:(e=>{const n=j.fromRangeStart(e),o=j.fromRangeEnd(e),r=e.commonAncestorContainer;return hn(!1,r,o).map(s=>!so(n,o,r)&&so(n,s,r)?((i,a,l,c)=>{const d=document.createRange();return d.setStart(i,a),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),cm=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},Kv=(t,e)=>{const n=j.after(t),o=ao(e).prev(n);return o?o.toRange():null},ZE=["pre"],dm=fl,tS=(t,e,n)=>{var o,r;const s=t.selection,i=t.dom,a=t.parser,l=n.merge,c=dr({validate:!0},t.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,d);let u=s.getRng();const g=u.startContainer,p=t.getBody();var _,k;g===p&&s.isCollapsed()&&i.isBlock(p.firstChild)&&(_=t,et(k=p.firstChild)&&!_.schema.getVoidElements()[k.nodeName])&&i.isEmpty(p.firstChild)&&(u=i.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(_=>{const k=_.dom,E=lm(_.selection.getRng());_.selection.setRng(E);const x=k.getParent(E.startContainer,dm);var A,N,R;A=k,N=E,et(R=x)&&R===A.getParent(N.endContainer,dm)&&fu(S(R),N)?em(_,E,S(x)):E.startContainer===E.endContainer&&E.endOffset-E.startOffset==1&&K(E.startContainer.childNodes[E.startOffset])?E.deleteContents():_.getDoc().execCommand("Delete",!1)})(t);const m=s.getNode(),b={context:m.nodeName.toLowerCase(),data:n.data,insert:!0},f=a.parse(e,b);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const i=r.getNonEmptyElements();return et(s)&&(s.isEmpty(i)||(l=s,r.getBlockElements()[l.name]&&et((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===be)(l.firstChild)));var l,c})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,f)&&((_,k)=>!!cm(_,k))(i,m))return u=((t,e,n,o)=>{const r=((u,g,p)=>{const m=g.serialize(p);return(b=>{var f,v;const y=b.firstChild,_=b.lastChild;return y&&"META"===y.nodeName&&(null===(f=y.parentNode)||void 0===f||f.removeChild(y)),_&&"mce_marker"===_.id&&(null===(v=_.parentNode)||void 0===v||v.removeChild(_)),b})(u.createFragment(m))})(e,t,o),s=cm(e,n.startContainer),i=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||et(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===be||Zt(o)))?t.slice(0,-1):t;var o,e,n})(gt(null!==(l=r.firstChild?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var l;const c=e.getRoot(),d=u=>{const g=j.fromRangeStart(n),p=ao(e.getRoot()),b=(1===u?p.prev(g):p.next(g))?.getNode();return!b||cm(e,b)!==s};return s?d(1)?((u,g,p)=>{const m=u.parentNode;return m&&Y.each(g,b=>{m.insertBefore(b,u)}),((b,f)=>{const v=j.before(b),y=ao(f).next(v);return y?y.toRange():null})(u,p)})(s,i,c):d(2)?(u=s,p=c,e.insertAfter((g=i).reverse(),u),Kv(g[0],p)):((u,g,p,m)=>{const b=((v,y)=>{const _=y.cloneRange(),k=y.cloneRange();return _.setStartBefore(v),k.setEndAfter(v),[_.cloneContents(),k.cloneContents()]})(u,m),f=u.parentNode;return f&&(f.insertBefore(b[0],u),Y.each(g,v=>{f.insertBefore(v,u)}),f.insertBefore(b[1],u),f.removeChild(u)),Kv(g[g.length-1],p)})(s,i,c,n):null;var u,g,p})(c,i,s.getRng(),f),u&&s.setRng(u),e;!0===n.paste&&((_,k,E,x)=>{var A;const N=k.firstChild,R=k.lastChild,L=N===("bookmark"===R.attr("data-mce-type")?R.prev:R),P=Bt(ZE,N.name);if(L&&P){const F="false"!==N.attr("contenteditable"),M=(null===(A=_.getParent(E,_.isBlock))||void 0===A?void 0:A.nodeName.toLowerCase())===N.name,z=C.from(ss(x,E)).forall(jn);return F&&M&&z}return!1})(i,f,m,t.getBody())&&(null===(o=f.firstChild)||void 0===o||o.unwrap()),(_=>{let k=_;for(;k=k.walk();)1===k.type&&k.attr("data-mce-fragment","1")})(f);let v=f.lastChild;if(v&&"mce_marker"===v.attr("id")){const _=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!i.isBlock(v.name)){v.parent&&t.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(_,v,"br"===v.name);break}}if(t._selectionOverrides.showBlockCaretContainer(m),b.invalid){t.selection.setContent(d);let _,k=s.getNode();const E=t.getBody();for(Li(k)?k=_=E:_=k;_&&_!==E;)k=_,_=_.parentNode;e=k===E?E.innerHTML:i.getOuterHTML(k);const x=a.parse(e);for(let L=x;L;L=L.walk())if("mce_marker"===L.attr("id")){L.replace(f);break}const A=f.children(),N=null!==(r=f.parent)&&void 0!==r?r:x;f.unwrap();const R=gt(A,L=>Wv(t.schema,L,N));am(R,t.schema),qv(a.getNodeFilters(),a.getAttributeFilters(),x),e=c.serialize(x),k===E?i.setHTML(E,e):i.setOuterHTML(k,e)}else e=c.serialize(f),((_,k,E)=>{var x;if("all"===E.getAttribute("data-mce-bogus"))null===(x=E.parentNode)||void 0===x||x.insertBefore(_.dom.createFragment(k),E);else{const A=E.firstChild;!A||A===E.lastChild&&"BR"===A.nodeName?_.dom.setHTML(E,k):_.selection.setContent(k,{no_events:!0})}})(t,e,m);var y;return((_,k)=>{const E=_.schema.getTextInlineElements(),x=_.dom;if(k){const A=_.getBody(),N=rm(_);Y.each(x.select("*[data-mce-fragment]"),R=>{if(et(E[R.nodeName.toLowerCase()])&&Ze(Fu(x,R),F=>!ev.has(F)))for(let L=R.parentElement;et(L)&&L!==A&&!AE(x,R,L);L=L.parentElement)if(N.compare(L,R)){x.remove(R,!0);break}})}})(t,l),((_,k)=>{var E,x,A;let N;const R=_.dom,L=_.selection;if(!k)return;L.scrollIntoView(k);const P=ss(_.getBody(),k);if(P&&"false"===R.getContentEditable(P))return R.remove(k),void L.select(P);let F=R.createRng();const M=k.previousSibling;if(K(M)){F.setStart(M,null!==(x=null===(E=M.nodeValue)||void 0===E?void 0:E.length)&&void 0!==x?x:0);const G=k.nextSibling;K(G)&&(M.appendData(G.data),null===(A=G.parentNode)||void 0===A||A.removeChild(G))}else F.setStartBefore(k),F.setEndBefore(k);const z=R.getParent(k,R.isBlock);R.remove(k),z&&R.isEmpty(z)&&(Oi(S(z)),F.setStart(z,0),F.setEnd(z,0),dm(z)||z.getAttribute("data-mce-fragment")||!(N=(G=>{let Q=j.fromRangeStart(G);return Q=ao(_.getBody()).next(Q),Q?.toRange()})(F))?R.add(z,R.create("br",{"data-mce-bogus":"1"})):(F=N,R.remove(z))),L.setRng(F)})(t,i.get("mce_marker")),y=t.getBody(),Y.each(y.getElementsByTagName("*"),_=>{_.removeAttribute("data-mce-fragment")}),((_,k)=>{C.from(_.getParent(k,"td,th")).map(S).each(Iw)})(i,s.getStart()),((_,k,E)=>{const x=sl(S(E),A=>kt(A,S(k)));wo(x,x.length-2).filter(pe).fold(()=>Rd(_,k),A=>Rd(_,A.dom))})(t.schema,t.getBody(),s.getStart()),e},rc=t=>t instanceof je,um=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&ns(o=t)&&Fe(o.getBody()).each(r=>{const s=r.getNode(),i=Ro(s)?Fe(s).getOr(r):r;o.selection.setRng(i.toRange())})},Yv=t=>Rt(t)?t:jt,mm=(t,e,n)=>{const o=e(t),r=Yv(n);return o.orThunk(()=>r(t)?C.none():((s,i,a)=>{let l=s.dom;const c=Yv(a);for(;l.parentNode;){l=l.parentNode;const d=S(l),u=i(d);if(u.isSome())return u;if(c(d))break}return C.none()})(t,e,r))},fm=yu,Xv=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(vn(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},gm=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const i=t.dom.getParent(e,a=>!!Xv(t,a,n)||a.parentNode===s||!!uo(t,a,n,o,!0));return!!uo(t,i,n,o,r)},sc=(t,e,n)=>!(!ae(n)||!fm(e,n.inline))||!(!co(n)||!fm(e,n.block))||!!vn(n)&&ot(e)&&t.is(e,n.selector),Gv=(t,e,n,o,r,s)=>{const i=n[o],a="attributes"===o;if(Rt(n.onmatch))return n.onmatch(e,n,o);if(i)if(za(i)){for(let l=0;l<i.length;l++)if(a?t.getAttrib(e,i[l]):Hl(t,e,i[l]))return!0}else for(const l in i)if(Ct(i,l)){const c=a?t.getAttrib(e,l):Hl(t,e,l),d=cr(i[l],s),u=It(c)||Yo(c);if(u&&It(d))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!fm(c,_u(d,l)))return!1}return!0},uo=(t,e,n,o,r)=>{const s=t.formatter.get(n),i=t.dom;if(s&&ot(e))for(let a=0;a<s.length;a++){const l=s[a];if(sc(t.dom,e,l)&&Gv(i,e,l,"attributes",r,o)&&Gv(i,e,l,"styles",r,o)){const c=l.classes;if(c)for(let d=0;d<c.length;d++)if(!t.dom.hasClass(e,cr(c[d],o)))return;return l}}},hm=(t,e,n,o,r)=>{if(o)return gm(t,o,e,n,r);if(o=t.selection.getNode(),gm(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!gm(t,s,e,n,r))},Ks=xe,Qv=t=>(e=>{const n=[];let o=e;for(;o;){if(K(o)&&o.data!==Ks||o.childNodes.length>1)return[];ot(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,Jv=t=>{if(t){const e=new ie(t,t);for(let n=e.current();n;n=e.next())if(K(n))return n}return null},pm=t=>{const e=V("span");return to(e,{id:au,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&de(e,it(Ks)),e},bm=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(Qv(e))os(t,!1,S(e),n);else{const s=r.getRng(),i=o.getParent(e,o.isBlock),a=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,u=(g=>{const p=Jv(g);return p&&p.data.charAt(0)===Ks&&p.deleteData(0,1),p})(e);o.remove(e,!0),a===u&&l>0&&s.setStart(u,l-1),c===u&&d>0&&s.setEnd(u,d-1),i&&o.isEmpty(i)&&Hr(S(i)),r.setRng(s)}},vm=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)bm(t,e,n);else if(!(e=Jr(t.getBody(),r.getStart())))for(;e=o.get(au);)bm(t,e,!1)},Zv=(t,e)=>(t.appendChild(e),e),t0=(t,e)=>{var n;const o=_r(t,(s,i)=>Zv(s,i.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return Zv(o,r.createTextNode(Ks))},oS=(t,e)=>{const n=t.schema.getTextInlineElements();return Ct(n,Ft(e))&&!$n(e.dom)&&!Ur(e.dom)},ba={},e0=Fn(["pre"]);ba.pre||(ba.pre=[]),ba.pre.push(t=>{if(!t.selection.getRng().collapsed){const e=t.selection.getSelectedBlocks(),n=gt(gt(e,e0),(o=e,r=>{const s=r.previousSibling;return e0(s)&&Bt(o,s)}));W(n,o=>{((r,s)=>{const i=S(s),a=Ne(i).dom;qt(i),Ir(S(r),[V("br",a),V("br",a),...ye(i)])})(o.previousSibling,o)})}var o});const n0=["fontWeight","fontStyle","color","fontSize","fontFamily"],o0=(t,e)=>{const n=t.get(e);return Xt(n)?ne(n,o=>{return ae(o)&&"span"===o.inline&&le((r=o).styles)&&Ht(we(r.styles),s=>Bt(n0,s));var r}):C.none()},r0=(t,e)=>pn(e,j.fromRangeStart(t)).isNone(),s0=(t,e)=>!1===Ke(e,j.fromRangeEnd(t)).exists(n=>!Zt(n.getNode())||Ke(e,n).isSome()),i0=t=>e=>Ow(e)&&"false"!==t.getContentEditableParent(e),a0=t=>gt(t.getSelectedBlocks(),i0(t.dom)),ym=Y.each,_m=t=>ot(t)&&!bn(t)&&!$n(t)&&!Ur(t),l0=(t,e)=>{for(let n=t;n;n=n[e]){if(K(n)&&dn(n.data))return t;if(ot(n)&&!bn(n))return n}return t},c0=(t,e,n)=>{const o=rm(t),r=ot(e)&&Zr(e),s=ot(n)&&Zr(n);if(r&&s){const i=l0(e,"previousSibling"),a=l0(n,"nextSibling");if(o.compare(i,a)){for(let l=i.nextSibling;l&&l!==a;){const c=l;l=l.nextSibling,i.appendChild(c)}return t.dom.remove(a),Y.each(Y.grep(a.childNodes),l=>{i.appendChild(l)}),i}}return n},d0=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=c0(t,Kp(o),o))&&void 0!==r?r:o;c0(t,s,Kp(s,!0))}},Cm=(t,e,n)=>{ym(t.childNodes,o=>{_m(o)&&(e(o)&&n(o),o.hasChildNodes()&&Cm(o,e,n))})},u0=(t,e)=>n=>!(!n||!Hl(t,n,e)),m0=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},is=ro([{keep:[]},{rename:["name"]},{removed:[]}]),rS=/^(src|href|style)$/,wm=Y.each,ic=yu,f0=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),g0=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(ot(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return K(o)&&n&&r>=o.data.length&&(o=new ie(o,t.getBody()).next()||o),K(o)&&!n&&0===r&&(o=new ie(o,t.getBody()).prev()||o),o},h0=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},km=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},p0=(t,e,n,o,r)=>{const s=S(e),i=S(t.create(o,r)),a=n?lg(s):ag(s);return Ir(i,a),n?(fn(s,i),vg(i,s)):(Qo(s,i),de(i,s)),i.dom},b0=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,i=nn(t);var a;co(n)&&o===s.getRoot()&&(n.list_block&&ic(e,n.list_block)||W(Le(e.childNodes),a=>{$s(t,i,a.nodeName.toLowerCase())?r?r.appendChild(a):(r=km(s,a,i),s.setAttribs(r,Qi(t))):r=null})),vn(a=n)&&ae(a)&&Xo(Mt(a,"mixed"),!0)&&!ic(n.inline,e)||s.remove(e,!0)},v0=(t,e,n)=>ln(t)?{name:e,value:null}:{name:t,value:cr(e,n)},y0=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},_0=(t,e,n,o,r)=>{let s=!1;wm(n.styles,(i,a)=>{const{name:l,value:c}=v0(a,i,o),d=_u(c,l);(n.remove_similar||In(c)||!ot(r)||ic(Hl(t,r,l),d))&&t.setStyle(e,l,""),s=!0}),s&&y0(t,e)},C0=(t,e,n,o,r)=>{const s=t.dom,i=rm(t),a=t.schema;if(ae(e)&&yl(a,e.inline)&&ji(a,o)&&o.parentElement===t.getBody())return b0(t,o,e),is.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!sc(s,o,e)&&(!e.links||"A"!==o.nodeName))return is.keep();const l=o,c=e.preserve_attributes;if(ae(e)&&"all"===e.remove&&Xt(c)){const d=gt(s.getAttribs(l),u=>Bt(c,u.name.toLowerCase()));if(s.removeAllAttribs(l),W(d,u=>s.setAttrib(l,u.name,u.value)),d.length>0)return is.rename("span")}if("all"!==e.remove){_0(s,l,e,n,r),wm(e.attributes,(u,g)=>{const{name:p,value:m}=v0(g,u,n);if(e.remove_similar||In(m)||!ot(r)||ic(s.getAttrib(r,p),m)){if("class"===p){const b=s.getAttrib(l,p);if(b){let f="";if(W(b.split(/\s+/),v=>{/mce\-\w+/.test(v)&&(f+=(f?" ":"")+v)}),f)return void s.setAttrib(l,p,f)}}if(rS.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&Fn(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),wm(e.classes,u=>{u=cr(u,n),ot(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const d=s.getAttribs(l);for(let u=0;u<d.length;u++)if(!i.isAttributeInternal(d[u].nodeName))return is.keep()}return"none"!==e.remove?(b0(t,l,e),is.removed()):is.keep()},va=(t,e,n,o,r)=>C0(t,e,n,o,r).fold(jt,s=>(t.dom.rename(o,s),!0),Gt),sS=(t,e,n,o)=>C0(t,e,n,o,o).fold(J(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),J(null)),w0=(t,e,n,o,r)=>{const s=t.formatter.get(e),i=s[0],a=t.dom,l=t.selection,c=m=>{const b=((f,v,y,_,k)=>{let E;return v.parentNode&&W($l(f.dom,v.parentNode).reverse(),x=>{if(!E&&ot(x)&&"_start"!==x.id&&"_end"!==x.id){const A=uo(f,x,y,_,k);A&&!1!==A.split&&(E=x)}}),E})(t,m,e,n,r);return((f,v,y,_,k,E,x,A)=>{var N,R;let L,P;const F=f.dom;if(y){const M=y.parentNode;for(let z=_.parentNode;z&&z!==M;z=z.parentNode){let G=F.clone(z,!1);for(let Q=0;Q<v.length&&(G=sS(f,v[Q],A,G),null!==G);Q++);G&&(L&&G.appendChild(L),P||(P=G),L=G)}x.mixed&&F.isBlock(y)||(_=null!==(N=F.split(y,_))&&void 0!==N?N:_),L&&P&&(null===(R=k.parentNode)||void 0===R||R.insertBefore(L,k),P.appendChild(k),ae(x)&&d0(f,x,0,L))}return _})(t,s,b,m,m,0,i,n)},d=m=>Ht(s,b=>va(t,b,n,m,m)),u=m=>{const b=Le(m.childNodes),f=d(m)||Ht(s,y=>sc(a,m,y)),v=m.parentNode;if(!f&&et(v)&&wu(i)&&d(v),i.deep&&b.length)for(let y=0;y<b.length;y++)u(b[y]);W(["underline","line-through","overline"],y=>{ot(m)&&t.dom.getStyle(m,"text-decoration")===y&&m.parentNode&&Xp(a,m.parentNode)===y&&va(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:y}},void 0,m)})},g=m=>{const b=a.get(m?"_start":"_end");if(b){let f=b[m?"firstChild":"lastChild"];return bn(v=f)&&ot(v)&&("_start"===v.id||"_end"===v.id)&&(f=f[m?"firstChild":"lastChild"]),K(f)&&0===f.data.length&&(f=m?b.previousSibling||b.nextSibling:b.nextSibling||b.previousSibling),a.remove(b,!0),f}var v;return null},p=m=>{let b,f,v=ts(a,m,s,m.collapsed);if(i.split){if(v=Gl(v),b=g0(t,v,!0),f=g0(t,v),b!==f){if(b=h0(b,!0),f=h0(f,!1),f0(a,b,f)){const _=C.from(b.firstChild).getOr(b);return c(p0(a,_,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void g(!0)}if(f0(a,f,b)){const _=C.from(f.lastChild).getOr(f);return c(p0(a,_,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void g(!1)}b=km(a,b,"span",{id:"_start","data-mce-type":"bookmark"}),f=km(a,f,"span",{id:"_end","data-mce-type":"bookmark"});const y=a.createRng();y.setStartAfter(b),y.setEndBefore(f),ia(a,y,_=>{W(_,k=>{bn(k)||bn(k.parentNode)||c(k)})}),c(b),c(f),b=g(!0),f=g()}else b=f=c(b);v.startContainer=b.parentNode?b.parentNode:b,v.startOffset=a.nodeIndex(b),v.endContainer=f.parentNode?f.parentNode:f,v.endOffset=a.nodeIndex(f)+1}ia(a,v,y=>{W(y,u)})};if(o){if(zl(o)){const m=a.createRng();m.setStartBefore(o),m.setEndAfter(o),p(m)}else p(o);ub(t,e,o,n)}else l.isCollapsed()&&ae(i)&&!Hs(t).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let i=!1;const a=t.formatter.get(e);if(!a)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let u=c;K(c)&&(d!==c.data.length&&(i=!0),u=u.parentNode);const g=[];let p;for(;u;){if(uo(t,u,e,n,o)){p=u;break}u.nextSibling&&(i=!0),g.push(u),u=u.parentNode}if(p)if(i){const m=s.getBookmark();l.collapse(!0);let b=ts(r,l,a,!0);b=Gl(b),t.formatter.remove(e,n,b,o),s.moveToBookmark(m)}else{const m=Jr(t.getBody(),p),b=pm(!1).dom;((y,_,k)=>{var E,x;const A=y.dom,N=A.getParent(k,rt(bu,y.schema));N&&A.isEmpty(N)?null===(E=k.parentNode)||void 0===E||E.replaceChild(_,k):((R=>{const L=Te(R,"br"),P=gt((F=>{const M=[];let z=F.dom;for(;z;)M.push(S(z)),z=z.lastChild;return M})(R).slice(-1),zr);L.length===P.length&&W(P,qt)})(S(k)),A.isEmpty(k)?null===(x=k.parentNode)||void 0===x||x.replaceChild(_,k):A.insertAfter(_,k))})(t,b,m??p);const f=((y,_,k,E,x,A)=>{const N=y.formatter,R=y.dom,L=gt(we(N.get()),F=>F!==E&&!ce(F,"removeformat")),P=(F=y,M=k,he(L,(G,Q)=>{const dt=Cu(F,Q,Lt=>{const at=yt=>Rt(yt)||yt.length>1&&"%"===yt.charAt(0);return Ht(["styles","attributes"],yt=>Mt(Lt,yt).exists(bt=>{const T=Xt(bt)?bt:Cs(bt);return Ht(T,at)}))});return F.formatter.matchNode(M,Q,{},dt)?G.concat([Q]):G},[]));var F,M;if(gt(P,F=>!((M,z,G)=>{const Q=["inline","block","selector","attributes","styles","classes"],dt=mt=>qo(mt,(St,Lt)=>Ht(Q,at=>at===Lt));return Cu(M,z,mt=>{const St=dt(mt);return Cu(M,G,Lt=>{const at=dt(Lt);return((yt,bt,T=bs)=>di(T).eq(yt,bt))(St,at)})})})(y,F,E)).length>0){const F=k.cloneNode(!1);return R.add(_,F),N.remove(E,x,F,A),R.remove(F),C.some(F)}return C.none()})(t,b,p,e,n,o),v=t0(g.concat(f.toArray()),b);m&&bm(t,m,!1),s.setCursorLocation(v,1),r.isEmpty(p)&&r.remove(p)}})(t,e,n,r):(Wp(t,()=>hu(t,p),m=>ae(i)&&hm(t,e,n,m)),t.nodeChanged()),m=t,f=n,"removeformat"===(b=e)?W(a0(m.selection),v=>{W(n0,y=>m.dom.setStyle(v,y,"")),y0(m.dom,v)}):o0(m.formatter,b).each(v=>{W(a0(m.selection),y=>_0(m.dom,y,v,f,null))}),ub(t,e,o,n);var m,b,f},k0=Y.each,ac=Y.each,x0=(t,e,n,o)=>{if(ac(n.styles,(r,s)=>{t.setStyle(e,s,cr(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},E0=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],i=!o&&t.selection.isCollapsed(),a=t.dom,l=t.selection,c=(m,b=s)=>{Rt(b.onformat)&&b.onformat(m,b,n,o),x0(a,m,b,n),ac(b.attributes,(f,v)=>{a.setAttrib(m,v,cr(f,n))}),ac(b.classes,f=>{const v=cr(f,n);a.hasClass(m,v)||a.addClass(m,v)})},d=(m,b)=>{let f=!1;return ac(m,v=>!(!vn(v)||("false"!==a.getContentEditable(b)||v.ceFalseOverride)&&(!et(v.collapsed)||v.collapsed===i)&&a.is(b,v.selector)&&!$n(b)&&(c(b,v),f=!0,1))),f},g=(m,b,f)=>{const v=[];let y=!0;const _=s.inline||s.block,k=(m=>{if(ft(m)){const b=a.create(m);return c(b),b}return null})(_);ia(m,b,E=>{let x;const A=N=>{let R=!1,L=y,P=!1;const F=N.parentNode,M=F.nodeName.toLowerCase(),z=m.getContentEditable(N);et(z)&&(L=y,y="true"===z,R=!0,P=Yp(t,N));const G=y&&!R;if(Zt(N)&&!((Q,dt,mt,St)=>{if(Gk(Q)&&ae(dt)&&mt.parentNode){const Lt=ah(Q.schema),at=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=S(r.parentNode),ne(s.dom.childNodes,a=>(s=>!kt(n,s)&&o(s))(S(a))).map(S)):C.none();var s})(t,e).isSome())(S(mt),yt=>$n(yt.dom));return Sn(Lt,St)&&te(S(mt.parentNode),!1)&&!at}return!1})(t,s,N,M))return x=null,void(co(s)&&m.remove(N));if(Q=N,co(dt=s)&&!0===dt.wrapper&&uo(t,Q,e,n))x=null;else{if(((Q,dt,mt)=>{const St=co(Lt=s)&&!0!==Lt.wrapper&&bu(t.schema,Q)&&$s(t,dt,_);var Lt;return mt&&St})(N,M,G)){const Q=m.rename(N,_);return c(Q),v.push(Q),void(x=null)}if(vn(s)){let Q=d(r,N);if(!Q&&et(F)&&wu(s)&&(Q=d(r,F)),!ae(s)||Q)return void(x=null)}et(k)&&((Q,dt,mt,St)=>{const Lt=Q.nodeName.toLowerCase(),at=$s(t,_,Lt)&&$s(t,dt,_),yt=!f&&K(Q)&&hl(Q.data),bt=$n(Q),T=!ae(s)||!m.isBlock(Q);return(mt||St)&&at&&!yt&&!bt&&T})(N,M,G,P)?(x||(x=m.clone(k,!1),F.insertBefore(x,N),v.push(x)),P&&R&&(y=L),x.appendChild(N)):(x=null,W(Le(N.childNodes),A),R&&(y=L),x=null)}var Q,dt};W(E,A)}),!0===s.links&&W(v,E=>{const x=A=>{"A"===A.nodeName&&c(A,s),W(Le(A.childNodes),x)};x(E)}),W(v,E=>{const x=(A=>{let N=0;return W(A.childNodes,R=>{var L;et(L=R)&&K(L)&&0===L.length||bn(R)||N++}),N})(E);var A;!(v.length>1)&&m.isBlock(E)||0!==x?(ae(s)||co(s)&&s.wrapper)&&(s.exact||1!==x||(E=ne((A=E).childNodes,pu).filter(R=>"false"!==m.getContentEditable(R)&&sc(m,R,s)).map(R=>{const L=m.clone(R,!1);return c(L),m.replace(L,A,!0),m.remove(R,!0),L}).getOr(A)),((A,N,R,L)=>{k0(N,P=>{var F,M,z;ae(P)&&k0(A.dom.select(P.inline,L),F=>{_m(F)&&va(A,P,R,F,P.exact?F:null)}),F=A.dom,z=L,(M=P).clear_child_styles&&ym(F.select(M.links?"*:not(a)":"*",z),Q=>{_m(Q)&&Zr(Q)&&ym(M.styles,(dt,mt)=>{F.setStyle(Q,mt,"")})})})})(t,r,n,E),((A,N,R,L,P)=>{const F=P.parentNode;uo(A,F,R,L)&&va(A,N,L,P)||N.merge_with_parents&&F&&A.dom.getParent(F,M=>!!uo(A,M,R,L)&&(va(A,N,L,P),!0))})(t,s,e,n,E),((A,N,R,L)=>{if(N.styles&&N.styles.backgroundColor){const P=u0(A,"fontSize");Cm(L,F=>P(F)&&Zr(F),m0(A,"backgroundColor",cr(N.styles.backgroundColor,R)))}})(m,s,n,E),((A,N,R,L)=>{const P=F=>{if(ot(F)&&ot(F.parentNode)&&Zr(F)){const M=Xp(A,F.parentNode);A.getStyle(F,"color")&&M?A.setStyle(F,"text-decoration",M):A.getStyle(F,"text-decoration")===M&&A.setStyle(F,"text-decoration",null)}};N.styles&&(N.styles.color||N.styles.textDecoration)&&(Y.walk(L,P,"childNodes"),P(L))})(m,s,0,E),((A,N,R,L)=>{if(ae(N)&&("sub"===N.inline||"sup"===N.inline)){const P=u0(A,"fontSize");Cm(L,M=>P(M)&&Zr(M),m0(A,"fontSize",""));const F=gt(A.select("sup"===N.inline?"sub":"sup",L),Zr);A.remove(F,!0)}})(m,s,0,E),d0(t,s,0,E)):m.remove(E,!0)})},p=zl(o)?o:l.getNode();if("false"===a.getContentEditable(p)&&!Yp(t,p))return d(r,o=p),void db(t,e,o,n);if(s){if(o)if(zl(o)){if(!d(r,o)){const m=a.createRng();m.setStartBefore(o),m.setEndAfter(o),g(a,ts(a,m,r),!0)}}else g(a,o,!0);else i&&ae(s)&&!Hs(t).length?((m,b,f)=>{let v;const y=m.selection,_=m.formatter.get(b);if(!_)return;const k=y.getRng();let E=k.startOffset;const x=k.startContainer.nodeValue;v=Jr(m.getBody(),y.getStart());const A=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&E>0&&E<x.length&&A.test(x.charAt(E))&&A.test(x.charAt(E-1))){const L=y.getBookmark();k.collapse(!0);let P=ts(m.dom,k,_);P=Gl(P),m.formatter.apply(b,f,P),y.moveToBookmark(L)}else{let L=v?Jv(v):null;v&&L?.data===Ks||(N=m.getDoc(),R=pm(!0).dom,v=N.importNode(R,!0),L=v.firstChild,k.insertNode(v),E=1),m.formatter.apply(b,f,v),y.setCursorLocation(L,E)}var N,R})(t,e,n):(l.setRng(lm(l.getRng())),Wp(t,()=>{hu(t,(m,b)=>{const f=b?m:ts(a,m,r);g(a,f,!1)})},Gt),t.nodeChanged()),o0(t.formatter,e).each(m=>{var b;W(gt((f=>{const v=f.getSelectedBlocks(),y=f.getRng();if(f.isCollapsed())return[];if(1===v.length)return r0(y,v[0])&&s0(y,v[0])?v:[];{const _=Se(v).filter(x=>r0(y,x)).toArray(),k=ko(v).filter(x=>s0(y,x)).toArray(),E=v.slice(1,-1);return _.concat(E).concat(k)}})(b=t.selection),i0(b.dom)),b=>x0(a,b,m,n))});b=t,Ct(ba,m=e)&&W(ba[m],f=>{f(b)})}var m,b;db(t,e,o,n)},S0=t=>Ct(t,"vars"),N0=t=>t.selection.getStart(),A0=(t,e,n,o,r)=>Nt(e,s=>{const i=t.formatter.matchNode(s,n,r??{},o);return!zt(i)},s=>!!Xv(t,s,n)||!o&&et(t.formatter.matchNode(s,n,r,!0))),R0=(t,e)=>{const n=e??N0(t);return gt($l(t.dom,n),o=>ot(o)&&!Ur(o))},T0=(t,e,n)=>{const o=R0(t,e);Dt(n,(r,s)=>{const i=a=>{const l=A0(t,o,s,a.similar,S0(a)?a.vars:void 0),c=l.isSome();if(a.state.get()!==c){a.state.set(c);const d=l.getOr(e);S0(a)?a.callback(c,{node:d,format:s,parents:o}):W(a.callbacks,u=>u(c,{node:d,format:s,parents:o}))}};W([r.withSimilar,r.withoutSimilar],i),W(r.withVars,i)})};function as(t){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function xm(t,e){return(xm=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function iS(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Em(t,e,n){return(Em=iS()?Reflect.construct:function(o,r,s){var i=[null];i.push.apply(i,r);var a=new(Function.bind.apply(o,i));return s&&xm(a,s.prototype),a}).apply(null,arguments)}function qn(t){return function(e){if(Array.isArray(e))return Sm(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return Sm(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Sm(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var aS=Object.hasOwnProperty,O0=Object.setPrototypeOf,lS=Object.isFrozen,cS=Object.getPrototypeOf,dS=Object.getOwnPropertyDescriptor,Ye=Object.freeze,mo=Object.seal,uS=Object.create,D0=typeof Reflect<"u"&&Reflect,lc=D0.apply,Nm=D0.construct;lc||(lc=function(t,e,n){return t.apply(e,n)}),Ye||(Ye=function(t){return t}),mo||(mo=function(t){return t}),Nm||(Nm=function(t,e){return Em(t,qn(e))});var B0,mS=Vn(Array.prototype.forEach),fS=Vn(Array.prototype.pop),ya=Vn(Array.prototype.push),cc=Vn(String.prototype.toLowerCase),gS=Vn(String.prototype.match),hr=Vn(String.prototype.replace),hS=Vn(String.prototype.indexOf),pS=Vn(String.prototype.trim),Xe=Vn(RegExp.prototype.test),Am=(B0=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Nm(B0,e)});function Vn(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return lc(t,e,o)}}function Tt(t,e){O0&&O0(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=cc(o);r!==o&&(lS(e)||(e[n]=r),o=r)}t[o]=!0}return t}function ls(t){var e,n=uS(null);for(e in t)lc(aS,t,[e])&&(n[e]=t[e]);return n}function dc(t,e){for(;null!==t;){var n=dS(t,e);if(n){if(n.get)return Vn(n.get);if("function"==typeof n.value)return Vn(n.value)}t=cS(t)}return function(o){return console.warn("fallback value for",o),null}}var L0=Ye(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rm=Ye(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Tm=Ye(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bS=Ye(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Om=Ye(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),vS=Ye(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P0=Ye(["#text"]),I0=Ye(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Dm=Ye(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M0=Ye(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uc=Ye(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yS=mo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_S=mo(/<%[\w\W]*|[\w\W]*%>/gm),CS=mo(/^data-[\-\w.\u00B7-\uFFFF]/),wS=mo(/^aria-[\-\w]+$/),kS=mo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xS=mo(/^(?:\w+script|data):/i),ES=mo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),SS=mo(/^html$/i),NS=function(){return typeof window>"u"?null:window},AS=function(t,e){if("object"!==as(t)||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(o)&&(n=e.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(s){return s}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},RS=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NS(),n=function(I){return t(I)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,i=e.HTMLTemplateElement,a=e.Node,l=e.Element,c=e.NodeFilter,d=e.NamedNodeMap,u=void 0===d?e.NamedNodeMap||e.MozNamedAttrMap:d,g=e.HTMLFormElement,p=e.DOMParser,m=e.trustedTypes,b=l.prototype,f=dc(b,"cloneNode"),v=dc(b,"nextSibling"),y=dc(b,"childNodes"),_=dc(b,"parentNode");if("function"==typeof i){var k=r.createElement("template");k.content&&k.content.ownerDocument&&(r=k.content.ownerDocument)}var E=AS(m,o),x=E?E.createHTML(""):"",A=r,N=A.implementation,R=A.createNodeIterator,L=A.createDocumentFragment,P=A.getElementsByTagName,F=o.importNode,M={};try{M=ls(r).documentMode?r.documentMode:{}}catch{}var z={};n.isSupported="function"==typeof _&&N&&void 0!==N.createHTMLDocument&&9!==M;var G,Q,dt=yS,mt=_S,St=CS,Lt=wS,at=xS,yt=ES,bt=kS,T=null,O=Tt({},[].concat(qn(L0),qn(Rm),qn(Tm),qn(Om),qn(P0))),U=null,$=Tt({},[].concat(qn(I0),qn(Dm),qn(M0),qn(uc))),H=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,X=null,nt=!0,lt=!0,pt=!1,vt=!1,tt=!1,_t=!1,ee=!1,Vt=!1,ze=!1,He=!1,Yn=!0,Bn=!0,ve=!1,Ge={},Yt=null,bo=Tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),br=null,ed=Tt({},["audio","video","img","source","image","track"]),vo=null,Ma=Tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),on="http://www.w3.org/1998/Math/MathML",vr="http://www.w3.org/2000/svg",rn="http://www.w3.org/1999/xhtml",gs=rn,gw=!1,tT=["application/xhtml+xml","text/html"],eT="text/html",ci=null,nT=r.createElement("form"),hw=function(I){return I instanceof RegExp||I instanceof Function},sg=function(I){ci&&ci===I||(I&&"object"===as(I)||(I={}),I=ls(I),T="ALLOWED_TAGS"in I?Tt({},I.ALLOWED_TAGS):O,U="ALLOWED_ATTR"in I?Tt({},I.ALLOWED_ATTR):$,vo="ADD_URI_SAFE_ATTR"in I?Tt(ls(Ma),I.ADD_URI_SAFE_ATTR):Ma,br="ADD_DATA_URI_TAGS"in I?Tt(ls(ed),I.ADD_DATA_URI_TAGS):ed,Yt="FORBID_CONTENTS"in I?Tt({},I.FORBID_CONTENTS):bo,q="FORBID_TAGS"in I?Tt({},I.FORBID_TAGS):{},X="FORBID_ATTR"in I?Tt({},I.FORBID_ATTR):{},Ge="USE_PROFILES"in I&&I.USE_PROFILES,nt=!1!==I.ALLOW_ARIA_ATTR,lt=!1!==I.ALLOW_DATA_ATTR,pt=I.ALLOW_UNKNOWN_PROTOCOLS||!1,vt=I.SAFE_FOR_TEMPLATES||!1,tt=I.WHOLE_DOCUMENT||!1,Vt=I.RETURN_DOM||!1,ze=I.RETURN_DOM_FRAGMENT||!1,He=I.RETURN_TRUSTED_TYPE||!1,ee=I.FORCE_BODY||!1,Yn=!1!==I.SANITIZE_DOM,Bn=!1!==I.KEEP_CONTENT,ve=I.IN_PLACE||!1,bt=I.ALLOWED_URI_REGEXP||bt,gs=I.NAMESPACE||rn,I.CUSTOM_ELEMENT_HANDLING&&hw(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&hw(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(H.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G=G=-1===tT.indexOf(I.PARSER_MEDIA_TYPE)?eT:I.PARSER_MEDIA_TYPE,Q="application/xhtml+xml"===G?function(ht){return ht}:cc,vt&&(lt=!1),ze&&(Vt=!0),Ge&&(T=Tt({},qn(P0)),U=[],!0===Ge.html&&(Tt(T,L0),Tt(U,I0)),!0===Ge.svg&&(Tt(T,Rm),Tt(U,Dm),Tt(U,uc)),!0===Ge.svgFilters&&(Tt(T,Tm),Tt(U,Dm),Tt(U,uc)),!0===Ge.mathMl&&(Tt(T,Om),Tt(U,M0),Tt(U,uc))),I.ADD_TAGS&&(T===O&&(T=ls(T)),Tt(T,I.ADD_TAGS)),I.ADD_ATTR&&(U===$&&(U=ls(U)),Tt(U,I.ADD_ATTR)),I.ADD_URI_SAFE_ATTR&&Tt(vo,I.ADD_URI_SAFE_ATTR),I.FORBID_CONTENTS&&(Yt===bo&&(Yt=ls(Yt)),Tt(Yt,I.FORBID_CONTENTS)),Bn&&(T["#text"]=!0),tt&&Tt(T,["html","head","body"]),T.table&&(Tt(T,["tbody"]),delete q.tbody),Ye&&Ye(I),ci=I)},pw=Tt({},["mi","mo","mn","ms","mtext"]),bw=Tt({},["foreignobject","desc","title","annotation-xml"]),oT=Tt({},["title","style","font","a","script"]),nd=Tt({},Rm);Tt(nd,Tm),Tt(nd,bS);var ig=Tt({},Om);Tt(ig,vS);var rT=function(I){var ht=_(I);ht&&ht.tagName||(ht={namespaceURI:rn,tagName:"template"});var ut=cc(I.tagName),Kt=cc(ht.tagName);return I.namespaceURI===vr?ht.namespaceURI===rn?"svg"===ut:ht.namespaceURI===on?"svg"===ut&&("annotation-xml"===Kt||pw[Kt]):Boolean(nd[ut]):I.namespaceURI===on?ht.namespaceURI===rn?"math"===ut:ht.namespaceURI===vr?"math"===ut&&bw[Kt]:Boolean(ig[ut]):I.namespaceURI===rn&&!(ht.namespaceURI===vr&&!bw[Kt])&&!(ht.namespaceURI===on&&!pw[Kt])&&!ig[ut]&&(oT[ut]||!nd[ut])},Io=function(I){ya(n.removed,{element:I});try{I.parentNode.removeChild(I)}catch{try{I.outerHTML=x}catch{I.remove()}}},od=function(I,ht){try{ya(n.removed,{attribute:ht.getAttributeNode(I),from:ht})}catch{ya(n.removed,{attribute:null,from:ht})}if(ht.removeAttribute(I),"is"===I&&!U[I])if(Vt||ze)try{Io(ht)}catch{}else try{ht.setAttribute(I,"")}catch{}},vw=function(I){var ht,ut;if(ee)I="<remove></remove>"+I;else{var Kt=gS(I,/^[\r\n\t ]+/);ut=Kt&&Kt[0]}"application/xhtml+xml"===G&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");var fe=E?E.createHTML(I):I;if(gs===rn)try{ht=(new p).parseFromString(fe,G)}catch{}if(!ht||!ht.documentElement){ht=N.createDocument(gs,"template",null);try{ht.documentElement.innerHTML=gw?"":fe}catch{}}var Qe=ht.body||ht.documentElement;return I&&ut&&Qe.insertBefore(r.createTextNode(ut),Qe.childNodes[0]||null),gs===rn?P.call(ht,tt?"html":"body")[0]:tt?ht.documentElement:Qe},yw=function(I){return R.call(I.ownerDocument||I,I,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},sT=function(I){return I instanceof g&&("string"!=typeof I.nodeName||"string"!=typeof I.textContent||"function"!=typeof I.removeChild||!(I.attributes instanceof u)||"function"!=typeof I.removeAttribute||"function"!=typeof I.setAttribute||"string"!=typeof I.namespaceURI||"function"!=typeof I.insertBefore)},Fa=function(I){return"object"===as(a)?I instanceof a:I&&"object"===as(I)&&"number"==typeof I.nodeType&&"string"==typeof I.nodeName},Mo=function(I,ht,ut){z[I]&&mS(z[I],function(Kt){Kt.call(n,ht,ut,ci)})},_w=function(I){var ht;if(Mo("beforeSanitizeElements",I,null),sT(I)||Xe(/[\u0080-\uFFFF]/,I.nodeName))return Io(I),!0;var ut=Q(I.nodeName);if(Mo("uponSanitizeElement",I,{tagName:ut,allowedTags:T}),I.hasChildNodes()&&!Fa(I.firstElementChild)&&(!Fa(I.content)||!Fa(I.content.firstElementChild))&&Xe(/<[/\w]/g,I.innerHTML)&&Xe(/<[/\w]/g,I.textContent)||"select"===ut&&Xe(/<template/i,I.innerHTML))return Io(I),!0;if(!T[ut]||q[ut]){if(!q[ut]&&ww(ut)&&(H.tagNameCheck instanceof RegExp&&Xe(H.tagNameCheck,ut)||H.tagNameCheck instanceof Function&&H.tagNameCheck(ut)))return!1;if(Bn&&!Yt[ut]){var Kt=_(I)||I.parentNode,fe=y(I)||I.childNodes;if(fe&&Kt)for(var Qe=fe.length-1;Qe>=0;--Qe)Kt.insertBefore(f(fe[Qe],!0),v(I))}return Io(I),!0}return I instanceof l&&!rT(I)?(Io(I),!0):"noscript"!==ut&&"noembed"!==ut||!Xe(/<\/no(script|embed)/i,I.innerHTML)?(vt&&3===I.nodeType&&(ht=hr(ht=I.textContent,dt," "),ht=hr(ht,mt," "),I.textContent!==ht&&(ya(n.removed,{element:I.cloneNode()}),I.textContent=ht)),Mo("afterSanitizeElements",I,null),!1):(Io(I),!0)},Cw=function(I,ht,ut){if(Yn&&("id"===ht||"name"===ht)&&(ut in r||ut in nT))return!1;if((!lt||X[ht]||!Xe(St,ht))&&(!nt||!Xe(Lt,ht)))if(!U[ht]||X[ht]){if(!(ww(I)&&(H.tagNameCheck instanceof RegExp&&Xe(H.tagNameCheck,I)||H.tagNameCheck instanceof Function&&H.tagNameCheck(I))&&(H.attributeNameCheck instanceof RegExp&&Xe(H.attributeNameCheck,ht)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(ht))||"is"===ht&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&Xe(H.tagNameCheck,ut)||H.tagNameCheck instanceof Function&&H.tagNameCheck(ut))))return!1}else if(!vo[ht]&&!Xe(bt,hr(ut,yt,""))&&("src"!==ht&&"xlink:href"!==ht&&"href"!==ht||"script"===I||0!==hS(ut,"data:")||!br[I])&&(!pt||Xe(at,hr(ut,yt,"")))&&ut)return!1;return!0},ww=function(I){return I.indexOf("-")>0},kw=function(I){var ht,ut,Kt,fe;Mo("beforeSanitizeAttributes",I,null);var Qe=I.attributes;if(Qe){var Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U};for(fe=Qe.length;fe--;){var ja=ht=Qe[fe],yo=ja.name,Xn=ja.namespaceURI;ut="value"===yo?ht.value:pS(ht.value),Kt=Q(yo);var aT=ut;if(Be.attrName=Kt,Be.attrValue=ut,Be.keepAttr=!0,Be.forceKeepAttr=void 0,Mo("uponSanitizeAttribute",I,Be),ut=Be.attrValue,!Be.forceKeepAttr)if(Be.keepAttr)if(Xe(/\/>/i,ut))od(yo,I);else{vt&&(ut=hr(ut,dt," "),ut=hr(ut,mt," "));var lT=Q(I.nodeName);if(Cw(lT,Kt,ut)){if(ut!==aT)try{Xn?I.setAttributeNS(Xn,yo,ut):I.setAttribute(yo,ut)}catch{od(yo,I)}}else od(yo,I)}else od(yo,I)}Mo("afterSanitizeAttributes",I,null)}},iT=function I(ht){var ut,Kt=yw(ht);for(Mo("beforeSanitizeShadowDOM",ht,null);ut=Kt.nextNode();)Mo("uponSanitizeShadowNode",ut,null),_w(ut)||(ut.content instanceof s&&I(ut.content),kw(ut));Mo("afterSanitizeShadowDOM",ht,null)};return n.sanitize=function(I,ht){var ut,Kt,fe,Qe,Be;if((gw=!I)&&(I="\x3c!--\x3e"),"string"!=typeof I&&!Fa(I)){if("function"!=typeof I.toString)throw Am("toString is not a function");if("string"!=typeof(I=I.toString()))throw Am("dirty is not a string, aborting")}if(!n.isSupported){if("object"===as(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof I)return e.toStaticHTML(I);if(Fa(I))return e.toStaticHTML(I.outerHTML)}return I}if(_t||sg(ht),n.removed=[],"string"==typeof I&&(ve=!1),ve){if(I.nodeName){var ja=Q(I.nodeName);if(!T[ja]||q[ja])throw Am("root node is forbidden and cannot be sanitized in-place")}}else if(I instanceof a)1===(Kt=(ut=vw("\x3c!----\x3e")).ownerDocument.importNode(I,!0)).nodeType&&"BODY"===Kt.nodeName||"HTML"===Kt.nodeName?ut=Kt:ut.appendChild(Kt);else{if(!Vt&&!vt&&!tt&&-1===I.indexOf("<"))return E&&He?E.createHTML(I):I;if(!(ut=vw(I)))return Vt?null:He?x:""}ut&&ee&&Io(ut.firstChild);for(var yo=yw(ve?I:ut);fe=yo.nextNode();)3===fe.nodeType&&fe===Qe||_w(fe)||(fe.content instanceof s&&iT(fe.content),kw(fe),Qe=fe);if(Qe=null,ve)return I;if(Vt){if(ze)for(Be=L.call(ut.ownerDocument);ut.firstChild;)Be.appendChild(ut.firstChild);else Be=ut;return U.shadowroot&&(Be=F.call(o,Be,!0)),Be}var Xn=tt?ut.outerHTML:ut.innerHTML;return tt&&T["!doctype"]&&ut.ownerDocument&&ut.ownerDocument.doctype&&ut.ownerDocument.doctype.name&&Xe(SS,ut.ownerDocument.doctype.name)&&(Xn="<!DOCTYPE "+ut.ownerDocument.doctype.name+">\n"+Xn),vt&&(Xn=hr(Xn,dt," "),Xn=hr(Xn,mt," ")),E&&He?E.createHTML(Xn):Xn},n.setConfig=function(I){sg(I),_t=!0},n.clearConfig=function(){ci=null,_t=!1},n.isValidAttribute=function(I,ht,ut){ci||sg({});var Kt=Q(I),fe=Q(ht);return Cw(Kt,fe,ut)},n.addHook=function(I,ht){"function"==typeof ht&&(z[I]=z[I]||[],ya(z[I],ht))},n.removeHook=function(I){if(z[I])return fS(z[I])},n.removeHooks=function(I){z[I]&&(z[I]=[])},n.removeAllHooks=function(){z={}},n}();const F0=Y.explode,j0=()=>{const t={};return{addFilter:(e,n)=>{W(F0(e),o=>{Ct(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>Cs(t),removeFilter:(e,n)=>{W(F0(e),o=>{if(Ct(t,o))if(et(n)){const r=t[o],s=gt(r.callbacks,i=>i!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},Bm=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],i=s?(a=>{const l=/([a-z0-9+\/=\s]+)/i.exec(a);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:i,base64Encoded:s})}return C.none()},U0=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return C.some(new Blob([r],{type:t}))},z0=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let OS=0;const H0=(t,e,n)=>Bm(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return C.none();{const i=s?o:btoa(o);return n(i,r)}}),$0=(t,e,n)=>{const o=t.create("blobid"+OS++,e,n);return t.add(o),o},q0=(t,e,n=!1)=>H0(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>U0(r,o).map(s=>$0(t,s,o)))),V0=Y.each,DS=Y.trim,BS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],LS={ftp:21,http:80,https:443,mailto:25},PS=["img","video"],W0=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e);return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(et(r=t.allow_svg_data_urls)?!r:!et(s)||!Bt(PS,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class Wn{constructor(e,n={}){this.path="",this.directory="",e=DS(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const a=o?o.path:new Wn(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(a,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(a,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);i&&V0(BS,(a,l)=>{let c=i[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[a]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=or.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!W0(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new Wn(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new Wn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?LS[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,i="";const a=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(a.length>=l.length)for(o=0,r=a.length;o<r;o++)if(o>=l.length||a[o]!==l[o]){s=o+1;break}if(a.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=a.length||a[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=a.length-(s-1);o<r;o++)i+="../";for(o=s-1,r=l.length;o<r;o++)i+=o!==s-1?"/"+l[o]:l[o];return i}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),i=n.split("/"),a=[];V0(s,u=>{u&&a.push(u)});const l=[];for(let u=i.length-1;u>=0;u--)0!==i[u].length&&"."!==i[u]&&(".."!==i[u]?o>0?o--:l.push(i[u]):o++);const c=a.length-o;let d;return d=c<=0?En(l).join("/"):a.slice(0,c).join("/")+"/"+En(l).join("/"),0!==d.indexOf("/")&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const K0=Y.makeMap,Y0=Y.extend,IS={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},MS=Y.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Lm="data-mce-type",X0=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let i=0,a=s.length;i<a;i++){const l=s[i],c=new je(l.nodeName.toLowerCase(),l.nodeType);if(ot(l)){const d=l.attributes;for(let u=0,g=d.length;u<g;u++){const p=d[u];c.attr(p.name,p.value)}}else K(l)?(c.value=l.data,r&&(c.raw=!0)):(tr(l)||Rw(l)||Tw(l))&&(c.value=l.data);X0(c,l,n),t.append(c)}},Ys=(t={},e=rr())=>{const n=j0(),o=j0(),r={validate:!0,root_name:"body",...t},s=new DOMParser,i=((t,e)=>{const n=RS(),o=e.getSpecialElements(),r=t.validate;let s=0;return n.addHook("uponSanitizeElement",(i,a)=>{var l,c,d;8===i.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(l=i.nodeValue)&&void 0!==l?l:"")&&(i.nodeValue=" "+i.nodeValue);const u=a.tagName;if(1!==i.nodeType||"body"===u)return;const g=S(i),p=u.toLowerCase(),m=Rr(g,Lm),b=Ve(g,"data-mce-bogus");if(!m&&ft(b))return void("all"===b?qt(g):Jo(g));const f=e.getElementRule(p);if(!r||f){if(a.allowedTags[u]=!0,r&&f&&!m){if(W(null!==(c=f.attributesForced)&&void 0!==c?c:[],v=>{re(g,v.name,"{$uid}"===v.value?"mce_"+s++:v.value)}),W(null!==(d=f.attributesDefault)&&void 0!==d?d:[],v=>{Rr(g,v.name)||re(g,v.name,"{$uid}"===v.value?"mce_"+s++:v.value)}),f.attributesRequired&&!Ht(f.attributesRequired,v=>Rr(g,v))||f.removeEmptyAttrs&&(v=>{const y=v.dom.attributes;return null==y||0===y.length})(g))return void Jo(g);f.outputName&&f.outputName!==p&&((v,y)=>{const _=((E,x)=>{const A=V(x),N=Ri(E);return to(A,N),A})(v,y);Qo(v,_);const k=ye(v);Ir(_,k),qt(v)})(g,f.outputName)}}else Ct(o,p)?qt(g):Jo(g)}),n.addHook("uponSanitizeAttribute",(i,a)=>{const l=i.tagName.toLowerCase(),{attrName:c,attrValue:d}=a;a.keepAttr=!r||e.isValid(l,c)||oe(c,"data-")||oe(c,"aria-"),c in MS&&W0(t,d,l)&&(a.keepAttr=!1),a.keepAttr?(a.allowedAttributes[c]=!0,c in e.getBoolAttrs()&&(a.attrValue=c),t.allow_svg_data_urls&&oe(d,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):!i.hasAttribute(Lm)||"id"!==c&&"class"!==c&&"style"!==c||(a.forceKeepAttr=!0)}),n})(r,e),l=n.getFilters,u=o.getFilters,p=(b,f)=>{const v=ft(f.attr(Lm)),y=!(1!==f.type||Ct(b,f.name)||(_=e,k=f,1===k.type&&yl(_,k.name)&&ft(k.attr(Fi))));var _,k;return 3===f.type||y&&!v},m={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(b,f={})=>{var v;const y=r.validate,_=null!==(v=f.context)&&void 0!==v?v:r.root_name,k=((M,z,G="html")=>{const Q="xhtml"===G?"application/xhtml+xml":"text/html",dt=Ct(e.getSpecialElements(),z.toLowerCase()),mt=dt?`<${z}>${M}</${z}>`:M,Lt=s.parseFromString("xhtml"===G?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${mt}</body></html>`:`<body>${mt}</body>`,Q).body;return i.sanitize(Lt,((at,yt)=>{const bt={...IS};return bt.PARSER_MEDIA_TYPE=yt,at.allow_script_urls?bt.ALLOWED_URI_REGEXP=/.*/:at.allow_html_data_urls&&(bt.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),bt})(r,Q)),i.removed=[],dt?Lt.firstChild:Lt})(b,_,f.format);Rd(e,k);const E=new je(_,11);X0(E,k,e.getSpecialElements()),k.innerHTML="";const[x,A]=((M,z,G,Q)=>{const dt=G.validate,mt=z.getNonEmptyElements(),St=z.getWhitespaceElements(),Lt=Y0(K0("script,style,head,html,body,title,meta,param"),z.getBlockElements()),at=ah(z),yt=/[ \t\r\n]+/g,bt=/^[ \t\r\n]+/,T=/[ \t\r\n]+$/,O=H=>{let q=H.parent;for(;et(q);){if(q.name in St)return!0;q=q.parent}return!1},U=H=>H.name in Lt&&!Xg(z,H),$=(H,q)=>!et(q?H.prev:H.next)&&!It(H.parent)&&U(H.parent)&&(H.parent!==M||!0===Q.isRootContent);return[H=>{var q,nt,lt;if(3===H.type&&!O(H)){let X=null!==(q=H.value)&&void 0!==q?q:"";X=X.replace(yt," "),lt=U,(et(nt=H.prev)&&(lt(nt)||"br"===nt.name)||$(H,!0))&&(X=X.replace(bt,"")),0===X.length?H.remove():H.value=X}},H=>{var q,lt,pt;if(1===H.type){const X=z.getElementRule(H.name);if(dt&&X){const nt=pa(z,mt,St,H);X.paddInEmptyBlock&&nt&&(lt=>{let pt=lt;for(;et(pt);){if(pt.name in at)return pa(z,mt,St,pt);pt=pt.parent}return!1})(H)?sm(Q,U,H):X.removeEmpty&&nt?U(H)?H.remove():H.unwrap():X.paddEmpty&&(nt||Vv(lt=H,"#text")&&(null===(pt=lt?.firstChild)||void 0===pt?void 0:pt.value)===be)&&sm(Q,U,H)}}else if(3===H.type&&!O(H)){let X=null!==(q=H.value)&&void 0!==q?q:"";(H.next&&U(H.next)||$(H,!1))&&(X=X.replace(T,"")),0===X.length?H.remove():H.value=X}}]})(E,e,r,f),N=[],L={nodes:{},attributes:{}},P=M=>Hv(l(),u(),M,L);if(((M,z,G)=>{const Q=[];for(let dt=M,mt=dt;dt;mt=dt,dt=dt.walk()){const St=dt;W(z,Lt=>Lt(St)),It(St.parent)&&St!==M?dt=mt:Q.push(St)}for(let dt=Q.length-1;dt>=0;dt--){const mt=Q[dt];W(G,St=>St(mt))}})(E,[x,P],[A,y?M=>{return G=N,void(Wv(e,z=M)&&G.push(z));var z,G}:xt]),N.reverse(),y&&N.length>0)if(f.context){const{pass:M,fail:z}=Qn(N,G=>G.parent===E);am(z,e,P),f.invalid=M.length>0}else am(N,e,P);const F=((M,z)=>{var G;const Q=null!==(G=z.forced_root_block)&&void 0!==G?G:M.forced_root_block;return!1===Q?"":!0===Q?"p":Q})(r,f);return F&&("body"===E.name||f.isRootContent)&&((M,z)=>{const G=Y0(K0("script,style,head,html,body,title,meta,param"),e.getBlockElements()),Q=/^[ \t\r\n]+/,dt=/[ \t\r\n]+$/;let mt=M.firstChild,St=null;const Lt=at=>{var yt,bt;at&&(mt=at.firstChild,mt&&3===mt.type&&(mt.value=null===(yt=mt.value)||void 0===yt?void 0:yt.replace(Q,"")),mt=at.lastChild,mt&&3===mt.type&&(mt.value=null===(bt=mt.value)||void 0===bt?void 0:bt.replace(dt,"")))};if(e.isValidChild(M.name,z.toLowerCase())){for(;mt;){const at=mt.next;p(G,mt)?(St||(St=new je(z,1),St.attr(r.forced_root_block_attrs),M.insert(St,mt)),St.append(mt)):(Lt(St),St=null),mt=at}Lt(St)}})(E,F),f.invalid||$v(L,f),E}};return((b,f)=>{const v=b.schema;f.remove_trailing_brs&&b.addNodeFilter("br",(_,k,E)=>{const x=Y.extend({},v.getBlockElements()),A=v.getNonEmptyElements(),N=v.getWhitespaceElements();x.body=1;const R=L=>L.name in x&&Xg(v,L);for(let L=0,P=_.length;L<P;L++){let F=_[L],M=F.parent;if(M&&x[M.name]&&F===M.lastChild){let z=F.prev;for(;z;){const G=z.name;if("span"!==G||"bookmark"!==z.attr("data-mce-type")){"br"===G&&(F=null);break}z=z.prev}if(F&&(F.remove(),pa(v,A,N,M))){const G=v.getElementRule(M.name);G&&(G.removeEmpty?M.remove():G.paddEmpty&&sm(E,R,M))}}else{let z=F;for(;M&&M.firstChild===z&&M.lastChild===z&&(z=M,!x[M.name]);)M=M.parent;if(z===M){const G=new je("#text",3);G.value=be,F.replace(G)}}}}),b.addAttributeFilter("href",_=>{let k=_.length;const E=x=>{const A=x?Y.trim(x):"";return/\b(noopener)\b/g.test(A)?A:A.split(" ").filter(R=>R.length>0).concat(["noopener"]).sort().join(" ")};if(!f.allow_unsafe_link_target)for(;k--;){const x=_[k];"a"===x.name&&"_blank"===x.attr("target")&&x.attr("rel",E(x.attr("rel")))}}),f.allow_html_in_named_anchor||b.addAttributeFilter("id,name",_=>{let k,E,x,A,N=_.length;for(;N--;)if(A=_[N],"a"===A.name&&A.firstChild&&!A.attr("href"))for(x=A.parent,k=A.lastChild;k&&x;)E=k.prev,x.insert(k,A),k=E}),f.fix_list_elements&&b.addNodeFilter("ul,ol",_=>{let k,E,x=_.length;for(;x--;)if(k=_[x],E=k.parent,E&&("ul"===E.name||"ol"===E.name))if(k.prev&&"li"===k.prev.name)k.prev.append(k);else{const A=new je("li",1);A.attr("style","list-style-type: none"),k.wrap(A)}});const y=v.getValidClasses();f.validate&&y&&b.addAttributeFilter("class",_=>{var k;let E=_.length;for(;E--;){const x=_[E],A=null!==(k=x.attr("class"))&&void 0!==k?k:"",N=Y.explode(A," ");let R="";for(let L=0;L<N.length;L++){const P=N[L];let F=!1,M=y["*"];M&&M[P]&&(F=!0),M=y[x.name],!F&&M&&M[P]&&(F=!0),F&&(R&&(R+=" "),R+=P)}R.length||(R=null),x.attr("class",R)}}),((_,k)=>{const{blob_cache:E}=k;if(E){const x=A=>{const N=A.attr("src");var R;(R=A).attr("src")===At.transparentSrc||et(R.attr("data-mce-placeholder"))||(R=>et(R.attr("data-mce-bogus")))(A)||It(N)||q0(E,N,!0).each(R=>{A.attr("src",R.blobUri())})};_.addAttributeFilter("src",A=>W(A,x))}})(b,f)})(m,r),(f=r).inline_styles&&((t,e,n)=>{var o;const r=Pd();var s,i,a;e.convert_fonts_to_spans&&(s=t,i=r,a=Y.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{W(l,c=>{const d=i.parse(c.attr("style")),u=c.attr("color"),g=c.attr("face"),p=c.attr("size");var m;u&&(d.color=u),g&&(d["font-family"]=g),p&&Es(p).each(m=>{d["font-size"]=a[m-1]}),c.name="span",c.attr("style",i.serialize(d)),m=c,W(["color","face","size"],f=>{m.attr(f,null)})})})),((s,i,a)=>{s.addNodeFilter("strike",l=>{const c="html4"!==i.type;W(l,d=>{if(c)d.name="s";else{const u=a.parse(d.attr("style"));u["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(u))}})})})(t,n,r)})(m,f,e),m;var f},G0=(t,e)=>{const n=rc(r=t)?dr({validate:!1}).serialize(r):r,o=e(n);var r;if(o.isDefaultPrevented())return o;if(rc(t)){if(o.content!==n){const r=Ys({validate:!1,forced_root_block:!1}).parse(o.content,{context:t.name});return{...o,content:r}}return{...o,content:t}}return o},Q0=(t,e)=>{if(e.no_events)return Me.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?Me.error(fb(t,{content:"",...n}).content):Me.value(n)}},J0=(t,e,n)=>n.no_events?e:G0(e,o=>fb(t,{...n,content:o})).content,Pm=(t,e)=>{if(e.no_events)return Me.value(e);{const n=G0(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s});return n.isDefaultPrevented()?(mb(t,n),Me.error(void 0)):Me.value(n)}},Im=(t,e,n)=>{n.no_events||mb(t,{...n,content:e})},Mm=(t,e,n)=>({element:t,width:e,rows:n}),Z0=(t,e)=>({element:t,cells:e}),jS=(t,e)=>({x:t,y:e}),ty=(t,e)=>en(t,e).bind(Es).getOr(1),US=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},ey=t=>he(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),ny=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(kt(r[s],e))return C.some(jS(s,o))}return C.none()},oy=(t,e,n,o,r)=>{const s=[],i=t.rows;for(let a=n;a<=r;a++){const l=i[a].cells,c=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(Z0(i[a].element,c))}return s},zS=t=>((e,n)=>{const o=Ps(e.element),r=V("tbody");return Ir(r,n),de(o,r),o})(t,Et(t.rows,n=>{const o=Et(n.cells,s=>{const i=Ch(s);return se(i,"colspan"),se(i,"rowspan"),i}),r=Ps(n.element);return Ir(r,o),r})),ry=()=>Su([]),mc=(t,e)=>e>=0&&e<t.length&&zs(t.charAt(e)),sy=t=>To(t.innerText),iy=t=>ot(t)?t.outerHTML:K(t)?or.encodeRaw(t.data,!1):tr(t)?"\x3c!--"+t.data+"--\x3e":"",WS=So(()=>document.implementation.createHTMLDocument("undo")),fc=t=>{const e=(n=t.getBody(),gt(Et(Le(n.childNodes),iy),s=>s.length>0));var n;const o=$e(e,s=>{const i=Gb(t.serializer,s);return i.length>0?[i]:[]}),r=o.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(r)},Fm=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;W(n,s=>{var i,a;0===s[0]?r++:1===s[0]?(((i,a,l)=>{const c=(d=>{let u;const g=document.createElement("div"),p=document.createDocumentFragment();for(d&&(g.innerHTML=d);u=g.firstChild;)p.appendChild(u);return p})(a);i.hasChildNodes()&&l<i.childNodes.length?i.insertBefore(c,i.childNodes[l]):i.appendChild(c)})(o,s[1],r),r++):2===s[0]&&(a=r,(i=o).hasChildNodes()&&a<i.childNodes.length&&i.removeChild(i.childNodes[a]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),i=new Array(r),a=(u,g,p,m,b)=>{const f=c(u,g,p,m);if(null===f||f.start===g&&f.diag===g-m||f.end===u&&f.diag===u-p){let v=u,y=p;for(;v<g||y<m;)v<g&&y<m&&n[v]===o[y]?(b.push([0,n[v]]),++v,++y):g-u>m-p?(b.push([2,n[v]]),++v):(b.push([1,o[y]]),++y)}else{a(u,f.start,p,f.start-f.diag,b);for(let v=f.start;v<f.end;++v)b.push([0,n[v]]);a(f.end,g,f.end-f.diag,m,b)}},l=(u,g,p,m)=>{let b=u;for(;b-g<m&&b<p&&n[b]===o[b-g];)++b;return{start:u,end:b,diag:g}},c=(u,g,p,m)=>{const b=g-u,f=m-p;if(0===b||0===f)return null;const v=b-f,y=f+b,_=(y%2==0?y:y+1)/2;let k,E,x,A,N;for(s[1+_]=u,i[1+_]=g+1,k=0;k<=_;++k){for(E=-k;E<=k;E+=2){for(x=E+_,s[x]=E===-k||E!==k&&s[x-1]<s[x+1]?s[x+1]:s[x-1]+1,A=s[x],N=A-u+p-E;A<g&&N<m&&n[A]===o[N];)s[x]=++A,++N;if(v%2!=0&&v-k<=E&&E<=v+k&&i[x-v]<=s[x])return l(i[x-v],E+u-p,g,m)}for(E=v-k;E<=v+k;E+=2){for(x=E+_-v,i[x]=E===v-k||E!==v+k&&i[x+1]<=i[x-1]?i[x+1]-1:i[x-1],A=i[x]-1,N=A-u+p-E;A>=u&&N>=p&&n[A]===o[N];)i[x]=A--,N--;if(v%2==0&&-k<=E&&E<=k&&i[x]<=s[x+v])return l(i[x],E+u-p,g,m)}}return null},d=[];return a(0,n.length,0,o.length,d),d})(Et(Le(e.childNodes),iy),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!et(o)||!Ip(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},jm=t=>"fragmented"===t.type?t.fragments.join(""):t.content,ay=t=>{const e=V("body",WS());return cl(e,jm(t)),W(Te(e,"*[data-mce-bogus]"),Jo),_g(e)},Um=(t,e)=>{return!(!t||!e)&&(o=e,!(jm(t)!==jm(o))||((n,o)=>ay(n)===ay(o))(t,e));var o},zm=t=>0===t.get(),gc=(t,e,n)=>{zm(n)&&(t.typing=e)},ly=(t,e)=>{t.typing&&(gc(t,!1,e),t.add())},cy=t=>({init:{bindEvents:xt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(zm(e)&&s.set(Xd(o.selection)));var o,s},add:(e,n,o,r,s,i)=>((a,l,c,d,u,g,p)=>{const m=fc(a),b=Y.extend(g||{},m);if(!zm(d)||a.removed)return null;const f=l.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:b,lastLevel:f,originalEvent:p}).isDefaultPrevented()||f&&Um(f,b))return null;l.data[c.get()]&&u.get().each(_=>{l.data[c.get()].beforeBookmark=_});const v=ox(a);if(v&&l.data.length>v){for(let _=0;_<l.data.length-1;_++)l.data[_]=l.data[_+1];l.data.length--,c.set(l.data.length)}b.bookmark=Xd(a.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const y={level:b,lastLevel:f,originalEvent:p};return c.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",y),a.dispatch("change",y)):a.dispatch("AddUndo",y),b})(t,e,n,o,r,s,i),undo:(e,n,o)=>((r,s,i,a)=>{let l;return s.typing&&(s.add(),s.typing=!1,gc(s,!1,i)),a.get()>0&&(a.set(a.get()-1),l=s.data[a.get()],Fm(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let i;return r.get()<s.length-1&&(r.set(r.get()+1),i=s[r.get()],Fm(o,i,!1),o.setDirty(!0),o.dispatch("Redo",{level:i})),i})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!Um(fc(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return i=o,ly(r=e,n),r.beforeChange(),r.ignore(i),r.add();var r,i},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,i,a,l,c)=>{if(i.transact(l)){const d=i.data[a.get()].bookmark,u=i.data[a.get()-1];Fm(s,u,!0),i.transact(c)&&(i.data[a.get()-1].beforeBookmark=d)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>hm(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const i=[],a={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const u=r[d];!a[u]&&uo(o,c,u,s)&&(a[u]=!0,i.push(u))}},o.dom.getRoot()),i})(t,e,n),matchNode:(e,n,o,r)=>uo(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r){const i=n.selection.getStart(),a=$l(s,i);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!vn(c))return!0;for(let d=a.length-1;d>=0;d--)if(s.is(a[d],c.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>kt(s,S(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>mm(S(s),i=>cn(o,a=>{return uo(n,i.dom,c=a)?C.some(c):C.none();var c}),r)).getOrNull()})(t,e),apply:(e,n,o)=>E0(t,e,n,o),remove:(e,n,o,r)=>w0(t,e,n,o,r),toggle:(e,n,o)=>((r,s,i,a)=>{const l=r.formatter.get(s);l&&(!hm(r,s,i,a)||"toggle"in l[0]&&!l[0].toggle?E0(r,s,i,a):w0(r,s,i,a))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((g,p,m,b,f,v)=>{const y=p.get();W(m.split(","),_=>{const k=Mt(y,_).getOrThunk(()=>{const x={withSimilar:{state:ue(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ue(!1),similar:!1,callbacks:[]},withVars:[]};return y[_]=x,x}),E=()=>{const x=R0(g);return A0(g,x,_,f,v).isSome()};if(zt(v)){const x=f?k.withSimilar:k.withoutSimilar;x.callbacks.push(b),1===x.callbacks.length&&x.state.set(E())}else k.withVars.push({state:ue(E()),similar:f,vars:v,callback:b})}),p.set(y)})(t,a=e,l=n,c=o,r,s),{unbind:()=>((g,p,m)=>{const b=g.get();W(p.split(","),f=>Mt(b,f).each(v=>{b[f]={withSimilar:{...v.withSimilar,callbacks:gt(v.withSimilar.callbacks,y=>y!==m)},withoutSimilar:{...v.withoutSimilar,callbacks:gt(v.withoutSimilar.callbacks,y=>y!==m)},withVars:gt(v.withVars,y=>y.callback!==m)}})),g.set(b)})(a,l,c)};var a,l,c}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(J("tree"===o.format?new je("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?Y.trim(SE(t.serializer,n.innerHTML)):"text"===e.format?((r,s)=>{const i=r.getDoc(),a=Go(S(r.getBody())),l=V("div",i);re(l,"data-mce-bogus","all"),al(l,{position:"fixed",left:"-9999999px",top:"0"}),cl(l,s.innerHTML),Qb(l),Jb(l);const c=fd(u=a)?u:S(Ne(u).dom.body);var u;de(c,l);const d=To(l.dom.innerText);return qt(l),d})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const i=nn(r),a=new RegExp(`^(<${i}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${i}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(a,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!gl(S(n))&&ft(o)?Y.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,C.from((o=t).getBody()).map(i=>rc(r)?((a,l,c,d)=>{qv(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);const u=dr({validate:!1},a.schema).serialize(c),g=gl(S(l))?u:Y.trim(u);return um(a,g,d.no_selection),{content:c,html:g}})(o,i,r,s):((a,l,c,d)=>{if(0===c.length||/^\s+$/.test(c)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+u+"</li>");const g=nn(a);return a.schema.isValidChild(l.nodeName.toLowerCase(),g.toLowerCase())?(c=u,c=a.dom.createHTML(g,Qi(a),c)):c||(c=u),um(a,c,d.no_selection),{content:c,html:c}}{"raw"!==d.format&&(c=dr({validate:!1},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0})));const u=gl(S(l))?c:Y.trim(c);return um(a,u,d.no_selection),{content:u,html:u}}})(o,i,r,s)).getOr({content:r,html:rc(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>tS(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=et(o)?o:n.getBody();W(r.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const a=lx(n),l=r.getAttrib(i,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(i,a):r.addClass(i,a);break;case"A":if(!r.getAttrib(i,"href")){const c=r.getAttrib(i,"name")||i.id,d=up(n);c&&n.hasVisual?r.addClass(i,d):r.removeClass(i,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const i=(a=s,l=r,{...a,format:l,get:!0,selection:!0,getInner:!0});var a,l;return Q0(o,i).fold(Ce,a=>{const l=((c,d)=>{if("text"===d.format)return C.from((u=c).selection.getRng()).map(g=>{var p;const m=C.from(u.dom.getParent(g.commonAncestorContainer,u.dom.isBlock)),b=u.getBody(),f=m.map(x=>x.nodeName).getOr("div").toLowerCase(),v=S(g.cloneContents());Qb(v),Jb(v);const y=u.dom.add(b,f,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},v.dom),_=sy(y),k=To(null!==(p=y.textContent)&&void 0!==p?p:"");if(u.dom.remove(y),mc(k,0)||mc(k,k.length-1)){const E=m.getOr(b),x=sy(E),A=x.indexOf(_);return-1===A?_:(mc(x,A-1)?" ":"")+_+(mc(x,A+_.length)?" ":"")}return _}).getOr("");var u;{const u=((g,p)=>{const m=g.selection.getRng(),b=g.dom.create("body"),f=g.selection.getSel(),v=Mu(g,uu(f)),y=p.contextual?((t,e)=>{const n=$p(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],Di(o,"table",rt(kt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(i=>{const a=Mm(Ps(i),0,[]);return W(Te(i,"tr"),(l,c)=>{W(Te(l,"td,th"),(d,u)=>{((g,p,m,b,f)=>{const v=ty(f,"rowspan"),y=ty(f,"colspan"),_=g.rows;for(let k=m;k<m+v;k++){_[k]||(_[k]=Z0(Ch(b),[]));for(let E=p;E<p+y;E++)_[k].cells[E]=k===m&&E===p?f:Ps(f)}})(a,((g,p,m)=>{for(;US(g,p,m);)p++;return p})(a,u,c),c,l,d)})}),Mm(a.element,ey(a.rows),a.rows)})(n);return(i=s,a=o,l=r,ny(i,a).bind(c=>ny(i,l).map(d=>((u,g,p)=>{const m=g.x,b=g.y,f=p.x,v=p.y,y=b<v?oy(u,m,b,f,v):oy(u,m,v,f,b);return Mm(u.element,ey(y),y)})(i,c,d)))).map(i=>Su([zS(i)]));var i,a,l}).getOrThunk(ry);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?ry():(s=o,((a,l)=>{const c=he(l,(d,u)=>(de(u,d),u),a);return l.length>0?Su([c]):c})(S((i=r[0]).cloneContents()),((t,e)=>{const n=S(e.commonAncestorContainer),o=Bo(n,t),r=gt(o,Pw),s=(l=e,ne(a=o,c=>"li"===Ft(c)&&fu(c,l)).fold(J([]),c=>{return(d=a,ne(d,u=>"ul"===Ft(u)||"ol"===Ft(u))).map(d=>{const u=V(Ft(d)),g=qo(pg(d),(p,m)=>oe(m,"list-style"));return al(u,g),[V("li"),u]}).getOr([]);var d})),i=r.concat(s.length?s:(a=>Ii(a)?Re(a).filter(wd).fold(J([]),l=>[a,l]):wd(a)?[a]:[])(n));var a,l;return Et(i,Ps)})(s,i))));var o,r,s,i})(S(g.getBody()),v).dom:m.cloneContents();return y&&b.appendChild(y),g.selection.serializer.serialize(b,p)})(c,d);return"tree"===d.format?u:c.selection.isCollapsed()?"":u}})(o,a);return J0(o,l,a)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Kb(S(t.getBody())).isNone()){const o=D('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());de(o,S(e.extractContents())),e.insertNode(o.dom),Re(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const i=a=>{const l=ye(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(s(d))return C.some(d);const u=i(d);if(u.isSome())return u}return C.none()};return i(r)})(n,Vb)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Ft(s=r)?1:Pg(s).fold(()=>ye(s).length,i=>i.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=S(t.getBody()),Kb(n).each(o=>{const r=e.selection.getBookmark();Jo(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),fo=t=>Ct(t.plugins,"rtc"),Hm=t=>t.rtcInstance?t.rtcInstance:cy(t),Qt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},dy=t=>Qt(t).init.bindEvents(),uy=t=>0===t.dom.length?(qt(t),C.none()):C.some(t),my=(t,e,n,o)=>{t.bind(r=>((o?Ku:tc)(r.dom,o?r.dom.length:0),e.filter(Pe).map(s=>((i,a,l,c)=>{const d=i.dom,u=a.dom,g=c?d.length:u.length;c?(Yu(d,u,!1,!c),l.setStart(u,g)):(Yu(u,d,!1,!c),l.setEnd(u,g))})(r,s,n,o)))).orThunk(()=>{return(s=e,i=o,s.filter(a=>aa.isBookmarkNode(a.dom)).bind(i?Pr:We)).or(e).filter(Pe).map(s=>((i,a)=>{Re(i).each(l=>{const c=i.dom;a&&fa(l,j(c,0))?tc(c,0):!a&&ga(l,j(c,c.length))&&Ku(c,c.length)})})(s,o));var s,i})},fy=(t,e,n)=>{if(Ct(t,e)){const o=gt(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},gy=t=>!(!t||!t.ownerDocument)&&ke(S(t.ownerDocument),S(t)),hy=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:i}=((f,v)=>{let y,_;const k=(x,A)=>ne(A,N=>f.is(N,x)),E=x=>f.getParents(x,void 0,f.getRoot());return{selectorChangedWithUnbind:(x,A)=>(y||(y={},_={},v.on("NodeChange",N=>{const R=N.element,L=E(R),P={};Dt(y,(F,M)=>{k(M,L).each(z=>{_[M]||(W(F,G=>{G(!0,{node:z,selector:M,parents:L})}),_[M]=F),P[M]=F})}),Dt(_,(F,M)=>{P[M]||(delete _[M],W(F,z=>{z(!1,{node:R,selector:M,parents:L})}))})})),y[x]||(y[x]=[]),y[x].push(A),k(x,E(v.selection.getStart())).each(()=>{_[x]=y[x]}),{unbind:()=>{fy(y,x,A),fy(_,x,A)}})}})(t,o),a=(f,v)=>((y,_,k={})=>{const E=(x=k,A=_,{format:"html",...x,set:!0,selection:!0,content:A});var x,A;Pm(y,E).each(x=>{const A=((R,L)=>{if("raw"!==L.format){const P=R.selection.getRng(),F=R.dom.getParent(P.commonAncestorContainer,R.dom.isBlock),M=F?{context:F.nodeName.toLowerCase()}:{},z=R.parser.parse(L.content,{forced_root_block:!1,...M,...L});return dr({validate:!1},R.schema).serialize(z)}return L.content})(y,x),N=y.selection.getRng();((R,L)=>{const P=C.from(L.firstChild).map(S),F=C.from(L.lastChild).map(S);R.deleteContents(),R.insertNode(L);const M=P.bind(We).filter(Pe).bind(uy),z=F.bind(Pr).filter(Pe).bind(uy);my(M,P,R,!0),my(z,F,R,!1),R.collapse(!1)})(N,N.createContextualFragment(A)),y.selection.setRng(N),da(y,N),Im(y,A,x)})})(o,f,v),l=f=>{const v=d();v.collapse(!!f),u(v)},c=()=>e.getSelection?e.getSelection():e.document.selection,d=()=>{let f;const v=(_,k,E)=>{try{return k.compareBoundaryPoints(_,E)}catch{return-1}},y=e.document;if(et(o.bookmark)&&!ns(o)){const _=Bu(o);if(_.isSome())return _.map(k=>Mu(o,[k])[0]).getOr(y.createRange())}try{const _=c();_&&!ul(_.anchorNode)&&(f=_.rangeCount>0?_.getRangeAt(0):y.createRange(),f=Mu(o,[f])[0])}catch{}if(f||(f=y.createRange()),Li(f.startContainer)&&f.collapsed){const _=t.getRoot();f.setStart(_,0),f.setEnd(_,0)}return r&&s&&(0===v(f.START_TO_START,f,r)&&0===v(f.END_TO_END,f,r)?f=s:(r=null,s=null)),f},u=(f,v)=>{if(!((_=f)&&gy(_.startContainer)&&gy(_.endContainer)))return;var _;const y=c();if(f=o.dispatch("SetSelectionRange",{range:f,forward:v}).range,y){s=f;try{y.removeAllRanges(),y.addRange(f)}catch{}!1===v&&y.extend&&(y.collapse(f.endContainer,f.endOffset),y.extend(f.startContainer,f.startOffset)),r=y.rangeCount>0?y.getRangeAt(0):null}if(!f.collapsed&&f.startContainer===f.endContainer&&y?.setBaseAndExtent&&f.endOffset-f.startOffset<2&&f.startContainer.hasChildNodes()){const _=f.startContainer.childNodes[f.startOffset];_&&"IMG"===_.nodeName&&(y.setBaseAndExtent(f.startContainer,f.startOffset,f.endContainer,f.endOffset),y.anchorNode===f.startContainer&&y.focusNode===f.endContainer||y.setBaseAndExtent(_,0,_,1))}o.dispatch("AfterSetSelectionRange",{range:f,forward:v})},g=()=>{const f=c(),v=f?.anchorNode,y=f?.focusNode;if(!f||!v||!y||ul(v)||ul(y))return!0;const _=t.createRng(),k=t.createRng();try{_.setStart(v,f.anchorOffset),_.collapse(!0),k.setStart(y,f.focusOffset),k.collapse(!0)}catch{return!0}return _.compareBoundaryPoints(_.START_TO_START,k)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(f={type:"word"})=>u(es(t).expand(d(),f)),collapse:l,setCursorLocation:(f,v)=>{const y=t.createRng();et(f)&&et(v)?(y.setStart(f,v),y.setEnd(f,v),u(y),l(!1)):(gu(t,y,o.getBody(),!0),u(y))},getContent:f=>((v,y={})=>{return k=y.format?y.format:"html",E=y,Qt(v).selection.getContent(k,E);var k,E})(o,f),setContent:a,getBookmark:(f,v)=>m.getBookmark(f,v),moveToBookmark:f=>m.moveToBookmark(f),select:(f,v)=>{return(y=t,_=f,k=v,C.from(_).bind(E=>C.from(E.parentNode).map(x=>{const A=y.nodeIndex(E),N=y.createRng();return N.setStart(x,A),N.setEnd(x,A+1),k&&(gu(y,N,E,!0),gu(y,N,E,!1)),N}))).each(u),f;var y,_,k},isCollapsed:()=>{const f=d(),v=c();return!(!f||f.item)&&(f.compareEndPoints?0===f.compareEndPoints("StartToEnd",f):!v||f.collapsed)},isForward:g,setNode:f=>(a(t.getOuterHTML(f)),f),getNode:()=>((f,v)=>{if(!v)return f;let y=v.startContainer,_=v.endContainer;const k=v.startOffset,E=v.endOffset;let x=v.commonAncestorContainer;v.collapsed||(y===_&&E-k<2&&y.hasChildNodes()&&(x=y.childNodes[k]),K(y)&&K(_)&&(y=y.length===k?qb(y.nextSibling,!0):y.parentNode,_=0===E?qb(_.previousSibling,!1):_.parentNode,y&&y===_&&(x=y)));const A=K(x)?x.parentNode:x;return ot(A)?A:f})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:f=>Hb(o.getBody(),d(),f),getEnd:f=>$b(o.getBody(),d(),f),getSelectedBlocks:(f,v)=>((y,_,k,E)=>{const x=[],A=y.getRoot(),N=y.getParent(k||Hb(A,_,_.collapsed),y.isBlock),R=y.getParent(E||$b(A,_,_.collapsed),y.isBlock);if(N&&N!==A&&x.push(N),N&&R&&N!==R){let L=N;const P=new ie(N,A);for(;(L=P.next())&&L!==R;)y.isBlock(L)&&x.push(L)}return R&&N!==R&&R!==A&&x.push(R),x})(t,d(),f,v),normalize:()=>{const f=d(),v=c();if(!(uu(v).length>1)&&Ul(o)){const y=Yl(t,f);return y.each(_=>{u(_,g())}),y.getOr(f)}return f},selectorChanged:(f,v)=>(i(f,v),p),selectorChangedWithUnbind:i,getScrollContainer:()=>{let f,v=t.getRoot();for(;v&&"BODY"!==v.nodeName;){if(v.scrollHeight>v.clientHeight){f=v;break}v=v.parentNode}return f},scrollIntoView:(f,v)=>{var y;et(f)?((y=o).inline?fE:hE)(y,f,v):da(o,d(),v)},placeCaretAt:(f,v)=>u(Cb(f,v,o.getDoc())),getBoundingClientRect:()=>{const f=d();return f.collapsed?j.fromRangeStart(f).getClientRects()[0]:f.getBoundingClientRect()},destroy:()=>{e=r=s=null,b.destroy()}},m=aa(p),b=pb(p,o);return p.bookmarkManager=m,p.controlSelection=b,p},KS=(t,e,n)=>{-1===Y.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},py=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o=e&&e.dom?e.dom:Pt.DOM,r=e&&e.schema?e.schema:rr(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;const s=Ys(t,r);return a=t,l=o,(i=s).addAttributeFilter("data-mce-tabindex",(c,d)=>{let u=c.length;for(;u--;){const g=c[u];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(d,null)}}),i.addAttributeFilter("src,href,style",(c,d)=>{const u="data-mce-"+d,g=a.url_converter,p=a.url_converter_scope;let m=c.length;for(;m--;){const b=c[m];let f=b.attr(u);void 0!==f?(b.attr(d,f.length>0?f:null),b.attr(u,null)):(f=b.attr(d),"style"===d?f=l.serializeStyle(l.parseStyle(f),b.name):g&&(f=g.call(p,f,d,b.name)),b.attr(d,f.length>0?f:null))}}),i.addAttributeFilter("class",c=>{let d=c.length;for(;d--;){const u=c[d];let g=u.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",g.length>0?g:null))}}),i.addAttributeFilter("data-mce-type",(c,d,u)=>{let g=c.length;for(;g--;){const p=c[g];"bookmark"===p.attr("data-mce-type")&&!u.cleanup&&(C.from(p.firstChild).exists(b=>{var f;return!hl(null!==(f=b.value)&&void 0!==f?f:"")})?p.unwrap():p.remove())}}),i.addNodeFilter("noscript",c=>{var d;let u=c.length;for(;u--;){const g=c[u].firstChild;g&&(g.value=or.decode(null!==(d=g.value)&&void 0!==d?d:""))}}),i.addNodeFilter("script,style",(c,d)=>{var u;const g=m=>m.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let p=c.length;for(;p--;){const m=c[p],b=m.firstChild,f=null!==(u=b?.value)&&void 0!==u?u:"";if("script"===d){const v=m.attr("type");v&&m.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===a.element_format&&b&&f.length>0&&(b.value="// <![CDATA[\n"+g(f)+"\n// ]]>")}else"xhtml"===a.element_format&&b&&f.length>0&&(b.value="\x3c!--\n"+g(f)+"\n--\x3e")}}),i.addNodeFilter("#comment",c=>{let d=c.length;for(;d--;){const u=c[d],g=u.value;a.preserve_cdata&&0===g?.indexOf("[CDATA[")?(u.name="#cdata",u.type=4,u.value=l.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):0===g?.indexOf("mce:protected ")&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(g).substr(14))}}),i.addNodeFilter("xml:namespace,input",(c,d)=>{let u=c.length;for(;u--;){const g=c[u];7===g.type?g.remove():1===g.type&&("input"!==d||g.attr("type")||g.attr("type","text"))}}),i.addAttributeFilter("data-mce-type",c=>{W(c,d=>{"format-caret"===d.attr("data-mce-type")&&(d.isEmpty(i.schema.getNonEmptyElements())?d.remove():d.unwrap())})}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(c,d)=>{let u=c.length;for(;u--;)c[u].attr(d,null)}),{schema:r,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(i,a={})=>{const l={format:"html",...a},c=(p=i,f=m=l,et(b=g=e)&&b.hasEventListeners("PreProcess")&&!f.no_events?((b,f,v)=>{let y;const _=b.dom;let k=f.cloneNode(!0);const E=document.implementation;if(E.createHTMLDocument){const x=E.createHTMLDocument("");Y.each("BODY"===k.nodeName?k.childNodes:[k],A=>{x.body.appendChild(x.importNode(A,!0))}),k="BODY"!==k.nodeName?x.body.firstChild:x.body,y=_.doc,_.doc=x}return A={...v,node:k},b.dispatch("PreProcess",A),y&&(_.doc=y),k;var A})(g,p,m):p),d=((g,p,m)=>{const b=To(m.getInner?p.innerHTML:g.getOuterHTML(p));return m.selection||gl(S(p))?b:Y.trim(b)})(o,c,l),u=((g,p,m)=>{const b=m.selection?{forced_root_block:!1,...m}:m,f=g.parse(p,b);return(v=>{const y=k=>"br"===k?.name,_=v.lastChild;if(y(_)){const k=_.prev;y(k)&&(_.remove(),k.remove())}})(f),f})(s,d,l);var g,p,m,b,f;return"tree"===l.format?u:((g,p,m,b,f)=>{var k;return((y,_,k)=>{return!_.no_events&&y?(x=y,A={..._,content:k},x.dispatch("PostProcess",A)).content:k;var x,A})(g,f,(k=b,dr(p,m).serialize(k)))})(e,t,r,u,l)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:rt(KS,s,n),getTempAttrs:J(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var i,a,l})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},$m=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return Pm(t,o).map(r=>{const s=(a=r.content,l=r,Hm(t).editor.setContent(a,l));var a,l;return Im(t,s.html,r),s.content}).getOr(e)},XS="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),GS="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),hc=Pt.DOM,pc=t=>C.from(t).each(e=>e.destroy()),bc=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Ct(t,e)}})(),Xs=Oe.ModelManager,by=(t,e)=>e.dom[t],vy=(t,e)=>parseInt(no(e,t),10),ZS=rt(by,"clientWidth"),tN=rt(by,"clientHeight"),eN=rt(vy,"margin-top"),nN=rt(vy,"margin-left"),yy=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>C.from(e[0]),r=()=>{W(e,l=>{l.reposition()})},s=l=>{Cr(e,c=>c===l).each(c=>{e.splice(c,1)})},i=(l,c=!0)=>{return t.removed||!(u=(d=t).inline?d.getBody():d.getContentAreaContainer(),C.from(u).map(S)).map(As).getOr(!1)?{}:(c&&t.dispatch("BeforeOpenNotification",{notification:l}),ne(e,d=>{return!((u=n().getArgs(d)).type!==(g=l).type||u.text!==g.text||u.progressBar||u.timeout||g.progressBar||g.timeout);var u,g}).getOrThunk(()=>{t.editorManager.setActive(t);const d=n().open(l,()=>{s(d),r(),o().fold(()=>t.focus(),u=>Lb(S(u.getEl())))});return(u=>{e.push(u)})(d),r(),t.dispatch("OpenNotification",{notification:{...d}}),d}));var d,u},a=J(e);return(l=t).on("SkinLoaded",()=>{const c=Vk(l);c&&i({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{W(e.slice(),c=>{n().close(c)})}),{open:i,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:a};var l},Gs=Oe.PluginManager,cs=Oe.ThemeManager,_y=t=>{let e=[];const n=()=>{const i=t.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},o=(i,a)=>(...l)=>a?a.apply(i,l):void 0,r=i=>{t.dispatch("CloseWindow",{dialog:i}),e=gt(e,a=>a!==i),0===e.length&&t.focus()},s=i=>{t.editorManager.setActive(t),Du(t),t.ui.show();const a=i();return e.push(l=a),t.dispatch("OpenWindow",{dialog:l}),a;var l};return t.on("remove",()=>{W(e,i=>{n().close(i)})}),{open:(i,a)=>s(()=>n().open(i,a,r)),openUrl:i=>s(()=>n().openUrl(i,r)),alert:(i,a,l)=>{const c=n();c.alert(i,o(l||c,a))},confirm:(i,a,l)=>{const c=n();c.confirm(i,o(l||c,a))},close:()=>{C.from(e[e.length-1]).each(i=>{n().close(i),r(i)})}}},Cy=(t,e)=>{t.notificationManager.open({type:"error",text:e})},vc=(t,e)=>{t._skinLoaded?Cy(t,e):t.on("SkinLoaded",()=>{Cy(t,e)})},_a=(t,e,n)=>{cb(t,e,{message:n}),console.error(n)},Ca=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,yc=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},wy=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return Et(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},oN=Gt,ky=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let sN=0;const xy=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Ey=(t,e)=>((t,e)=>{const n={},o=(l,c)=>new Promise((d,u)=>{const g=new XMLHttpRequest;g.open("POST",e.url),g.withCredentials=e.credentials,g.upload.onprogress=m=>{c(m.loaded/m.total*100)},g.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+g.status)},g.onload=()=>{if(g.status<200||g.status>=300)return void u("HTTP Error: "+g.status);const m=JSON.parse(g.responseText);var b,f;m&&ft(m.location)?d((f=m.location,(b=e.basePath)?b.replace(/\/$/,"")+"/"+f.replace(/^\//,""):f)):u("Invalid JSON: "+g.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),g.send(p)}),r=Rt(e.handler)?e.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),i=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),a=(l,c)=>{Y.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>{return e.url||r!==o?(u=c,d=Y.grep(d=l,g=>!t.isUploaded(g.blobUri())),Promise.all(Y.map(d,g=>{return t.isPending(g.blobUri())?(p=>{const m=p.blobUri();return new Promise(b=>{n[m]=n[m]||[],n[m].push(b)})})(g):(m=r,b=u,t.markPending((p=g).blobUri()),new Promise(f=>{let v,y;try{const _=()=>{v&&(v.close(),y=xt)},k=x=>{_(),t.markUploaded(p.blobUri(),x),a(p.blobUri(),s(p,x)),f(s(p,x))},E=x=>{_(),t.removeFailed(p.blobUri()),a(p.blobUri(),i(p,x)),f(i(p,x))};y=x=>{x<0||x>100||C.from(v).orThunk(()=>C.from(b).map(vs)).each(A=>{v=A,A.progressBar.value(x)})},m(p,y).then(k,x=>{E(ft(x)?{message:x}:x)})}catch(_){f(i(p,_))}}));var p,m,b}))):new Promise(d=>{d([])});var d,u}}})(e,{url:Dk(t),basePath:Bk(t),credentials:Lk(t),handler:Pk(t)}),Sy={remove_similar:!0,inherit:!1},Qs={selector:"td,th",...Sy},lN={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Qs},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Qs},tablecellbordercolor:{styles:{borderColor:"%value"},...Qs},tablecellclass:{classes:["%value"],...Qs},tableclass:{selector:"table",classes:["%value"],...Sy},tablecellborderstyle:{styles:{borderStyle:"%value"},...Qs},tablecellborderwidth:{styles:{borderWidth:"%value"},...Qs}},cN=J(lN),_c=Y.each,Cn=Pt.DOM,qm=t=>et(t)&&le(t),Ny=(t,e)=>{const n=e&&e.schema||rr({}),o=i=>{const a=ft(i)?{name:i,classes:[],attrs:{}}:i,l=Cn.create(a.name);return c=l,(d=a).classes.length>0&&Cn.addClass(c,d.classes.join(" ")),Cn.setAttribs(c,d.attrs),l;var c,d},r=(i,a,l)=>{let c;const d=a[0],u=qm(d)?d.name:void 0,g=((b,f)=>{const y=n.getElementRule(b.nodeName.toLowerCase())?.parentsRequired;return!(!y||!y.length)&&(f&&Bt(y,f)?f:y[0])})(i,u);if(g)u===g?(c=d,a=a.slice(1)):c=g;else if(d)c=d,a=a.slice(1);else if(!l)return i;const p=c?o(c):Cn.create("div");p.appendChild(i),l&&Y.each(l,b=>{const f=o(b);p.insertBefore(f,i)});const m=qm(c)?c.siblings:void 0;return r(p,a,m)},s=Cn.create("div");if(t.length>0){const i=t[0],a=o(i),l=qm(i)?i.siblings:void 0;s.appendChild(r(a,t.slice(1),l))}return s},dN=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=Y.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,i,a)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==Y.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===i){const l=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},uN=(t,e)=>{let n="",o=Xk(t);if(""===o)return"";const r=p=>ft(p)?p.replace(/%(\w+)/g,""):"",s=(p,m)=>Cn.getStyle(m??t.getBody(),p,!0);if(ft(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let i,a=e.block||e.inline||"span";const l=ft(c=e.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Y.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const m=Y.map(p.split(/(?:~\+|~|\+)/),dN),b=m.pop();return m.length&&(b.siblings=m),b}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=a),a=e.selector,i=Ny(l,t)):i=Ny([a],t);const d=Cn.select(a,i)[0]||i.firstChild;_c(e.styles,(p,m)=>{const b=r(p);b&&Cn.setStyle(d,m,b)}),_c(e.attributes,(p,m)=>{const b=r(p);b&&Cn.setAttrib(d,m,b)}),_c(e.classes,p=>{const m=r(p);Cn.hasClass(d,m)||Cn.addClass(d,m)}),t.dispatch("PreviewFormats"),Cn.setStyles(i,{position:"absolute",left:-65535}),t.getBody().appendChild(i);const u=s("fontSize"),g=/px$/.test(u)?parseInt(u,10):0;return _c(o.split(" "),p=>{let m=s(p,d);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(m)&&(m=s(p),"#ffffff"===jl(m).toLowerCase())||"color"===p&&"#000000"===jl(m).toLowerCase())){if("font-size"===p&&/em|%$/.test(m)){if(0===g)return;m=parseFloat(m)/(/%$/.test(m)?100:1)*g+"px"}"border"===p&&m&&(n+="padding:0 2px;"),n+=p+":"+m+";"}}),t.dispatch("AfterPreviewFormats"),Cn.remove(i),n},Ay=t=>{const e=(o=>{const r={},s=(i,a)=>{i&&(ft(i)?(Xt(a)||(a=[a]),W(a,l=>{zt(l.deep)&&(l.deep=!vn(l)),zt(l.split)&&(l.split=!vn(l)||ae(l)),zt(l.remove)&&vn(l)&&!ae(l)&&(l.remove="none"),vn(l)&&ae(l)&&(l.mixed=!0,l.block_expand=!0),ft(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[i]=a):Dt(i,(l,c)=>{s(c,l)}))};return s((i=>{const a=i.dom,l=i.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[g,d,u]:[d,g,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,u,g)=>ot(d)&&d.hasAttribute("href"),onformat:(d,u,g)=>{Y.each(g,(p,m)=>{a.setAttrib(d,m,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var u;return null!==(u=d?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Y.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(cN()),s(Yk(o)),{get:i=>et(i)?r[i]:r,has:i=>Ct(r,i),register:s,unregister:i=>(i&&r[i]&&delete r[i],r)}})(t),n=ue({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{((s,i)=>{const a=s.selection,l=s.getBody();vm(s,null,!1),8!==i&&46!==i||!a.isCollapsed()||a.getStart().innerHTML!==Ks||vm(s,Jr(l,a.getStart())),37!==i&&39!==i||vm(s,Jr(l,a.getStart()))})(o,r.keyCode)}),fo(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{T0(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const i=C.from(s.node).map(a=>zl(a)?a:a.startContainer).bind(a=>ot(a)?C.some(a):C.from(a.parentElement)).getOrThunk(()=>N0(r));T0(r,i,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,Qt(t).formatter.apply(a,l,c)},remove:(o,r,s,i)=>{var l,c,d,u;l=o,c=r,d=s,u=i,Qt(t).formatter.remove(l,c,d,u)},toggle:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,Qt(t).formatter.toggle(a,l,c)},match:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,Qt(t).formatter.match(l,c,d,u);var l,c,d,u},closest:o=>{return s=o,Qt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return i=o,a=r,Qt(t).formatter.matchAll(i,a);var i,a},matchNode:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,Qt(t).formatter.matchNode(l,c,d,u);var l,c,d,u},canApply:o=>{return s=o,Qt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,i)=>{return l=n,c=o,d=r,u=s,g=i,Qt(t).formatter.formatChanged(l,c,d,u,g);var l,c,d,u,g},getCssText:rt(uN,t)};var o},Ry=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Ty=t=>{const e=sr(),n=ue(0),o=ue(0),r={data:[],typing:!1,beforeChange:()=>{var i,a;i=n,a=e,Qt(t).undoManager.beforeChange(i,a)},add:(s,i)=>{return l=r,c=o,d=n,u=e,g=s,p=i,Qt(t).undoManager.add(l,c,d,u,g,p);var l,c,d,u,g,p},dispatchChange:()=>{t.setDirty(!0);const s=fc(t);s.bookmark=Xd(t.selection),t.dispatch("change",{level:s,lastLevel:wo(r.data,o.get()).getOrUndefined()})},undo:()=>{return i=r,a=n,l=o,Qt(t).undoManager.undo(i,a,l);var i,a,l},redo:()=>{return i=o,a=r.data,Qt(t).undoManager.redo(i,a);var i,a},clear:()=>{var i,a;i=r,a=o,Qt(t).undoManager.clear(i,a)},reset:()=>{var i;i=r,Qt(t).undoManager.reset(i)},hasUndo:()=>{return i=r,a=o,Qt(t).undoManager.hasUndo(i,a);var i,a},hasRedo:()=>{return i=r,a=o,Qt(t).undoManager.hasRedo(i,a);var i,a},transact:s=>{return a=r,l=n,c=s,Qt(t).undoManager.transact(a,l,c);var a,l,c},ignore:s=>{var a,l;a=n,l=s,Qt(t).undoManager.ignore(a,l)},extra:(s,i)=>{var l,c,d,u;l=r,c=o,d=s,u=i,Qt(t).undoManager.extra(l,c,d,u)}};return fo(t)||((s,i,a)=>{const l=ue(!1),c=d=>{gc(i,!1,a),i.add({},d)};s.on("init",()=>{i.add()}),s.on("BeforeExecCommand",d=>{Ry(d.command)||(ly(i,a),i.beforeChange())}),s.on("ExecCommand",d=>{Ry(d.command)||c(d)}),s.on("ObjectResizeStart cut",()=>{i.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const u=d.keyCode;d.isDefaultPrevented()||((u>=33&&u<=36||u>=37&&u<=40||45===u||d.ctrlKey)&&(c(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&i.typing&&!Um(fc(s),i.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged()))}),s.on("keydown",d=>{const u=d.keyCode;d.isDefaultPrevented()||(u>=33&&u<=36||u>=37&&u<=40||45===u?i.typing&&c(d):!(u<16||u>20)||224===u||91===u||i.typing||d.ctrlKey&&!d.altKey||d.metaKey||(i.beforeChange(),gc(i,!0,a),i.add({},d),l.set(!0)))}),s.on("mousedown",d=>{i.typing&&c(d)}),s.on("input",d=>{var u,g;d.inputType&&("insertReplacementText"===d.inputType||"insertText"===(u=d).inputType&&null===u.data||"insertFromPaste"===(g=d).inputType||"insertFromDrop"===g.inputType)&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},mN=[9,27,ct.HOME,ct.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ct.DOWN,ct.UP,ct.LEFT,ct.RIGHT].concat(At.browser.isFirefox()?[224]:[]),Oy="data-mce-placeholder",Dy=t=>"keydown"===t.type||"keyup"===t.type,By=t=>{const e=t.keyCode;return e===ct.BACKSPACE||e===ct.DELETE},fN=(t,e)=>({from:t,to:e}),Vm=(t,e)=>{const n=S(t),o=S(e.container());return ec(n,o).map(r=>({block:r,position:e}))},Ly=(t,e)=>Mr(e,n=>Mi(n)||jn(n.dom),n=>kt(n,t)).filter(pe).getOr(t),Py=t=>{const e=(n=>{const o=ye(n);return Cr(o,Un).fold(J(o),r=>o.slice(0,r))})(t);return W(e,qt),e},Iy=(t,e)=>{const n=Bo(e,t);return ne(n.reverse(),o=>te(o)).each(qt)},gN=(t,e,n,o)=>{if(te(n))return Hr(n),Fe(n.dom);0===gt(ag(o),s=>!te(s)).length&&te(e)&&fn(o,V("br"));const r=pn(n.dom,j.before(o.dom));return W(Py(e),s=>{fn(o,s)}),Iy(t,e),r},hN=(t,e,n)=>{if(te(n))return qt(n),te(e)&&Hr(e),Fe(e.dom);const o=lo(n.dom);return W(Py(e),r=>{de(n,r)}),Iy(t,e),o},My=(t,e)=>{Us(t,e.dom).bind(n=>C.from(n.getNode())).map(S).filter(zr).each(qt)},Fy=(t,e,n)=>{return My(!0,e),My(!1,n),(o=e,r=n,ke(r,o)?((s,i)=>{const a=Bo(i,s);return C.from(a[a.length-1])})(r,o):C.none()).fold(rt(hN,t,e,n),rt(gN,t,e,n));var o,r},jy=(t,e,n,o)=>e?Fy(t,o,n):Fy(t,n,o),Wm=(t,e)=>{const n=S(t.getBody());return(r=n.dom,s=e,i=t.selection.getRng(),i.collapsed?((a,l,c)=>{const d=Vm(a,j.fromRangeStart(c)),u=d.bind(g=>hn(l,a,g.position).bind(p=>Vm(a,p).map(m=>{return b=a,f=l,Zt((v=m).position.getNode())&&!te(v.block)?Us(!1,v.block.dom).bind(y=>y.isEqual(v.position)?hn(f,b,y).bind(_=>Vm(b,_)):C.some(v)).getOr(v):v;var b,f,v})));return Jt(d,u,fN).filter(g=>{return!kt((p=g).from.block,p.to.block)&&((p,m)=>{const b=S(p);return kt(Ly(b,m.from.block),Ly(b,m.to.block))})(a,g)&&(p=>!1===Ut(p.from.block.dom)&&!1===Ut(p.to.block.dom))(g)&&(p=>{const m=b=>Ig(b)||Kg(b.dom);return m(p.from.block)&&m(p.to.block)})(g);var p})})(r,s,i):C.none()).map(r=>()=>{jy(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,i},Uy=(t,e)=>{const n=S(e),o=rt(kt,t);return Zo(n,Mi,o).isSome()},Km=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=S(t.getBody());return((n,o)=>{const r=pn(n.dom,j.fromRangeStart(o)).isNone(),s=Ke(n.dom,j.fromRangeEnd(o)).isNone();return!(Uy(i=n,(a=o).startContainer)||Uy(i,a.endContainer))&&r&&s;var i,a})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return Jt(ec(n,S(r.startContainer)),ec(n,S(r.endContainer)),(s,i)=>kt(s,i)?C.none():C.some(()=>{r.deleteContents(),jy(n,!0,s,i).each(a=>{o.setRng(a.toRange())})})).getOr(C.none())})(e,t.selection);var n})(t),Lo=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),wa=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),Ym=(t,e,n)=>e.collapsed?((o,r,s)=>{const i=ou(1,o.getBody(),r),a=j.fromRangeStart(i),l=a.getNode();if(Zi(l))return Lo(1,o,l,!a.isAtEnd(),!1);const c=a.getNode(!0);if(Zi(c))return Lo(1,o,c,!1,!1);const d=ss(o.dom.getRoot(),a.getNode());return Zi(d)?Lo(1,o,d,!1,s):C.none()})(t,e,n).getOr(e):e,bN=t=>mr(t)||ua(t),vN=t=>fr(t)||ma(t),zy=(t,e,n,o,r,s)=>{var i,a;Lo(o,t,s.getNode(!r),r,!0).each(i=>{if(e.collapsed){const a=e.cloneRange();r?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else e.deleteContents();t.selection.setRng(i)}),i=t.dom,K(a=n)&&0===a.data.length&&i.remove(a)},Xm=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!K(r.commonAncestorContainer))return C.none();const s=o?me.Forwards:me.Backwards,i=ao(n.getBody()),a=rt(ru,o?i.next:i.prev),l=o?bN:vN,c=ra(s,n.getBody(),r),d=a(c),u=d&&_n(o,d);if(!u||!Ll(c,u))return C.none();if(l(u))return C.some(()=>zy(n,r,c.getNode(),s,o,u));const g=a(u);return g&&l(g)&&Ll(u,g)?C.some(()=>zy(n,r,c.getNode(),s,o,g)):C.none()})(t,e),Gm=(t,e)=>{const n=t.getBody();return e?Fe(n).filter(mr):lo(n).filter(fr)},Qm=t=>{const e=t.selection.getRng();return!e.collapsed&&(Gm(t,!0).exists(n=>n.isEqual(j.fromRangeStart(e)))||Gm(t,!1).exists(n=>n.isEqual(j.fromRangeEnd(e))))},wn=ro([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Hy=(t,e,n)=>hn(e,t,n).bind(o=>{return r=o.getNode(),et(r)&&(Mi(S(r))||Ii(S(r)))||((s,i,a,l)=>{const c=d=>Cd(S(d))&&!so(a,l,s);return Sp(!i,a).fold(()=>Sp(i,l).fold(jt,c),c)})(t,e,n,o)?C.none():e&&Ut(o.getNode())||!e&&Ut(o.getNode(!0))?((s,i,a,l)=>{const c=l.getNode(!i);return ec(S(s),S(a.getNode())).map(d=>te(d)?wn.remove(d.dom):wn.moveToElement(c)).orThunk(()=>C.some(wn.moveToElement(c)))})(t,e,n,o):e&&fr(n)||!e&&mr(n)?C.some(wn.moveToPosition(o)):C.none();var r}),$y=(t,e)=>C.from(ss(t.getBody(),e)),qy=t=>{const e=t.dom,n=t.selection,o=ss(t.getBody(),n.getNode());if(jn(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(j.before(r).toRange())}return!0},Jm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return $y(t,n).filter(Ut).fold(()=>((o,r,s)=>{const i=ou(r?1:-1,o,s),a=j.fromRangeStart(i),l=S(o);return!r&&fr(a)?C.some(wn.remove(a.getNode(!0))):r&&mr(a)?C.some(wn.remove(a.getNode())):!r&&mr(a)&&qu(l,a)?PE(l,a).map(c=>wn.remove(c.getNode())):r&&fr(a)&&$u(l,a)?IE(l,a).map(c=>wn.remove(c.getNode())):(c=o,((g,p)=>{const m=p.getNode(!g),b=g?"after":"before";return ot(m)&&m.getAttribute("data-mce-caret")===b})(d=r,u=a)?(g=d,p=u.getNode(!d),It(p)?C.none():g&&Ut(p.nextSibling)?C.some(wn.moveToElement(p.nextSibling)):!g&&Ut(p.previousSibling)?C.some(wn.moveToElement(p.previousSibling)):C.none()).orThunk(()=>Hy(c,d,u)):Hy(c,d,u).bind(g=>((p,m,b)=>b.fold(f=>C.some(wn.remove(f)),f=>C.some(wn.moveToElement(f)),f=>so(m,f,p)?C.none():C.some(wn.moveToPosition(f))))(c,u,g)));var c,d,u,g,p})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,i=>(r._selectionOverrides.hideFakeCaret(),os(r,s,S(i)),!0)),((r,s)=>i=>{const a=s?j.before(i):j.after(i);return r.selection.setRng(a.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>C.some(xt))})(t,e):((n,o)=>{const r=n.selection.getNode();return Ut(r)&&!fl(r)?$y(n,r.parentNode).filter(Ut).fold(()=>C.some(()=>{var s;s=S(n.getBody()),W(Te(s,".mce-offscreen-selection"),qt),os(n,o,S(n.selection.getNode())),Xu(n)}),()=>C.some(xt)):Qm(n)?C.some(()=>{Ov(n,n.selection.getRng(),S(n.getBody()))}):C.none()})(t,e),Zm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=j.fromRangeStart(n.selection.getRng());return hn(o,n.getBody(),r).filter(s=>o?TE(s):OE(s)).bind(s=>nu(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):C.none(),Js=K,Vy=t=>Js(t)&&t.data[0]===xe,Wy=t=>Js(t)&&t.data[t.data.length-1]===xe,Ky=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(xe)},Cc=(t,e)=>t?(n=>{var o;if(Js(n.previousSibling))return Wy(n.previousSibling)||n.previousSibling.appendData(xe),n.previousSibling;if(Js(n))return Vy(n)||n.insertData(0,xe),n;{const r=Ky(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(Js(n.nextSibling))return Vy(n.nextSibling)||n.nextSibling.insertData(0,xe),n.nextSibling;if(Js(n))return Wy(n)||n.appendData(xe),n;{const s=Ky(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),_N=rt(Cc,!0),CN=rt(Cc,!1),Yy=(t,e)=>K(t.container())?Cc(e,t.container()):Cc(e,t.getNode()),Xy=(t,e)=>{const n=e.get();return n&&t.container()===n&&nr(n)},tf=(t,e)=>e.fold(n=>{Gr(t.get());const o=_N(n);return t.set(o),C.some(j(o,o.length-1))},n=>Fe(n).map(o=>{if(Xy(o,t)){const r=t.get();return j(r,1)}{Gr(t.get());const r=Yy(o,!0);return t.set(r),j(r,1)}}),n=>lo(n).map(o=>{if(Xy(o,t)){const r=t.get();return j(r,r.length-1)}{Gr(t.get());const r=Yy(o,!1);return t.set(r),j(r,r.length-1)}}),n=>{Gr(t.get());const o=CN(n);return t.set(o),C.some(j(o,1))}),Gy=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},De=ro([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Qy=(t,e)=>lr(e,t)||t,wN=(t,e,n)=>{const o=Sv(n),r=Qy(e,o.container());return gr(t,r,o).fold(()=>Ke(r,o).bind(rt(gr,t,r)).map(s=>De.before(s)),C.none)},kN=(t,e)=>null===Jr(t,e),Jy=(t,e,n)=>gr(t,e,n).filter(rt(kN,e)),xN=(t,e,n)=>{const o=Nv(n);return Jy(t,e,o).bind(r=>pn(r,o).isNone()?C.some(De.start(r)):C.none())},EN=(t,e,n)=>{const o=Sv(n);return Jy(t,e,o).bind(r=>Ke(r,o).isNone()?C.some(De.end(r)):C.none())},SN=(t,e,n)=>{const o=Nv(n),r=Qy(e,o.container());return gr(t,r,o).fold(()=>pn(r,o).bind(rt(gr,t,r)).map(s=>De.after(s)),C.none)},Zy=t=>{return e=ef(t),!("rtl"===Pt.DOM.getStyle(e,"direction",!0)||(o=null!==(n=e.textContent)&&void 0!==n?n:"",HE.test(o)));var o,e,n},go=(t,e,n)=>Gy([wN,xN,EN,SN],[t,e,n]).filter(Zy),ef=t=>t.fold(Ce,Ce,Ce,Ce),t_=t=>t.fold(J("before"),J("start"),J("end"),J("after")),wc=t=>t.fold(De.before,De.before,De.after,De.after),nf=t=>t.fold(De.start,De.start,De.end,De.end),NN=(t,e,n,o,r,s)=>Jt(gr(e,n,o),gr(e,n,r),(i,a)=>i!==a&&((l,c,d)=>{const u=lr(c,l),g=lr(d,l);return et(u)&&u===g})(n,i,a)?De.after(t?i:a):s).getOr(s),AN=(t,e)=>t.fold(Gt,n=>{return r=e,!(t_(o=n)===t_(r)&&ef(o)===ef(r));var o,r}),RN=(t,e)=>t?e.fold(Mn(C.some,De.start),C.none,Mn(C.some,De.after),C.none):e.fold(C.none,Mn(C.some,De.before),C.none,Mn(C.some,De.end)),e_=(t,e,n)=>{const o=t?1:-1;return e.setRng(j(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var ho;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(ho||(ho={}));const kc=(t,e)=>t===me.Backwards?En(e):e,TN=(t,e,n)=>t===me.Forwards?e.next(n):e.prev(n),ON=(t,e,n,o)=>Zt(o.getNode(e===me.Forwards))?ho.Br:!1===so(n,o)?ho.Block:ho.Wrap,n_=(t,e,n,o)=>{const r=ao(n);let s=o;const i=[];for(;s;){const a=TN(e,r,s);if(!a)break;if(Zt(a.getNode(!1)))return e===me.Forwards?{positions:kc(e,i).concat([a]),breakType:ho.Br,breakAt:C.some(a)}:{positions:kc(e,i),breakType:ho.Br,breakAt:C.some(a)};if(a.isVisible()){if(t(s,a)){const l=ON(0,e,s,a);return{positions:kc(e,i),breakType:l,breakAt:C.some(a)}}i.push(a),s=a}else s=a}return{positions:kc(e,i),breakType:ho.Eol,breakAt:C.none()}},o_=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===me.Backwards?s.concat(r):[r].concat(s)}).getOr([]),of=(t,e)=>he(t,(n,o)=>n.fold(()=>C.some(o),r=>Jt(Se(r.getClientRects()),Se(o.getClientRects()),(s,i)=>{const a=Math.abs(e-s.left);return Math.abs(e-i.left)<=a?o:r}).or(n)),C.none()),xc=(t,e)=>Se(e.getClientRects()).bind(n=>of(t,n.left)),ka=rt(n_,j.isAbove,-1),xa=rt(n_,j.isBelow,1),r_=rt(o_,-1,ka),s_=rt(o_,1,xa),DN=(t,e)=>xc(r_(t,e),e),BN=(t,e)=>xc(s_(t,e),e),LN=Ut,i_=(t,e)=>Math.abs(t.left-e),a_=(t,e)=>Math.abs(t.right-e),l_=(t,e)=>ks(t,(n,o)=>{const r=Math.min(i_(n,e),a_(n,e)),s=Math.min(i_(o,e),a_(o,e));return s===r&&Sn(o,"node")&&LN(o.node)||s<r?o:n}),PN=t=>{const e=n=>Et(n,o=>{const r=Yr(o);return r.node=t,r});if(ot(t))return e(t.getClientRects());if(K(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},c_=t=>$e(t,PN);var Ea;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(Ea||(Ea={}));const d_=(t,e,n,o,r,s)=>{let i=0;const a=[],l=u=>{let g=c_([u]);-1===t&&(g=g.reverse());for(let p=0;p<g.length;p++){const m=g[p];if(!n(m,c)){if(a.length>0&&e(m,Eo(a))&&i++,m.line=i,r(m))return!0;a.push(m)}}return!1},c=Eo(s.getClientRects());if(!c)return a;const d=s.getNode();return d&&(l(d),((u,g,p,m)=>{let b=m;for(;b=ea(b,u,zg,g);)if(p(b))return})(t,o,l,d)),a},IN=rt(d_,Ea.Up,Ki,Yi),MN=rt(d_,Ea.Down,Yi,Ki),u_=t=>Eo(t.getClientRects()),m_=t=>e=>e.line>t,rf=t=>e=>e.line===t,Po=(t,e)=>{t.selection.setRng(e),da(t,t.selection.getRng())},sf=(t,e,n)=>C.some(Ym(t,e,n)),f_=(t,e,n,o,r,s)=>{const i=e===me.Forwards,a=ao(t.getBody()),l=rt(ru,i?a.next:a.prev),c=i?o:r;if(!n.collapsed){const m=Sl(n);if(s(m))return Lo(e,t,m,e===me.Backwards,!1);if(Qm(t)){const b=n.cloneRange();return b.collapse(e===me.Backwards),C.from(b)}}const d=ra(e,t.getBody(),n);if(c(d))return wa(t,d.getNode(!i));let u=l(d);const g=Fg(n);if(!u)return g?C.some(n):C.none();if(u=_n(i,u),c(u))return Lo(e,t,u.getNode(!i),i,!1);const p=l(u);return p&&c(p)&&Ll(u,p)?Lo(e,t,p.getNode(!i),i,!1):g?sf(t,u.toRange(),!1):C.none()},g_=(t,e,n,o,r,s)=>{const i=ra(e,t.getBody(),n),a=Eo(i.getClientRects()),l=e===Ea.Down,c=t.getBody();if(!a)return C.none();if(Qm(t)){const b=l?j.fromRangeEnd(n):j.fromRangeStart(n);return(l?BN:DN)(c,b).orThunk(()=>C.from(b)).map(f=>f.toRange())}const d=(l?MN:IN)(c,m_(1),i),u=gt(d,rf(1)),g=a.left,p=l_(u,g);if(p&&s(p.node)){const b=Math.abs(g-p.left),f=Math.abs(g-p.right);return Lo(e,t,p.node,b<f,!1)}let m;if(m=o(i)?i.getNode():r(i)?i.getNode(!0):Sl(n),m){const b=((v,y,_,k)=>{const E=ao(y);let x,A,N,R;const L=[];let P=0;1===v?(x=E.next,A=Yi,N=Ki,R=j.after(k)):(x=E.prev,A=Ki,N=Yi,R=j.before(k));const F=u_(R);do{if(!R.isVisible())continue;const M=u_(R);if(N(M,F))continue;L.length>0&&A(M,Eo(L))&&P++;const z=Yr(M);if(z.position=R,z.line=P,_(z))return L;L.push(z)}while(R=x(R));return L})(e,c,m_(1),m);let f=l_(gt(b,rf(1)),g);if(f||(f=Eo(gt(b,rf(0))),f))return sf(t,f.position.toRange(),!1)}return 0===u.length?af(t,l).filter(l?r:o).map(b=>Ym(t,b.toRange(),!1)):C.none()},af=(t,e)=>{const n=t.selection.getRng(),o=e?j.fromRangeEnd(n):j.fromRangeStart(n),r=(s=o.container(),i=t.getBody(),Zo(S(s),a=>Fx(a.dom),a=>a.dom===i).map(a=>a.dom).getOr(i));var s,i;if(e){const a=xa(r,o);return ko(a.positions)}{const a=ka(r,o);return Se(a.positions)}},h_=(t,e,n)=>af(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Ec=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},p_=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},b_=(t,e,n)=>tf(e,n).map(o=>(Ec(t,o),n)),v_=(t,e,n)=>!!Ji(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,i,a)=>{const l=j.fromRangeStart(s);if(s.collapsed)return l;{const c=j.fromRangeEnd(s);return a?pn(i,c).getOr(c):Ke(i,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,i,a,l)=>{const c=_n(s,l),d=go(i,a,c);return go(i,a,c).bind(rt(RN,s)).orThunk(()=>((u,g,p,m,b)=>{const f=_n(u,b);return hn(u,p,f).map(rt(_n,u)).fold(()=>m.map(wc),v=>go(g,p,v).map(rt(NN,u,g,p,f,v)).filter(rt(AN,m))).filter(Zy)})(s,i,a,d,l))})(n,rt(rs,t),o,r).bind(s=>b_(t,e,s))})(t,e,n).isSome(),y_=(t,e,n)=>!!Ji(e)&&((o,r)=>{const s=r.selection.getRng(),i=o?j.fromRangeEnd(s):j.fromRangeStart(s);return!!Rt(r.selection.getSel().modify)&&(o&&xd(i)?e_(!0,r.selection,i):!(o||!Ed(i))&&e_(!1,r.selection,i))})(t,e),UN=rt(y_,!0),zN=rt(y_,!1),Sc=(t,e,n)=>{if(Ji(t)){const o=af(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?j.fromRangeEnd(r):j.fromRangeStart(r)});return go(rt(rs,t),t.getBody(),o).exists(r=>{const s=wc(r);return tf(n,s).exists(i=>(Ec(t,i),!0))})}return!1},__=(t,e)=>n=>tf(e,n).map(o=>()=>Ec(t,o)),C_=(t,e,n,o)=>{const r=t.getBody(),s=rt(rs,t);t.undoManager.ignore(()=>{t.selection.setRng(((i,a)=>{const l=document.createRange();return l.setStart(i.container(),i.offset()),l.setEnd(a.container(),a.offset()),l})(n,o)),Rv(t),go(s,r,j.fromRangeStart(t.selection.getRng())).map(nf).bind(__(t,e)).each(zo)}),t.nodeChanged()},lf=(t,e,n)=>{if(t.selection.isCollapsed()&&Ji(t)){const o=j.fromRangeStart(t.selection.getRng());return((r,s,i,a)=>{const l=(u=r.getBody(),g=a.container(),lr(g,u)||u),c=rt(rs,r),d=go(c,l,a);var u,g;return d.bind(u=>i?u.fold(J(C.some(nf(u))),C.none,J(C.some(wc(u))),C.none):u.fold(C.none,J(C.some(wc(u))),C.none,J(C.some(nf(u))))).map(__(r,s)).getOrThunk(()=>{const u=Il(i,l,a),g=u.bind(p=>go(c,l,p));return Jt(d,g,()=>gr(c,l,a).bind(p=>{return Jt(Fe(m=p),lo(m),(b,f)=>{const v=_n(!0,b),y=_n(!1,f);return Ke(m,v).forall(_=>_.isEqual(y))}).getOr(!0)?C.some(()=>{os(r,i,S(p))}):C.none();var m})).getOrThunk(()=>g.bind(()=>u.map(p=>()=>{i?C_(r,s,a,p):C_(r,s,p,a)})))})})(t,e,n,o)}return C.none()},HN=t=>1===dg(t),cf=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=S(t.getBody()),o=S(t.selection.getStart()),r=gt(((s,i)=>{const a=Bo(i,s);return Cr(a,Un).fold(J(a),l=>a.slice(0,l))})(n,o),HN);return ko(r).bind(s=>{const i=j.fromRangeStart(t.selection.getRng());return l=e,c=i,!Jt(Fe(d=s.dom),lo(d),(u,g)=>{const p=_n(!0,u),m=_n(!1,g),b=_n(!1,c);return l?Ke(d,b).exists(f=>f.isEqual(m)&&c.isEqual(p)):pn(d,b).exists(f=>f.isEqual(p)&&c.isEqual(m))}).getOr(!0)||$n((a=s).dom)&&Qv(a.dom)?C.none():C.some(()=>((l,c,d,u)=>{const g=rt(oS,c),p=Et(gt(u,g),m=>m.dom);if(0===p.length)os(c,l,d);else{const m=((b,f)=>{const v=pm(!1),y=t0(f,v.dom);return fn(S(b),v),qt(S(b)),j(y,0)})(d.dom,p);c.selection.setRng(m.toRange())}})(e,t,s,r));var l,c,d,a})})(t,e):C.none(),df=(t,e,n)=>et(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),os(t,e,S(n))}):C.none(),uf=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?ua:ma,i=ra(o?me.Forwards:me.Backwards,n.getBody(),n.selection.getRng());return r(i)?df(n,o,i.getNode(!o)):C.from(_n(o,i)).filter(a=>r(a)&&Ll(i,a)).bind(a=>df(n,o,a.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return oo(r)?df(n,o,r):C.none()})(t,e),mf=t=>Es(t??"").getOr(0),w_=(t,e)=>(t||"table"===Ft(e)?"margin":"padding")+("rtl"===no(e,"direction")?"-right":"-left"),k_=t=>{const e=E_(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,Ze(e,r=>{const s=w_(sp(n),r),i=ll(r,s).map(mf).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&i>0})));var n},x_=t=>wd(t)||Ii(t),E_=t=>gt(yg(t.selection.getSelectedBlocks()),e=>!x_(e)&&!Re(e).exists(x_)&&Mr(e,n=>jn(n.dom)||Ut(n.dom)).exists(n=>jn(n.dom))),S_=(t,e)=>{var n,o;const{dom:r}=t,s=Fk(t),i=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",a=mf(s),l=sp(t);W(E_(t),c=>{((d,u,g,p,m,b)=>{const f=w_(g,S(b)),v=mf(d.getStyle(b,f));if("outdent"===u){const y=Math.max(0,v-p);d.setStyle(b,f,y?y+m:"")}else d.setStyle(b,f,v+p+m)})(r,e,l,a,i,c.dom)})},N_=t=>S_(t,"outdent"),A_=t=>{if(t.selection.isCollapsed()&&k_(t)){const e=t.dom,n=t.selection.getRng(),o=j.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&Hu(S(r),o))return C.some(()=>N_(t))}return C.none()},R_=(t,e,n)=>cn([A_,Jm,Xm,(o,r)=>lf(o,e,r),Wm,om,Zm,uf,Km,cf],o=>o(t,n)),T_=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),ff=(t,e)=>Ct(t,e.nodeName),VN=(t,e)=>!!K(e)||!!ot(e)&&!ff(t.getBlockElements(),e)&&!bn(e)&&!ji(t,e),WN=(t,e)=>!(!K(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!ff(t,e.nextSibling))),O_=t=>t.dom.create(nn(t),Qi(t)),KN=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),i=t.getBody();let a,l,c=!1;const d=nn(t);if(!s||!ot(s))return;const u=i.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||(_=r,k=i,Ht(lv(S(s),S(k)),x=>ff(_,x.dom))))return;var _,k;const g=n.getRng(),{startContainer:p,startOffset:m,endContainer:b,endOffset:f}=g,v=ns(t);let y=i.firstChild;for(;y;)if(ot(y)&&Xw(o,y),VN(o,y)){if(WN(r,y)){l=y,y=y.nextSibling,e.remove(l);continue}a||(a=O_(t),i.insertBefore(a,y),c=!0),l=y,y=y.nextSibling,a.appendChild(l)}else a=null,y=y.nextSibling;c&&v&&(g.setStart(p,m),g.setEnd(b,f),n.setRng(g),t.nodeChanged())},D_=(t,e,n)=>{const o=S(O_(t)),r=kd();de(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},B_=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),YN=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],i=s>0?e.charAt(s-1):"";if('"'===i)return o;if(">"===i){const a=e.lastIndexOf("<",s);if(-1!==a&&-1!==e.substring(a,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},L_=(t,e)=>{e.hasAttribute("data-mce-caret")&&(Sd(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},XN=(t,e)=>{const n=Bi(S(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void L_(t,n)):void(Mg(n)&&(L_(t,n),t.undoManager.add()))},P_=Ut,I_=(t,e,n)=>{const o=ao(t.getBody()),r=rt(ru,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(j.fromRangeStart(n))){const i=S((a=>{const l=a.dom.create(nn(a));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Qo(S(s),i):fn(S(s),i),t.selection.select(i.dom,!0),t.selection.collapse()}}},M_=(t,e)=>((n,o)=>{const r=o?me.Forwards:me.Backwards,s=n.selection.getRng();return(i=r,a=n,l=s,f_(a,i,l,mr,fr,P_)).orThunk(()=>(I_(n,r,s),C.none()));var i,a,l})(t,e).exists(n=>(Po(t,n),!0)),F_=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(i=r,a=n,l=s,g_(a,i,l,c=>mr(c)||iv(c),c=>fr(c)||av(c),P_)).orThunk(()=>(I_(n,r,s),C.none()));var i,a,l})(t,e).exists(n=>(Po(t,n),!0)),j_=(t,e)=>h_(t,e,e?fr:mr),Nc=(t,e)=>Gm(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Po(t,n),!0)),GN=t=>Bt(["figcaption"],Ft(t)),U_=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=S(t.getBody()),o=j.fromRangeStart(t.selection.getRng());return((r,s)=>{const i=rt(kt,s);return Mr(S(r.container()),Un,i).filter(GN)})(o,n).exists(()=>{if(r=n,i=o,e?xa(r.dom,i).breakAt.isNone():ka(r.dom,i).breakAt.isNone()){const r=D_(t,n,e?de:vg);return t.selection.setRng(r),!0}var r,i;return!1})})(t,e),z_={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},H_=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,wt=(t,...e)=>()=>t.apply(null,e),Sa=(t,e)=>{return ne((o=e,$e(Et(t,s=>({...z_,...s})),r=>H_(r,o)?[r]:[])),n=>n.action());var o},$_=(t,e)=>{return cn((o=e,$e(Et(t,s=>({...z_,...s})),r=>H_(r,o)?[r]:[])),n=>n.action());var o},q_=(t,e)=>{const n=e?me.Forwards:me.Backwards,o=t.selection.getRng();return f_(t,n,o,ua,ma,oo).exists(r=>(Po(t,r),!0))},V_=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return g_(t,n,o,ua,ma,oo).exists(r=>(Po(t,r),!0))},W_=(t,e)=>h_(t,e,e?ma:ua),K_=ro([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Na={...K_,none:t=>K_.none(t)},Y_=(t,e,n)=>$e(ye(t),o=>Wt(o,e)?n(o)?[o]:[]:Y_(o,e,n)),X_=(t,e)=>Fr(t,"table",e),gf=(t,e,n,o,r=Gt)=>{const s=1===o;if(!s&&n<=0)return Na.first(t[0]);if(s&&n>=t.length-1)return Na.last(t[t.length-1]);{const i=n+o,a=t[i];return r(a)?Na.middle(e,a):gf(t,e,i,o,r)}},G_=(t,e)=>X_(t,e).bind(n=>{const o=Y_(n,"th,td",Gt);return Cr(o,r=>kt(t,r)).map(r=>({index:r,all:o}))}),Q_=(t,e=!1)=>{return As(t)?t.dom.isContentEditable:(n=t,Fr(n,"[contenteditable]")).fold(J(e),o=>"true"===JN(o));var n},JN=t=>t.dom.contentEditable,J_=(t,e,n,o,r)=>{const s=Te(S(n),"td,th,caption").map(a=>a.dom);var a;return((a,l,c)=>he(a,(d,u)=>d.fold(()=>C.some(u),g=>{const p=Math.sqrt(Math.abs(g.x-l)+Math.abs(g.y-c)),m=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-c));return C.some(m<p?u:g)}),C.none()))(gt((a=t,$e(s,c=>{const d={left:(u=Yr(c.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:d.left,y:a(d),cell:c},{x:d.right,y:a(d),cell:c}]})),a=>e(a,r)),o,r).map(a=>a.cell)},ZN=rt(J_,t=>t.bottom,(t,e)=>t.y<e),tA=rt(J_,t=>t.top,(t,e)=>t.y>e),Z_=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===ho.Wrap&&0===r.positions.length||!Zt(n.getNode())&&(r=>r.breakType===ho.Br&&1===r.positions.length)(o)?!((r,s,i)=>i.breakAt.exists(a=>r(s,a).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},eA=rt(Z_,ka),nA=rt(Z_,xa),oA=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!_p()||!((i,a,l)=>{const c=j.fromRangeStart(a);return Us(!i,l).exists(d=>d.isEqual(c))})(e,r,n)||(Lo(s,t,n,!e,!1).each(i=>{Po(t,i)}),0))},tC=(t,e,n)=>{const o=((s,i)=>{const a=i.getNode(s);return Ro(a)?C.some(a):C.none()})(!!e,n),r=!1===e;o.fold(()=>Po(t,n.toRange()),s=>Us(r,t.getBody()).filter(i=>i.isEqual(n)).fold(()=>Po(t,n.toRange()),i=>{return a=e,c=s,void(l=t).undoManager.transact(()=>{const d=a?Qo:fn,u=D_(l,S(c),d);Po(l,u)});var a,l,c}))},rA=(t,e,n,o)=>{const r=t.selection.getRng(),s=j.fromRangeStart(r),i=t.getBody();if(!e&&eA(o,s)){const a=(l=i,(u=c=n,g=d=s,Se(g.getClientRects()).bind(p=>ZN(u,p.left,p.top)).bind(p=>{return xc(lo(m=p).map(b=>ka(m,b).positions.concat(b)).getOr([]),g);var m})).orThunk(()=>Se(d.getClientRects()).bind(u=>of(r_(l,j.before(c)),u.left))).getOr(j.before(c)));return tC(t,e,a),!0}var l,c,d,u,g;if(e&&nA(o,s)){const a=((l,c,d)=>((u,g)=>ko(g.getClientRects()).bind(p=>tA(u,p.left,p.top)).bind(p=>{return xc(Fe(m=p).map(b=>[b].concat(xa(m,b).positions)).getOr([]),g);var m}))(c,d).orThunk(()=>Se(d.getClientRects()).bind(u=>of(s_(l,j.after(c)),u.left))).getOr(j.after(c)))(i,n,s);return tC(t,e,a),!0}return!1},eC=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),nC=(t,e)=>eC(t,e,oA),oC=(t,e)=>eC(t,e,rA),rC=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,((i,a)=>{const l=c=>{for(let d=0;d<c.childNodes.length;d++){const u=S(c.childNodes[d]);if(a(u))return C.some(u);const g=l(c.childNodes[d]);if(g.isSome())return g}return C.none()};return l(i.dom)})(s,Vb)).map(i=>{return(t=>{const e=Vs.getWin(t).dom,n=(r,s,i,a)=>xu(e,r,s,i,a),o=t.match({domRange:s=>{const i=S(s.startContainer),a=S(s.endContainer);return _b(i,s.startOffset,a,s.endOffset)},relative:rE,exact:_b});return((r,s)=>{var a;return((a,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>!1===d.collapsed).map(d=>ca.rtl(S(d.endContainer),d.endOffset,S(d.startContainer),d.startOffset)).getOrThunk(()=>vb(0,ca.ltr,c)):vb(0,ca.ltr,c)})(0,(a=r,s.match({domRange:c=>({ltr:J(c),rtl:C.none}),relative:(c,d)=>({ltr:So(()=>bb(a,c,d)),rtl:So(()=>C.some(bb(a,d,c)))}),exact:(c,d,u,g)=>({ltr:So(()=>xu(a,c,d,u,g)),rtl:So(()=>C.some(xu(a,u,g,c,d)))})})))})(e,o).match({ltr:n,rtl:n})})(Vs.exact(a=i,0,a,0));var a});var s},o=>(t.execCommand("mceTableInsertRowAfter"),sC(t,e,o))),sC=(t,e,n)=>{return rC(t,e,(r=Q_,G_(o=n,void 0).fold(()=>Na.none(o),s=>gf(s.all,o,s.index,1,r))));var o,r},sA=(t,e,n)=>{return rC(t,e,(r=Q_,G_(o=n,void 0).fold(()=>Na.none(),s=>gf(s.all,o,s.index,-1,r))));var o,r},iC=(t,e)=>{const n=["table","li","dl"],o=S(t.getBody()),r=i=>{const a=Ft(i);return kt(i,o)||Bt(n,a)},s=t.selection.getRng();return(i=S(e?s.endContainer:s.startContainer),a=r,((l,c,d=jt)=>d(c)?C.none():Bt(l,Ft(c))?C.some(c):Di(c,l.join(","),u=>Wt(u,"table")||d(u)))(["td","th"],i,a)).map(i=>(X_(i,r).each(a=>{t.model.table.clearSelectedCells(a.dom)}),t.selection.collapse(!e),(e?sC:sA)(t,r,i).each(a=>{t.selection.setRng(a)}),!0)).getOr(!1);var i,a},Kn=(t,e)=>({container:t,offset:e}),Ac=Pt.DOM,Rc=t=>e=>t===e?-1:0,hf=(t,e,n)=>{if(K(t)&&e>=0)return C.some(Kn(t,e));{const o=Kr(Ac);return C.from(o.backwards(t,e,Rc(t),n)).map(r=>Kn(r.container,r.container.data.length))}},pf=(t,e,n)=>{if(!K(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(Kn(t,e));{const r=Kr(Ac);return C.from(r.backwards(t,e,Rc(t),n)).bind(s=>pf(s.container,e+s.container.data.length,n))}},aC=(t,e,n)=>{if(!K(t))return C.none();const o=t.data;if(e<=o.length)return C.some(Kn(t,e));{const r=Kr(Ac);return C.from(r.forwards(t,e,Rc(t),n)).bind(s=>aC(s.container,e-o.length,n))}},bf=(t,e,n,o,r)=>{const s=Kr(t,(i=t,a=>i.isBlock(a)||Bt(["BR","IMG","HR","INPUT"],a.nodeName)||"false"===i.getContentEditable(a)));var i;return C.from(s.backwards(e,n,o,r))},lC=t=>To(t.toString().replace(/\u00A0/g," ")),cC=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),vf=(t,e)=>t.substring(e.length),dC=(t,e,n,o=0)=>{return(r=S(e.startContainer),Fr(r,Wb)).fold(()=>((s,i,a,l=0)=>{if(!(c=i).collapsed||!K(c.startContainer))return C.none();var c;const d={text:"",offset:0},u=s.getParent(i.startContainer,s.isBlock)||s.getRoot();return bf(s,i.startContainer,i.startOffset,(g,p,m)=>(d.text=m+d.text,d.offset+=p,((b,f,v)=>{let y;const _=v.charAt(0);for(y=f-1;y>=0;y--){const k=b.charAt(y);if(cC(k))return C.none();if(_===k&&ce(b,v,y,f))break}return C.some(y)})(d.text,d.offset,a).getOr(p)),u).bind(g=>{const p=i.cloneRange();if(p.setStart(g.container,g.offset),p.setEnd(i.endContainer,i.endOffset),p.collapsed)return C.none();const m=lC(p);return 0!==m.lastIndexOf(a)||vf(m,a).length<l?C.none():C.some({text:vf(m,a),range:p,trigger:a})})})(t,e,n,o),s=>{const i=t.createRng();i.selectNode(s.dom);const a=lC(i);return C.some({range:i,text:vf(a,n),trigger:n})});var r},uC=t=>{if(3===t.nodeType)return Kn(t,t.data.length);{const e=t.childNodes;return e.length>0?uC(e[e.length-1]):Kn(t,e.length)}},mC=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?mC(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?uC(n[n.length-1]):Kn(t,e)},fC=(t,e,n,o={})=>{var r;const s=e(),i=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",a=gt(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return d=t.dom,u=>{const g=mC(u.startContainer,u.startOffset);return!((p,m)=>{var b;const f=null!==(b=p.getParent(m.container,p.isBlock))&&void 0!==b?b:p.getRoot();return bf(p,m.container,m.offset,(v,y)=>0===y?-1:y,f).filter(v=>{const y=v.container.data.charAt(v.offset-1);return!cC(y)}).isSome()})(d,g)};var d})(n.range,i,n.text));if(0===a.length)return C.none();const l=Promise.all(Et(a,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return C.some({lookupData:l,context:n})};var po;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(po||(po={}));const yf=(t,e,n)=>t.stype===po.Error?e(t.serror):n(t.svalue),Zs=t=>({stype:po.Value,svalue:t}),Aa=t=>({stype:po.Error,serror:t}),iA=yf,_f=t=>le(t)&&we(t).length>100?" removed due to size":JSON.stringify(t,null,2),Tc=(t,e)=>Aa([{path:t,getErrorInfo:e}]),gC=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)Ct(r,s)&&(n[s]=t(n[s],r[s]))}return n},Cf=gC((t,e)=>jo(t)&&jo(e)?Cf(t,e):e),hC=(gC((t,e)=>e),t=>({tag:"defaultedThunk",process:J(t)})),pC=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},wf=t=>({extract:(e,n)=>{return(o=t(n)).stype===po.Error?Tc(e,J(o.serror)):o;var o},toString:J("val")}),cA=wf(Zs),bC=(t,e,n,o)=>o(Mt(t,e).getOrThunk(()=>n(t))),dA=(t,e,n,o,r)=>{const s=a=>r.extract(e.concat([o]),a),i=a=>a.fold(()=>Zs(C.none()),l=>{return(d=r.extract(e.concat([o]),l)).stype===po.Value?{stype:po.Value,svalue:(0,C.some)(d.svalue)}:d;var d});switch(t.tag){case"required":return a=e,d=s,Mt(l=n,c=o).fold(()=>{return g=c,p=l,Tc(a,()=>'Could not find valid *required* value for "'+g+'" in '+_f(p));var g,p},d);case"defaultedThunk":return bC(n,o,t.process,s);case"option":return((a,l,c)=>c(Mt(a,l)))(n,o,i);case"defaultedOptionThunk":return((a,l,c,d)=>d(Mt(a,l).map(u=>!0===u?c(a):u)))(n,o,t.process,i);case"mergeWithThunk":return bC(n,o,J({}),a=>{const l=Cf(t.process(n),a);return s(l)})}var a,l,c,d},kf=t=>({extract:(e,n)=>((o,r,s)=>{const i={},a=[];for(const l of s)pC(l,(c,d,u,g)=>{const p=dA(u,o,r,c,g);iA(p,m=>{a.push(...m)},m=>{i[d]=m})},(c,d)=>{i[c]=d(r)});return a.length>0?Aa(a):Zs(i)})(e,n,t),toString:()=>"obj{\n"+Et(t,n=>pC(n,(o,r,s,i)=>o+" -> "+i.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),vC=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return W(o,i=>{yf(i,a=>s.push(a),a=>r.push(a))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,Mn(Aa,wr)(n)):Zs(e.values);var n})(Et(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),yC=(t,e)=>((t,e)=>({extract:(n,o)=>Mt(o,t).fold(()=>{return s=t,Tc(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,i=o,Mt(a=e,l=r).fold(()=>{return d=a,u=l,Tc(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+_f(d));var d,u},c=>c.extract(s.concat(["branch: "+l]),i));var s,i,a,l}),toString:()=>"chooseOn("+t+"). Possible values: "+we(e)}))(t,$o(e,kf)),mA=J(cA),Oc=(t,e)=>wf(n=>{const o=typeof n;return t(n)?Zs(n):Aa(`Expected type: ${e} but got: ${o}`)}),fA=Oc(ln,"number"),Dc=Oc(ft,"string"),gA=Oc(ge,"boolean"),xf=Oc(Rt,"function"),Ra=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),_C=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),CC=(t,e)=>Ra(t,t,{tag:"required",process:{}},e),wC=t=>CC(t,Dc),kC=t=>CC(t,xf),Ef=(t,e)=>Ra(t,t,{tag:"option",process:{}},e),Bc=t=>Ef(t,Dc),ti=(t,e,n)=>Ra(t,t,hC(e),n),xC=(t,e)=>ti(t,e,fA),EC=(t,e,n)=>{return ti(t,e,(o=n,r=s=>Bt(o,s)?Me.value(s):Me.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),wf(s=>r(s).fold(Aa,Zs))));var o,r},Sf=(t,e)=>ti(t,e,gA),Nf=(t,e)=>ti(t,e,xf),hA=wC("type"),pA=kC("fetch"),Af=kC("onAction"),bA=Nf("onSetup",()=>xt),vA=Bc("text"),yA=Bc("icon"),_A=Bc("tooltip"),CA=Bc("label"),wA=Sf("active",!1),kA=Sf("enabled",!0),SC=Sf("primary",!1),Ta=t=>ti("type",t,Dc),xA=kf([hA,wC("trigger"),xC("minChars",1),((t,e)=>Ra(t,t,hC(1),mA()))("columns"),xC("maxResults",10),Ef("matches",xf),pA,Af,(NC=Dc,ti("highlightOn",[],vC(NC)))]);var NC;const Rf=[kA,_A,yA,vA,bA],AC=[wA].concat(Rf),EA=[Nf("predicate",jt),EC("scope","node",["node","editor"]),EC("position","selection",["node","selection","line"])],SA=Rf.concat([Ta("contextformbutton"),SC,Af,_C("original",Ce)]),NA=AC.concat([Ta("contextformbutton"),SC,Af,_C("original",Ce)]),AA=Rf.concat([Ta("contextformbutton")]),RA=AC.concat([Ta("contextformtogglebutton")]),TA=yC("type",{contextformbutton:SA,contextformtogglebutton:NA});kf([Ta("contextform"),Nf("initValue",J("")),CA,((t,e)=>Ra(t,t,{tag:"required",process:{}},vC(e)))("commands",TA),Ef("launch",yC("type",{contextformbutton:AA,contextformtogglebutton:RA}))].concat(EA));const DA=t=>{const e=sr(),n=ue(!1),o=e.isSet,r=()=>{o()&&(Qt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=So(()=>(t=>{const e=t.ui.registry.getAll().popups,n=$o(e,s=>{return(i=s,((t,e,n)=>{return o=(a=e.extract([t],i=n)).stype===po.Error?{stype:po.Error,serror:(a=>({input:i,errors:a}))(a.serror)}:a,yf(o,Me.error,Me.value);var i,a,o})("Autocompleter",xA,{trigger:i.ch,...i})).fold(a=>{throw new Error("Errors: \n"+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:J("... (only showing first ten failures)")}]):c;return Et(d,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=a).errors).join("\n")+"\n\nInput object: "+_f(l.input));var l},Ce);var i}),o=Jn(hi(n,s=>s.trigger)),r=Cs(n);return{dataset:n,triggers:o,lookupByTrigger:s=>gt(r,i=>i.trigger===s)}})(t)),i=a=>{var l;(l=a,e.get().map(c=>dC(t.dom,t.selection.getRng(),c.trigger).bind(d=>fC(t,s,d,l))).getOrThunk(()=>((c,d)=>{const u=d(),g=c.selection.getRng();return(p=c.dom,m=g,b=u,cn(b.triggers,f=>dC(p,m,f))).bind(p=>fC(c,d,p));var p,m,b})(t,s))).fold(r,l=>{var c,u;c=l.context,o()||(u=c.range,Qt(t).autocompleter.addDecoration(u),e.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{e.get().map(d=>{const u=l.context;d.trigger===u.trigger&&(u.text.length-d.matchLength>=10?r():(e.set({...d,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:c}))))})})})};t.addCommand("mceAutocompleterReload",(a,l)=>{const c=le(l)?l.fetchOptions:{};i(c)}),t.addCommand("mceAutocompleterClose",r),((a,l)=>{const c=zd(l.load,50);a.on("keypress compositionend",d=>{27!==d.which&&c.throttle()}),a.on("keydown",d=>{const u=d.which;8===u?c.throttle():27===u&&l.cancelIfNecessary()}),a.on("remove",c.cancel)})(t,{cancelIfNecessary:r,load:i})},RC=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:xt,inputType:n},i=lh(new InputEvent(t));return e.dispatch(t,{...i,...s,...o})},Tf=RC("input"),Of=RC("beforeinput"),Oa=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(i=>{for(;i;){if(ot(i)||K(i)&&i.data&&/[\r\n\s]/.test(i.data))return i;i=i.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(be),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new ie(e,e);let i,a=e;for(;i=s.current();){if(K(i)){r.setStart(i,0),r.setEnd(i,0);break}if(o[i.nodeName.toLowerCase()]){r.setStartBefore(i),r.setEndBefore(i);break}a=i,i=s.next()}i||(r.setStart(a,0),r.setEnd(a,0))}else Zt(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),da(t,r)},Lc=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);)"true"===t.getContentEditable(r)&&(o=r),r=r.parentNode;return r!==n?o:n},Df=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),TC=(t,e)=>{const n=t?.parentNode;return et(n)&&n.nodeName===e},OC=t=>et(t)&&/^(OL|UL|LI)$/.test(t.nodeName),Pc=t=>{const e=t.parentNode;return et(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},Ic=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!ot(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},BA=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Bf=t=>{t.innerHTML='<br data-mce-bogus="1">'},Lf=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,DC=(t,e)=>et(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e),Pf=(t,e,n)=>K(e)?t?1===n&&e.data.charAt(n-1)===xe?0:n:n===e.data.length-1&&e.data.charAt(n)===xe?e.data.length:n:n,Da=(t,e)=>{nn(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(d=>{const u={...pg(S(o)),...d};s.setStyles(o,u)});const i=C.from(r.class).map(d=>d.split(/\s+/)),a=C.from(o.className).map(d=>gt(d.split(/\s+/),u=>""!==u));Jt(i,a,(d,u)=>{const g=gt(u,m=>!Bt(d,m)),p=[...d,...g];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],c=qo(r,(d,u)=>!Bt(l,u));s.setAttribs(o,c)})(t,e,Qi(t))},BC={insert:(t,e)=>{let n,o,r,s,i=!1;const a=t.dom,l=t.schema,c=l.getNonEmptyElements(),d=t.selection.getRng(),u=nn(t),g=x=>{let A=n;const N=l.getTextInlineElements();let R;R=x||"TABLE"===r||"HR"===r?a.create(x||u):y.cloneNode(!1);let L=R;if(!1===Ak(t))a.setAttrib(R,"style",null),a.setAttrib(R,"class",null);else do{if(N[A.nodeName]){if($n(A)||bn(A))continue;const P=A.cloneNode(!1);a.setAttrib(P,"id",""),R.hasChildNodes()?(P.appendChild(R.firstChild),R.appendChild(P)):(L=P,R.appendChild(P))}}while((A=A.parentNode)&&A!==v);return Da(t,R),Bf(L),R},p=x=>{const A=Pf(x,n,o);if(K(n)&&(x?A>0:A<n.data.length))return!1;if(n.parentNode===y&&i&&!x||x&&ot(n)&&n===y.firstChild)return!0;if(Lf(n,"TABLE")||Lf(n,"HR"))return i&&!x||!i&&x;const N=new ie(n,y);let R;for(K(n)&&(x&&0===A?N.prev():x||A!==n.data.length||N.next());R=N.current();){if(ot(R)){if(!R.getAttribute("data-mce-bogus")){const L=R.nodeName.toLowerCase();if(c[L]&&"br"!==L)return!1}}else if(K(R)&&!$r(R.data))return!1;x?N.prev():N.next()}return!0},m=()=>{let x;return x=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==_?g(u):g(),((A,N)=>{const R=Rk(A);return!It(N)&&(ft(R)?Bt(Y.explode(R),N.nodeName.toLowerCase()):R)})(t,s)&&DC(a,s)&&a.isEmpty(y)?x=a.split(s,y):a.insertAfter(x,y),Oa(t,x),x};Yl(a,d).each(x=>{d.setStart(x.startContainer,x.startOffset),d.setEnd(x.endContainer,x.endOffset)}),n=d.startContainer,o=d.startOffset;const b=!(!e||!e.shiftKey),f=!(!e||!e.ctrlKey);ot(n)&&n.hasChildNodes()&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&K(n)?n.data.length:0);const v=Lc(a,n);if(!v||((x,A)=>{const N=x.dom.getParent(A,"ol,ul,dl");return null!==N&&"false"===x.dom.getContentEditableParent(N)})(t,n))return;b||(n=((x,A,N,R,L)=>{var P;const F=x.dom,M=null!==(P=Lc(F,R))&&void 0!==P?P:F.getRoot();let z=F.getParent(R,F.isBlock);if(!z||!DC(F,z)){let G;if(z=z||M,G=z===x.getBody()||Dg(z)?z.nodeName.toLowerCase():z.parentNode?z.parentNode.nodeName.toLowerCase():"",!z.hasChildNodes()){const mt=F.create(A);return Da(x,mt),z.appendChild(mt),N.setStart(mt,0),N.setEnd(mt,0),mt}let Q,dt=R;for(;dt&&dt.parentNode!==z;)dt=dt.parentNode;for(;dt&&!F.isBlock(dt);)Q=dt,dt=dt.previousSibling;if(Q&&x.schema.isValidChild(G,A.toLowerCase())){const mt=Q.parentNode,St=F.create(A);for(Da(x,St),mt.insertBefore(St,Q),dt=Q;dt&&!F.isBlock(dt);){const Lt=dt.nextSibling;St.appendChild(dt),dt=Lt}N.setStart(R,L),N.setEnd(R,L)}}return R})(t,u,d,n,o));let y=a.getParent(n,a.isBlock)||a.getRoot();s=et(y?.parentNode)?a.getParent(y.parentNode,a.isBlock):null,r=y?y.nodeName.toUpperCase():"";const _=s?s.nodeName.toUpperCase():"";if("LI"!==_||f||(y=s,s=s.parentNode,r=_),/^(LI|DT|DD)$/.test(r)&&ot(s)&&a.isEmpty(y))return void((x,A,N,R,L)=>{const P=x.dom,F=x.selection.getRng(),M=N.parentNode;if(N===x.getBody()||!M)return;var z;OC(z=N)&&OC(z.parentNode)&&(L="LI");let G=A(L);if(Ic(N,R,!0)&&Ic(N,R,!1))if(TC(N,"LI")){const Q=Pc(N);P.insertAfter(G,Q),(null===(mt=(dt=N).parentNode)||void 0===mt?void 0:mt.firstChild)===dt?P.remove(Q):P.remove(N)}else P.replace(G,N);else if(Ic(N,R,!0))TC(N,"LI")?(P.insertAfter(G,Pc(N)),G.appendChild(P.doc.createTextNode(" ")),G.appendChild(N)):M.insertBefore(G,N),P.remove(R);else if(Ic(N,R,!1))P.insertAfter(G,Pc(N)),P.remove(R);else{N=Pc(N);const Q=F.cloneRange();Q.setStartAfter(R),Q.setEndAfter(N);const dt=Q.extractContents();"LI"===L&&((mt,St)=>mt.firstChild&&"LI"===mt.firstChild.nodeName)(dt)?(G=dt.firstChild,P.insertAfter(dt,N)):(P.insertAfter(dt,N),P.insertAfter(G,N)),P.remove(R)}var dt,mt;Oa(x,G)})(t,g,s,y,u);if(y===t.getBody())return;const k=y.parentNode;let E;if(Os(y))E=Sd(y),a.isEmpty(y)&&Bf(y),Da(t,E),Oa(t,E);else if(p(!1))E=m();else if(p(!0)&&k)E=k.insertBefore(g(),y),Oa(t,Lf(y,"HR")?E:y);else{const x=(N=>{const R=N.cloneRange();return R.setStart(N.startContainer,Pf(!0,N.startContainer,N.startOffset)),R.setEnd(N.endContainer,Pf(!1,N.endContainer,N.endOffset)),R})(d).cloneRange();x.setEndAfter(y);const A=x.extractContents();W(Sg(S(A),Pe),R=>{const L=R.dom;L.nodeValue=To(L.data)}),(N=>{let R=N;do{K(R)&&(R.data=R.data.replace(/^[\r\n]+/,"")),R=R.firstChild}while(R)})(A),E=A.firstChild,a.insertAfter(A,y),((N,R,L)=>{var P;const F=[];if(!L)return;let M=L;for(;M=M.firstChild;){if(N.isBlock(M))return;ot(M)&&!R[M.nodeName.toLowerCase()]&&F.push(M)}let z=F.length;for(;z--;)M=F[z],(!M.hasChildNodes()||M.firstChild===M.lastChild&&""===(null===(P=M.firstChild)||void 0===P?void 0:P.nodeValue)||BA(N,M))&&N.remove(M)})(a,c,E),((N,R)=>{R.normalize();const L=R.lastChild;(!L||ot(L)&&/^(left|right)$/gi.test(N.getStyle(L,"float",!0)))&&N.add(R,"br")})(a,y),a.isEmpty(y)&&Bf(y),E.normalize(),a.isEmpty(E)?(a.remove(E),m()):(Da(t,E),Oa(t,E))}a.setAttrib(E,"id",""),t.dispatch("NewBlock",{newBlock:E})},fakeEventName:"insertParagraph"},LC=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),da(t,o)},LA=(t,e)=>{const n=V("br");fn(S(e),n),t.undoManager.add()},PA=(t,e)=>{IA(t.getBody(),e)||Qo(S(e),V("br"));const n=V("br");Qo(S(e),n),LC(t,n.dom,!1),t.undoManager.add()},IA=(t,e)=>{return n=j.after(e),!!Zt(n.getNode())||Ke(t,j.after(e)).map(o=>Zt(o.getNode())).getOr(!1);var n},PC=t=>t&&"A"===t.nodeName&&"href"in t,MA=t=>t.fold(jt,PC,PC,jt),FA=(t,e)=>{e.fold(xt,rt(LA,t),rt(PA,t),xt)},IC={insert:(t,e)=>{const n=(o=>{const r=rt(rs,o),s=j.fromRangeStart(o.selection.getRng());return go(r,o.getBody(),s).filter(MA)})(t);n.isSome()?n.each(rt(FA,t)):((o,r)=>{const i=o.dom,a=o.selection.getRng();let l,c=!1;Yl(i,a).each(f=>{a.setStart(f.startContainer,f.startOffset),a.setEnd(f.endContainer,f.endOffset)});let d=a.startOffset,u=a.startContainer;if(ot(u)&&u.hasChildNodes()){const f=d>u.childNodes.length-1;u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=f&&K(u)?u.data.length:0}let g=i.getParent(u,i.isBlock);const p=g&&g.parentNode?i.getParent(g.parentNode,i.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(g=p),K(u)&&d>=u.data.length&&(((f,v,y)=>{const _=new ie(v,y);let k;const E=f.getNonEmptyElements();for(;k=_.next();)if(E[k.nodeName.toLowerCase()]||K(k)&&k.length>0)return!0;return!1})(o.schema,u,g||i.getRoot())||(l=i.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),c=!0)),l=i.create("br"),Wd(i,a,l),LC(o,l,c),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},MC=(t,e)=>Df(t).filter(n=>e.length>0&&Wt(S(n),e)).isSome(),kn=ro([{br:[]},{block:[]},{none:[]}]),jA=(t,e)=>{return MC(n=t,Nk(n));var n},FC=t=>(e,n)=>Df(e).filter(r=>Ii(S(r))).isSome()===t,jC=(t,e)=>(n,o)=>Df(n).fold(J(""),i=>i.nodeName.toUpperCase())===t.toUpperCase()===e,UA=t=>{const e=Lc(t.dom,t.selection.getStart());return It(e)},Ba=t=>jC("pre",t),Mc=t=>(e,n)=>xk(e)===t,zA=(t,e)=>{return MC(n=t,Sk(n));var n},Fc=(t,e)=>e,HA=t=>{const e=nn(t),n=Lc(t.dom,t.selection.getStart());return et(n)&&t.schema.isValidChild(n.nodeName,e)},Dn=(t,e)=>(n,o)=>he(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),jc=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),et(n)&&Of(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),et(n)&&Tf(e,t.fakeEventName))},UC=(t,e)=>{const n=()=>jc(IC,t,e),o=()=>jc(BC,t,e),r=(s=t,i=e,Gy([Dn([jA],kn.none()),Dn([Ba(!0),UA],kn.none()),Dn([jC("summary",!0)],kn.br()),Dn([Ba(!0),Mc(!1),Fc],kn.br()),Dn([Ba(!0),Mc(!1)],kn.block()),Dn([Ba(!0),Mc(!0),Fc],kn.block()),Dn([Ba(!0),Mc(!0)],kn.br()),Dn([FC(!0),Fc],kn.br()),Dn([FC(!0)],kn.block()),Dn([zA],kn.br()),Dn([Fc],kn.br()),Dn([HA],kn.block())],[s,!(!i||!i.shiftKey)]).getOr(kn.none()));var s,i;switch(Ek(t)){case"linebreak":r.fold(n,n,xt);break;case"block":r.fold(o,o,xt);break;case"invert":r.fold(o,n,xt);break;default:r.fold(n,o,xt)}},$A=No(),zC=t=>t.stopImmediatePropagation(),HC=t=>t.keyCode===ct.PAGE_UP||t.keyCode===ct.PAGE_DOWN,$C=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",zC,!0):!n&&t.get()&&e.off("NodeChange",zC),t.set(n)},qC=(t,e)=>{const n=e.container(),o=e.offset();return K(n)?(n.insertData(o,t),C.some(j(n,o+t.length))):Bl(e).map(r=>{const s=it(t);return e.isAtEnd()?Qo(r,s):fn(r,s),j(s.dom,t.length)})},qA=rt(qC,be),VA=rt(qC," "),KA=t=>{const e=j.fromRangeStart(t.selection.getRng()),n=S(t.getBody());if(t.selection.isCollapsed()){const o=rt(rs,t),r=j.fromRangeStart(t.selection.getRng());return go(o,t.getBody(),r).bind((s=n,i=>i.fold(a=>pn(s.dom,j.before(a)),a=>Fe(a),a=>lo(a),a=>Ke(s.dom,j.after(a))))).map(s=>()=>{return((t,e)=>n=>{return o=t,!Vu(r=n)&&(pn((s=o).dom,i=r).isNone()||Ke(s.dom,i).isNone()||Hu(s,i)||mv(s,i)||qu(s,i)||$u(s,i)||hv(o,r)||pv(o,r))?qA(e):VA(e);var o,r,s,i})(n,e)(s).each((i=t,a=>(i.selection.setRng(a.toRange()),i.nodeChanged(),!0)));var i})}var s;return C.none()},YA=t=>Ox(t)?[{keyCode:ct.TAB,action:wt(iC,t,!0)},{keyCode:ct.TAB,shiftKey:!0,action:wt(iC,t,!1)}]:[],XA=t=>{if(t.addShortcut("Meta+P","","mcePrint"),DA(t),fo(t))return ue(null);{const e=(t=>{const e=ue(null),n=rt(rs,t);return t.on("NodeChange",o=>{Ji(t)&&(((r,s,i)=>{const a=Et(Te(S(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=gt(a,r),c=gt(i,r);W(Ho(l,c),rt(p_,!1)),W(Ho(c,l),rt(p_,!0))})(n,t.dom,o.parents),((r,s)=>{const i=s.get();if(r.selection.isCollapsed()&&!r.composing&&i){const a=j.fromRangeStart(r.selection.getRng());j.isTextPosition(a)&&!xd(l=a)&&!Ed(l)&&(Ec(r,((t,e)=>{return j.isTextPosition(e)?(o=e,gp(n=t)&&o.container()===n?((r,s)=>{const i=pp(r.data.substr(0,s.offset())),a=pp(r.data.substr(s.offset()));return(i.text+a.text).length>0?(bp(r),j(r,s.offset()-i.count)):s})(n,o):vp(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const i=s.container(),a=((l,c)=>{const d=ys(l,c);return-1===d?C.none():C.some(d)})(Le(i.childNodes),r).map(l=>l<s.offset()?j(i,s.offset()-1):s).getOr(s);return Gr(r),a})(n,o):vp(n,o))(t,e);var n,o})(i,a)),s.set(null))}var l})(t,e),((r,s,i,a)=>{if(s.selection.isCollapsed()){const l=gt(a,r);W(l,c=>{const d=j.fromRangeStart(s.selection.getRng());go(r,s.getBody(),d).bind(u=>b_(s,i,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",rt(XN,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=At.os.isMacOS()||At.os.isiOS();Sa([{keyCode:ct.RIGHT,action:wt(M_,s,!0)},{keyCode:ct.LEFT,action:wt(M_,s,!1)},{keyCode:ct.UP,action:wt(F_,s,!1)},{keyCode:ct.DOWN,action:wt(F_,s,!0)},...l?[{keyCode:ct.UP,action:wt(Nc,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ct.DOWN,action:wt(Nc,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ct.RIGHT,action:wt(nC,s,!0)},{keyCode:ct.LEFT,action:wt(nC,s,!1)},{keyCode:ct.UP,action:wt(oC,s,!1)},{keyCode:ct.DOWN,action:wt(oC,s,!0)},{keyCode:ct.RIGHT,action:wt(q_,s,!0)},{keyCode:ct.LEFT,action:wt(q_,s,!1)},{keyCode:ct.UP,action:wt(V_,s,!1)},{keyCode:ct.DOWN,action:wt(V_,s,!0)},{keyCode:ct.RIGHT,action:wt(v_,s,i,!0)},{keyCode:ct.LEFT,action:wt(v_,s,i,!1)},{keyCode:ct.RIGHT,ctrlKey:!l,altKey:l,action:wt(UN,s,i)},{keyCode:ct.LEFT,ctrlKey:!l,altKey:l,action:wt(zN,s,i)},{keyCode:ct.UP,action:wt(U_,s,!1)},{keyCode:ct.DOWN,action:wt(U_,s,!0)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=a.keyCode===ct.BACKSPACE?"deleteContentBackward":"deleteContentForward";$_([{keyCode:ct.BACKSPACE,action:wt(A_,s)},{keyCode:ct.BACKSPACE,action:wt(Jm,s,!1)},{keyCode:ct.DELETE,action:wt(Jm,s,!0)},{keyCode:ct.BACKSPACE,action:wt(Xm,s,!1)},{keyCode:ct.DELETE,action:wt(Xm,s,!0)},{keyCode:ct.BACKSPACE,action:wt(lf,s,i,!1)},{keyCode:ct.DELETE,action:wt(lf,s,i,!0)},{keyCode:ct.BACKSPACE,action:wt(om,s,!1)},{keyCode:ct.DELETE,action:wt(om,s,!0)},{keyCode:ct.BACKSPACE,action:wt(Zm,s,!1)},{keyCode:ct.DELETE,action:wt(Zm,s,!0)},{keyCode:ct.BACKSPACE,action:wt(uf,s,!1)},{keyCode:ct.DELETE,action:wt(uf,s,!0)},{keyCode:ct.BACKSPACE,action:wt(Km,s,!1)},{keyCode:ct.DELETE,action:wt(Km,s,!0)},{keyCode:ct.BACKSPACE,action:wt(Wm,s,!1)},{keyCode:ct.DELETE,action:wt(Wm,s,!0)},{keyCode:ct.BACKSPACE,action:wt(cf,s,!1)},{keyCode:ct.DELETE,action:wt(cf,s,!0)}],a).each(c=>{a.preventDefault(),Of(s,l).isDefaultPrevented()||(c(),Tf(s,l))})})(n,o,r)}),n.on("keyup",r=>{var s,i;r.isDefaultPrevented()||(i=r,Sa([{keyCode:ct.BACKSPACE,action:wt(qy,s=n)},{keyCode:ct.DELETE,action:wt(qy,s)}],i))})})(t,e),(n=>{n.on("keydown",o=>{var r,s,i;o.keyCode===ct.ENTER&&(r=n,(s=o).isDefaultPrevented()||(s.preventDefault(),(i=r.undoManager).typing&&(i.typing=!1,i.add()),r.undoManager.transact(()=>{UC(r,s)})))})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,$_([{keyCode:ct.SPACEBAR,action:wt(KA,r=n)}],s).each(i=>{s.preventDefault(),Of(r,"insertText",{data:" "}).isDefaultPrevented()||(i(),Tf(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=S(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!K(n))return C.none();if((o=>{const r=o.container();return K(r)&&ce(r.data,be)})(e)){const o=_v(t,n,!1)||(r=>{const s=r.data,i=(a=>{const l=a.split("");return Et(l,(c,d)=>Fl(c)&&d>0&&d<l.length-1&&cu(l[d-1])&&cu(l[d+1])?" ":c).join("")})(s);return i!==s&&(r.data=i,!0)})(n)||Cv(t,n,!1);return Sr(o,e)}if(Wu(t,e)){const o=_v(t,n,!0)||Cv(t,n,!0);return Sr(o,e)}return C.none()})(s,j.fromRangeStart(r.selection.getRng())).each(i=>{r.selection.setRng(i.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,Sa([...YA(n)],s).each(i=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=At.os.isMacOS()||At.os.isiOS();Sa([{keyCode:ct.END,action:wt(j_,s,!0)},{keyCode:ct.HOME,action:wt(j_,s,!1)},...l?[]:[{keyCode:ct.HOME,action:wt(Nc,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ct.END,action:wt(Nc,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ct.END,action:wt(W_,s,!0)},{keyCode:ct.HOME,action:wt(W_,s,!1)},{keyCode:ct.END,action:wt(Sc,s,!0,i)},{keyCode:ct.HOME,action:wt(Sc,s,!1,i)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if($A.os.isMacOS())return;const r=ue(!1);n.on("keydown",s=>{HC(s)&&$C(r,n,!0)}),n.on("keyup",s=>{var i,a,l;s.isDefaultPrevented()||(l=s,Sa([{keyCode:ct.PAGE_UP,action:wt(Sc,i=n,!1,a=o)},{keyCode:ct.PAGE_DOWN,action:wt(Sc,i,!0,a)}],l)),HC(s)&&r.get()&&($C(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class GA{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),i={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&Nu(i,n)||e.dispatch("SelectionChange"),n=i}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&Ul(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Ul(e)&&("IMG"===e.selection.getNode().nodeName?yn.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!rx(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,i=>i===r||(s.push(i),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=En(o.dom.getParents(e,Gt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const Uc=J("x-tinymce/html"),If="\x3c!-- x-tinymce/html --\x3e",QA=t=>If+t,VC=t=>-1!==t.indexOf(If),WC="%MCEPASTEBIN%",Mf=t=>t.dom.get("mcepastebin"),JA=t=>et(t)&&"mcepastebin"===t.id,KC=t=>t===WC,YC=(t,e)=>(Y.each(e,n=>{t=an(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),XC=t=>YC(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?be:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),GC=(t,e)=>({content:t,cancelled:e}),Ff=(t,e)=>(t.insertContent(e,{merge:Cx(t),paste:!0}),!0),jf=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),ZA=(t,e,n)=>{return!(t.selection.isCollapsed()||!jf(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},tR=(t,e,n)=>{return o=t,!(!jf(r=e)||!Ht(fp(o),s=>vi(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},eR=(t=>{let e=0;return()=>"mceclip"+e++})(),QC=(t,e,n,o)=>{const r=((l,c,d)=>{const u=l.dispatch("PastePreProcess",{content:c,internal:d}),g=((p,m)=>{const b=Ys({},p.schema);b.addNodeFilter("meta",v=>{Y.each(v,y=>{y.remove()})});const f=b.parse(m,{forced_root_block:!1,isRootContent:!0});return dr({validate:!0},p.schema).serialize(f)})(l,u.content);return l.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?((p,m,b)=>{const f=p.dom.create("div",{style:"display:none"},m),v=p.dispatch("PastePostProcess",{node:f,internal:b});return GC(v.node.innerHTML,v.isDefaultPrevented())})(l,g,d):GC(g,u.isDefaultPrevented())})(t,e,n);var s,i,l,c;r.cancelled||(s=t,i=r.content,o||!wx(s)?Ff(s,i):(l=s,c=i,Y.each([ZA,tR,Ff],d=>!d(l,c,Ff))))},zc=(t,e,n)=>{const o=n||VC(e);QC(t,e.replace(If,""),o,!1)},Uf=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((r,s,i)=>{const a=r.split(/\n\n/),l=((u,g)=>{let p="<"+u;const m=hi(g,(b,f)=>f+'="'+or.encodeAllRaw(b)+'"');return m.length&&(p+=" "+m.join(" ")),p+">"})(s,i),c="</"+s+">",d=Et(a,u=>u.split(/\n/).join("<br />"));return 1===d.length?d[0]:Et(d,u=>l+u+c).join("")})($g(n,xx(t)),nn(t),Qi(t));QC(t,o,!1,!0)},JC=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},ei=(t,e)=>e in t&&t[e].length>0,ZC=t=>ei(t,"text/html")||ei(t,"text/plain"),t1=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(Ol(t)&&o){const s=((i,a)=>{const l=a.items?$e(Le(a.items),d=>"file"===d.kind?[d.getAsFile()]:[]):[],c=a.files?Le(a.files):[];return gt(l.length>0?l:c,(d=>{const u=fp(d);return g=>oe(g.type,"image/")&&Ht(u,p=>(m=>{const b=m.toLowerCase(),f={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Y.hasOwn(f,b)?"image/"+f[b]:"image/"+b})(p)===g.type)})(i))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(Et(r,i=>z0(i).then(a=>({file:i,uri:a}))))).then(i=>{n&&t.selection.setRng(n),W(i,a=>{var l,c;l=t,Bm((c=a).uri).each(({data:d,type:u,base64Encoded:g})=>{const p=g?d:btoa(d),m=c.file,b=l.editorUpload.blobCache,v=b.getByData(p,u)??((y,_,k,E)=>{const x=eR(),A=np(y)&&et(k.name),N=A?((P,F)=>{const M=F.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return et(M)?P.dom.encode(M[1]):void 0})(y,k.name):x,L=_.create(x,k,E,N,A?k.name:void 0);return _.add(L),L})(l,b,m,p);zc(l,`<img src="${v.blobUri()}">`,!1)})})}),!0}return!1},e1=(t,e,n,o)=>{let r=XC(n);const s=ei(e,Uc())||VC(n),i=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(r),a=jf(r);(KC(r)||!r.length||i&&!a)&&(o=!0),(o||a)&&(r=ei(e,"text/plain")&&i?e["text/plain"]:(l=>{const c=rr(),d=Ys({},c);let u="";const g=c.getVoidElements(),p=Y.makeMap("script noscript style textarea video audio iframe object"," "),m=c.getBlockElements(),b=f=>{const v=f.name,y=f;if("br"!==v){if("wbr"!==v)if(g[v]&&(u+=" "),p[v])u+=" ";else{if(3===f.type&&(u+=f.value),!(f.name in c.getVoidElements())){let _=f.firstChild;if(_)do{b(_)}while(_=_.next)}m[v]&&y.next&&(u+="\n","p"===v&&(u+="\n"))}}else u+="\n"};return l=YC(l,[/<!\[[^\]]+\]>/g]),b(d.parse(l)),u})(r)),KC(r)||(o?Uf(t,r):zc(t,r,s))},n1=(t,e,n,o)=>{((r,s,i)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",i),r.setData(Uc(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},o1=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),o.add(t.getBody(),s);const a=r.getRng();i.focus();const l=o.createRng();l.selectNodeContents(i),r.setRng(l),yn.setEditorTimeout(t,()=>{r.setRng(a),o.remove(s),n()},0)},r1=t=>({html:QA(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),s1=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},i1=(t,e)=>{var n,o;return es.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},a1=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},oR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l1=t=>Y.trim(t).replace(oR,jl).toLowerCase(),rR=(t,e,n)=>{const o=yx(t);if(n||"all"===o||!_x(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,i=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,l,c,d)=>{const u=s.parseStyle(s.decode(c)),g={};for(let m=0;m<r.length;m++){const b=u[r[m]];let f=b,v=s.getStyle(i,r[m],!0);/color/.test(r[m])&&(f=l1(f),v=l1(v)),v!==f&&(g[r[m]]=b)}const p=s.serializeStyle(g,"span");return p?l+' style="'+p+'"'+d:l+d})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,i,a,l)=>i+' style="'+a+'"'+l)},iR=Zt,c1=K,aR=t=>Ut(t.dom),d1=t=>e=>kt(S(t),e),u1=(t,e)=>Mr(S(t),aR,d1(e)),m1=(t,e,n)=>{const o=new ie(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let i=n?t:r();i&&!iR(i);i=r())On(i)&&(s=i);return s};var ni;!function(t){t.Before="before",t.After="after"}(ni||(ni={}));const cR=(t,e)=>Math.abs(t.left-e),dR=(t,e)=>Math.abs(t.right-e),mR=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),zf=(t,e,n)=>{const o=c=>On(c.node)?C.some(c):ot(c.node)?zf(Le(c.node.childNodes),e,n):C.none(),r=(c,d)=>{const u=Co(c,(g,p)=>d(g,e,n)-d(p,e,n));return((g,p)=>{if(g.length>=2){const m=o(g[0]).getOr(g[0]),b=o(g[1]).getOr(g[1]);if(Math.abs(p(m,e,n)-p(b,e,n))<2){if(K(m.node))return C.some(m);if(K(b.node))return C.some(b)}}return C.none()})(u,d).orThunk(()=>cn(u,o))},[s,i]=((t,e)=>{return(n=gt(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),he(n,(o,r)=>o.fold(()=>C.some(r),s=>{const i=Math.min(r.left,s.left),a=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return C.some({top:a,right:l,bottom:c,left:i,width:l-i,height:c-a})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Qn(t,s=>((i,a)=>{const l=(c=i,d=a,Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top))/Math.min(i.height,a.height));var c,d;return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(i,a)&&l>.5})(s,n));return[o,r]});var n})(c_(t),n),{pass:a,fail:l}=Qn(i,c=>c.top<n);return r(s,mR).orThunk(()=>r(l,Eh)).orThunk(()=>r(a,Eh))},f1=(t,e,n)=>((o,r,s)=>{const i=S(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(w))(Ne(i),r,s).filter(c=>ke(i,c)).getOr(i);return((c,d,u,g)=>{const p=(m,b)=>{const f=gt(m.dom.childNodes,yr(v=>ot(v)&&v.classList.contains("mce-drag-container")));return b.fold(()=>zf(f,u,g),v=>{const y=gt(f,_=>_!==v.dom);return zf(y,u,g)}).orThunk(()=>(kt(m,c)?C.none():Lr(m)).bind(v=>p(v,C.some(m))))};return p(d,C.none())})(i,l,r,s)})(t,e,n).filter(o=>ta(o.node)).map(o=>{return{node:(r=o).node,position:cR(r,s=e)<dR(r,s)?ni.Before:ni.After};var r,s}),g1=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,i=r.defaultView;return{top:o.top+(null!==(e=i?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=i?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Hf=Ut,fR=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Hf,jn),gR=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const i=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},Hc=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},h1=Hc("left",-32),p1=Hc("left",32),b1=Hc("top",-32),v1=Hc("top",32),y1=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},_1=t=>{t.on(e=>{e.intervalId.clear(),y1(e.ghost)}),t.clear()},oi=Ut,$f=(t,e)=>ss(t.getBody(),e),bR=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=sr();let s,i;const a=nn(t),l=t.dom,c=()=>{(d=>{var u,g;const p=Te(S(d),"*[contentEditable=false],video,audio,embed,object");for(let m=0;m<p.length;m++){const b=p[m].dom;let f=b.previousSibling;if(bl(f)){const v=f.data;1===v.length?null===(u=f.parentNode)||void 0===u||u.removeChild(f):f.deleteData(v.length-1,1)}f=b.nextSibling,pl(f)&&(1===f.data.length?null===(g=f.parentNode)||void 0===g||g.removeChild(f):f.deleteData(0,1))}})(e),i&&(Gr(i),i=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,u)=>{let g;if(c(),Ix(u))return null;if(!n(u))return i=((p,m)=>{var b;const f=(null!==(b=p.ownerDocument)&&void 0!==b?b:document).createTextNode(xe),v=p.parentNode;if(m){const y=p.previousSibling;if(Ts(y)){if(gn(y))return y;if(bl(y))return y.splitText(y.data.length-1)}v?.insertBefore(f,p)}else{const y=p.nextSibling;if(Ts(y)){if(gn(y))return y;if(pl(y))return y.splitText(1),y}p.nextSibling?v?.insertBefore(f,p.nextSibling):v?.appendChild(f)}return f})(u,d),g=u.ownerDocument.createRange(),Zi(i.nextSibling)?(g.setStart(i,0),g.setEnd(i,0)):(g.setStart(i,1),g.setEnd(i,1)),g;{const p=((f,v,y)=>{var _;const k=(null!==(_=v.ownerDocument)&&void 0!==_?_:document).createElement(f);k.setAttribute("data-mce-caret",y?"before":"after"),k.setAttribute("data-mce-bogus","all"),k.appendChild(kd().dom);const E=v.parentNode;return y?E?.insertBefore(k,v):v.nextSibling?E?.insertBefore(k,v.nextSibling):E?.appendChild(k),k})(a,u,d),m=yp(e,u,d);l.setStyle(p,"top",m.top),i=p;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...m}),l.add(e,b),r.set({caret:b,element:u,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=setInterval(()=>{r.on(f=>{o()?l.toggleClass(f.caret,"mce-visual-caret-hidden"):l.addClass(f.caret,"mce-visual-caret-hidden")})},500),g=u.ownerDocument.createRange(),g.setStart(p,0),g.setEnd(p,0)}return g},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const u=yp(e,d.element,d.before);l.setStyles(d.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>ns(t)),s="sel-"+n.uniqueId(),i="data-mce-selected";let a;const l=f=>f!==o&&(oi(f)||oo(f))&&n.isChildOf(f,o),c=(f,v,y,_=!0)=>t.dispatch("ShowCaret",{target:v,direction:f,before:y}).isDefaultPrevented()?null:(_&&e.scrollIntoView(v,-1===f),r.show(y,v)),d=f=>gn(f)||pl(f)||bl(f),u=f=>d(f.startContainer)||d(f.endContainer),p=(f,v)=>{if(!f)return null;if(f.collapsed){if(!u(f)){const E=v?1:-1,x=ra(E,o,f),A=x.getNode(!v);if(et(A)){if(ta(A))return c(E,A,!!v&&!x.isAtEnd(),!1);if(nr(A)&&Ut(A.nextSibling)){const R=n.createRng();return R.setStart(A,0),R.setEnd(A,0),R}}const N=x.getNode(v);if(et(N)){if(ta(N))return c(E,N,!v&&!x.isAtEnd(),!1);if(nr(N)&&Ut(N.previousSibling)){const R=n.createRng();return R.setStart(N,1),R.setEnd(N,1),R}}}return null}let y=f.startContainer,_=f.startOffset;const k=f.endOffset;if(K(y)&&0===_&&oi(y.parentNode)&&(y=y.parentNode,_=n.nodeIndex(y),y=y.parentNode),!ot(y))return null;if(k===_+1&&y===f.endContainer){const E=y.childNodes[_];if(l(E))return(x=>{const A=x.cloneNode(!0),N=t.dispatch("ObjectSelected",{target:x,targetClone:A});if(N.isDefaultPrevented())return null;const R=((P,F)=>{const M=S(t.getBody()),z=t.getDoc(),G=Bi(M,"#"+s).getOrThunk(()=>{const mt=D('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',z);return re(mt,"id",s),de(M,mt),mt}),Q=n.createRng();Oi(G),Ir(G,[it(be,z),S(F),it(be,z)]),Q.setStart(G.dom.firstChild,1),Q.setEnd(G.dom.lastChild,0),al(G,{top:n.getPos(P,t.getBody()).y+"px"}),Lb(G);const dt=e.getSel();return dt&&(dt.removeAllRanges(),dt.addRange(Q)),Q})(x,N.targetClone),L=S(x);return W(Te(S(t.getBody()),"*[data-mce-selected]"),P=>{kt(L,P)||se(P,i)}),n.getAttrib(x,i)||x.setAttribute(i,"1"),a=x,b(),R})(E)}return null},m=()=>{a&&a.removeAttribute(i),Bi(S(t.getBody()),"#"+s).each(qt),a=null},b=()=>{r.hide()};return fo(t)||(t.on("click",f=>{const v=$f(t,f.target);v&&oi(v)&&(f.preventDefault(),t.focus())}),t.on("blur NewBlock",m),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",f=>{const v=f.target,y=$f(t,v);oi(y)?(f.preventDefault(),wa(t,y).each(p)):l(v)&&wa(t,v).each(p)},!0),t.on("mousedown",f=>{const v=f.target;if(v!==o&&"HTML"!==v.nodeName&&!n.isChildOf(v,o)||!((_,k,E)=>{const x=S(_.getBody()),A=_.inline?x:S(Ne(x).dom.documentElement),N=((R,L,P,F)=>{const M=L.dom.getBoundingClientRect();return{x:P-(R?M.left+L.dom.clientLeft+nN(L):0),y:F-(R?M.top+L.dom.clientTop+eN(L):0)}})(_.inline,A,k,E);return((R,L,P)=>{const F=ZS(R),M=tN(R);return L>=0&&P>=0&&L<=F&&P<=M})(A,N.x,N.y)})(t,f.clientX,f.clientY))return;m(),b();const y=$f(t,v);oi(y)?(f.preventDefault(),wa(t,y).each(p)):f1(o,f.clientX,f.clientY).each(_=>{var k;f.preventDefault(),(k=c(1,_.node,_.position===ni.Before,!1))&&e.setRng(k),ot(y)?y.focus():t.getBody().focus()})}),t.on("keypress",f=>{ct.modifierPressed(f)||oi(e.getNode())&&f.preventDefault()}),t.on("GetSelectionRange",f=>{let v=f.range;if(a){if(!a.parentNode)return void(a=null);v=v.cloneRange(),v.selectNode(a),f.range=v}}),t.on("SetSelectionRange",f=>{f.range=(f=>{const v=t.schema.getVoidElements(),y=n.createRng(),_=f.startContainer,k=f.startOffset,E=f.endContainer,x=f.endOffset;return Ct(v,_.nodeName.toLowerCase())?0===k?y.setStartBefore(_):y.setStartAfter(_):y.setStart(_,k),Ct(v,E.nodeName.toLowerCase())?0===x?y.setEndBefore(E):y.setEndAfter(E):y.setEnd(E,x),y})(f.range);const v=p(f.range,f.forward);v&&(f.range=v)}),t.on("AfterSetSelectionRange",f=>{const v=f.range,y=v.startContainer.parentElement;var _,k;u(v)||ot(_=y)&&"mcepastebin"===_.id||b(),et(k=y)&&n.hasClass(k,"mce-offscreen-selection")||m()}),(t=>{const e=sr(),n=Pt.DOM,o=document,r=(l=e,c=t,d=>{if(0===d.button){const p=ne(c.dom.getParents(d.target),fR).getOr(null);if(et(p)&&(u=c.getBody(),Hf(g=p)&&g!==u)){const m=c.dom.getPos(p),b=c.getBody(),f=c.getDoc().documentElement;l.set({element:p,dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?b.scrollWidth:f.offsetWidth)-2,maxY:(c.inline?b.scrollHeight:f.offsetHeight)-2,relX:d.pageX-m.x,relY:d.pageY-m.y,width:p.offsetWidth,height:p.offsetHeight,ghost:gR(c,p,p.offsetWidth,p.offsetHeight),intervalId:dk(100)})}}var u,g}),s=((t,e)=>{const n=El((r,s)=>{e._selectionOverrides.hideFakeCaret(),f1(e.getBody(),r,s).fold(()=>e.selection.placeCaretAt(r,s),i=>{const a=e._selectionOverrides.showCaret(1,i.node,i.position===ni.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(r,s)})},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const i=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&i>10){if(e.dispatch("dragstart",{target:s.element}).isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const c=r.currentTarget===e.getDoc().documentElement,d=((u,g)=>({pageX:g.pageX-u.relX,pageY:g.pageY+5}))(s,(g=r,p=(f=u=e).inline?g1(f.getBody()):{left:0,top:0},m=(f=>{const v=f.getBody();return f.inline?{left:v.scrollLeft,top:v.scrollTop}:{left:0,top:0}})(u),b=((f,v)=>{if(v.target.ownerDocument!==f.getDoc()){const y=g1(f.getContentAreaContainer()),_=(k=>{const E=k.getBody(),x=k.getDoc().documentElement;return k.inline?{left:E.scrollLeft,top:E.scrollTop}:{left:E.scrollLeft||x.scrollLeft,top:E.scrollTop||x.scrollTop}})(f);return{left:v.pageX-y.left+_.left,top:v.pageY-y.top+_.top}}return{left:v.pageX,top:v.pageY}})(u,g),{pageX:b.left-p.left+m.left,pageY:b.top-p.top+m.top}));a=s.ghost,l=e.getBody(),a.parentNode!==l&&l.appendChild(a),((u,g,p,m,b,f,v,y,_,k,E,x)=>{let A=0,N=0;u.style.left=g.pageX+"px",u.style.top=g.pageY+"px",g.pageX+p>b&&(A=g.pageX+p-b),g.pageY+m>f&&(N=g.pageY+m-f),u.style.width=p-A+"px",u.style.height=m-N+"px";const R=_.clientHeight,L=_.clientWidth,P=v+_.getBoundingClientRect().top,F=y+_.getBoundingClientRect().left;E.on(M=>{M.intervalId.clear(),M.dragging&&x&&(v+8>=R?M.intervalId.set(v1(k)):v-8<=0?M.intervalId.set(b1(k)):y+8>=L?M.intervalId.set(p1(k)):y-8<=0?M.intervalId.set(h1(k)):P+16>=window.innerHeight?M.intervalId.set(v1(window)):P-16<=0?M.intervalId.set(b1(window)):F+16>=window.innerWidth?M.intervalId.set(p1(window)):F-16<=0&&M.intervalId.set(h1(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var u,g,f,p,m,b,a,l})})(e,t),i=((l,c)=>d=>{l.on(u=>{if(u.intervalId.clear(),u.dragging){if(g=c,p=(g=>{const p=g.getSel();if(et(p)){const m=p.getRangeAt(0).startContainer;return K(m)?m.parentNode:m}return null})(c.selection),m=u.element,!It(p)&&p!==m&&!g.dom.isChildOf(p,m)&&!Hf(p)){const g=(p=>{const m=p.cloneNode(!0);return m.removeAttribute("data-mce-selected"),m})(u.element);c.dispatch("drop",{clientX:d.clientX,clientY:d.clientY}).isDefaultPrevented()||c.undoManager.transact(()=>{y1(u.element),c.insertContent(c.dom.getOuterHTML(g)),c._selectionOverrides.hideFakeCaret()})}c.dispatch("dragend")}var g,p,m}),_1(l)})(e,t),a=((l,c)=>()=>{l.on(d=>{d.intervalId.clear(),d.dragging&&c.dispatch("dragend")}),_1(l)})(e,t);var l,c;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",i),n.bind(o,"mousemove",s),n.bind(o,"mouseup",a),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",a)}),t.on("keydown",l=>{l.keyCode===ct.ESC&&a()})})(f=t),ix(f)&&(v=>{const y=E=>{if(!E.isDefaultPrevented()){const x=E.dataTransfer;x&&(Bt(x.types,"Files")||x.files.length>0)&&(E.preventDefault(),"drop"===E.type&&vc(v,"Dropped file type is not supported"))}},_=E=>{Ql(v,E.target)&&y(E)},k=()=>{const E=Pt.DOM,x=v.dom,A=document,N=v.inline?v.getBody():v.getDoc(),R=["drop","dragover"];W(R,L=>{E.bind(A,L,_),x.bind(N,L,y)}),v.on("remove",()=>{W(R,L=>{E.unbind(A,L,_),x.unbind(N,L,y)})})};v.on("init",()=>{yn.setEditorTimeout(v,k,0)})})(f),(f=>{const v=El(()=>{if(!f.removed&&f.getBody().contains(document.activeElement)){const y=f.selection.getRng();if(y.collapsed){const _=Ym(f,y,!1);f.selection.setRng(_)}}},0);f.on("focus",()=>{v.throttle()}),f.on("blur",()=>{v.cancel()})})(t),(f=>{f.on("init",()=>{f.on("focusin",v=>{const y=v.target;if(oo(y)){const _=ss(f.getBody(),y),k=Ut(_)?_:y;f.selection.getNode()!==k&&wa(f,k).each(E=>f.selection.setRng(E))}})})})(t)),{showCaret:c,showBlockCaretContainer:f=>{f.hasAttribute("data-mce-caret")&&(Sd(f),e.scrollIntoView(f))},hideFakeCaret:b,destroy:()=>{r.destroy(),a=null}};var f},vR=(t,e)=>{let n=e;for(let o=t.previousSibling;K(o);o=o.previousSibling)n+=o.data.length;return n},C1=(t,e,n,o,r)=>{if(K(n)&&(o<0||o>n.data.length))return[];const s=r&&K(n)?[vR(n,o)]:[o];let i=n;for(;i!==e&&i.parentNode;)s.push(t.nodeIndex(i,r)),i=i.parentNode;return i===e?s.reverse():[]},qf=(t,e,n,o,r,s,i=!1)=>({start:C1(t,e,n,o,i),end:C1(t,e,r,s,i)}),w1=(t,e)=>{const n=e.slice(),o=n.pop();return ln(o)?he(n,(r,s)=>r.bind(i=>C.from(i.childNodes[s])),C.some(t)).bind(r=>K(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},k1=(t,e)=>w1(t,e.start).bind(({node:n,offset:o})=>w1(t,e.end).map(({node:r,offset:s})=>{const i=document.createRange();return i.setStart(n,o),i.setEnd(r,s),i})),ri=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e),ri(t,o,n)}},$c=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(K(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),K(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),ri(t,r,n),r!==s&&ri(t,s,n))},Vf=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),x1=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Yh(o).concat(t.blockPatterns),inlinePatterns:Xh(o).concat(t.inlinePatterns)}},E1=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},S1=(t,e,n)=>{((o,r,s)=>{if(K(o)&&0>=o.length)return C.some(Kn(o,0));{const i=Kr(Ac);return C.from(i.forwards(o,0,Rc(o),s)).map(a=>Kn(a.container,0))}})(e,0,e).each(o=>{const r=o.container;aC(r,n.start.length,e).each(s=>{const i=t.createRng();i.setStart(r,0),i.setEnd(s.container,s.offset),$c(t,i,a=>a===e)})})},N1=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),qc=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},A1=(t,e,n)=>{const o=k1(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,i=0===o.endOffset?s:s.splitText(o.endOffset),a=0===o.startOffset?r:r.splitText(o.startOffset),l=a.parentNode;return{prefix:e,end:i.parentNode.insertBefore(N1(t,e+"-end"),i),start:l.insertBefore(N1(t,e+"-start"),a)}},R1=(t,e,n)=>{ri(t,t.get(e.prefix+"-end"),n),ri(t,t.get(e.prefix+"-start"),n)},Wf=t=>0===t.start.length,T1=(t,e,n,o)=>{const r=e.start;var s;return bf(t,o.container,o.offset,(s=r,(i,a)=>{const l=i.data.substring(0,a),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return-1!==d?d+s.length:-1!==c?c+1:-1}),n).bind(i=>{var a,l;const c=null!==(l=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(r))&&void 0!==l?l:-1;if(-1!==c&&i.offset>=c+r.length){const d=t.createRng();return d.setStart(i.container,i.offset-r.length),d.setEnd(i.container,i.offset),C.some(d)}return pf(i.container,i.offset-r.length,n).map(u=>{const g=t.createRng();return g.setStart(u.container,u.offset),g.setEnd(i.container,i.offset),g}).filter(u=>u.toString()===r).orThunk(()=>T1(t,e,n,Kn(i.container,0)))})},yR=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),i=n.pattern,a=n.position.container,l=n.position.offset;return pf(a,l-n.pattern.end.length,e).bind(c=>{const d=qf(r,s,c.container,c.offset,a,l,o);if(Wf(i))return C.some({matches:[{pattern:i,startRng:d,endRng:d}],position:c});{const u=Vc(t,n.remainingPatterns,c.container,c.offset,e,o),g=u.getOr({matches:[],position:c}),p=g.position;return((b,f,v,y,_,k=!1)=>{if(0===f.start.length&&!k){const E=b.createRng();return E.setStart(v,y),E.setEnd(v,y),C.some(E)}return hf(v,y,_).bind(E=>T1(b,f,_,E).bind(x=>{var A;return k&&(x.endContainer===E.container&&x.endOffset===E.offset||0===E.offset&&(null===(A=x.endContainer.textContent)||void 0===A?void 0:A.length)===x.endOffset)?C.none():C.some(x)}))})(r,i,p.container,p.offset,e,u.isNone()).map(b=>{const f=((v,y,_,k=!1)=>qf(v,y,_.startContainer,_.startOffset,_.endContainer,_.endOffset,k))(r,s,b,o);return{matches:g.matches.concat([{pattern:i,startRng:f,endRng:d}]),position:Kn(b.startContainer,b.startOffset)}})}})},Vc=(t,e,n,o,r,s)=>{const i=t.dom;return hf(n,o,i.getRoot()).bind(a=>{const l=E1(i,r,n,o);for(let c=0;c<e.length;c++){const d=e[c];if(!vi(l,d.end))continue;const u=e.slice();u.splice(c,1);const g=yR(t,r,{pattern:d,remainingPatterns:u,position:a},s);if(g.isNone()&&o>0)return Vc(t,e,n,o-1,r,s);if(g.isSome())return g}return C.none()})},O1=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?W(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},D1=(t,e,n,o,r,s)=>{var i;return((a,l)=>{const c=Ze(a,d=>Ht(l,u=>d.pattern.start===u.pattern.start&&d.pattern.end===u.pattern.end));return a.length===l.length?c?a:l:a.length>l.length?a:l})(Vc(t,r.inlinePatterns,n,o,e,s).fold(()=>[],a=>a.matches),Vc(t,(i=r.inlinePatterns,Co(i,(a,l)=>l.end.length-a.end.length)),n,o,e,s).fold(()=>[],a=>a.matches))},B1=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,i)=>{const a=yh("mce_textpattern"),l=_r(i,(c,d)=>{const u=A1(s,a+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:u}])},[]);return _r(l,(c,d)=>{const u=l.length-c.length-1,g=Wf(d.pattern)?d.endMarker:A1(s,a+`_start${u}`,d.startRng);return c.concat([{...d,startMarker:g}])},[])})(n,e);W(r,s=>{const i=n.getParent(s.startMarker.start,n.isBlock),a=l=>l===i;Wf(s.pattern)?((l,c,d,u)=>{const g=qc(l.dom,d);$c(l.dom,g,u),O1(l,c,g)})(t,s.pattern,s.endMarker,a):((l,c,d,u,g)=>{const p=l.dom,m=qc(p,u),b=qc(p,d);$c(p,b,g),$c(p,m,g);const v=qc(p,{prefix:d.prefix,start:d.end,end:u.start});O1(l,c,v)})(t,s.pattern,s.startMarker,s.endMarker,a),R1(n,s.endMarker,a),R1(n,s.startMarker,a)}),t.selection.moveToBookmark(o)},L1=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},Kf=Pt.DOM,wR=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Yf=t=>qo(t,e=>!1===zt(e)),P1=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Yf({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),remove_trailing_brs:e("remove_trailing_brs"),inline_styles:e("inline_styles"),root_name:wR(t),validate:!0,blob_cache:n,document:t.getDoc()})},I1=t=>{const e=t.options.get;return Yf({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},M1=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,F1=t=>{const e=M1(t),n=ip(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";Y.each(t.contentStyles,c=>{l+=c+"\r\n"}),t.dom.addStyle(l)}const i=Promise.all(((l,c,d)=>{const u=[M1(l).loadAll(c)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(d)])})(t,o,n)).then(s).catch(s),a=Uk(t);return a&&((l,c)=>{const d=S(l.getBody()),u=gd(Go(d)),g=V("style");re(g,"type","text/css"),de(g,it(c)),de(u,g),l.on("remove",()=>{qt(g)})})(t,a),i},Xf=t=>{var e;!0!==t.removed&&(fo(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||Ul(o)&&o.selection.getStart(!0)!==r||Fe(r).each(s=>{const i=s.getNode(),a=Ro(i)?Fe(i).getOr(s):s;o.selection.setRng(a.toRange())})})(e),e.nodeChanged({initial:!0});const n=ux(e);Rt(n)&&n.call(e,e),(o=>{const r=fx(o);r&&yn.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},j1=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Kf.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var i,a;o.disabled=!0,t.readonly=cp(t),t.readonly||(t.inline&&"static"===Kf.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let b=[];const f=_=>{if(!_.blob||!_.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const k=_.id||"blobid"+sN+++(()=>{const N=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+N()+N()+N()})(),E=_.name||k,x=_.blob;var A;return{id:J(k),name:J(E),filename:J(_.filename||E+"."+(A=x.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[A.toLowerCase()]||"dat")),blob:J(x),base64:J(_.base64),blobUri:J(_.blobUri||URL.createObjectURL(x)),uri:J(_.uri)}},v=_=>ne(b,_).getOrUndefined(),y=_=>v(k=>k.id()===_);return{create:(_,k,E,x,A)=>{if(ft(_))return f({id:_,name:x,filename:A,blob:k,base64:E});if(le(_))return f(_);throw new Error("Unknown input type")},add:_=>{y(_.id())||b.push(_)},get:y,getByUri:_=>v(k=>k.blobUri()===_),getByData:(_,k)=>v(E=>E.base64()===_&&E.blob().type===k),findFirst:v,removeByUri:_=>{b=gt(b,k=>k.blobUri()!==_||(URL.revokeObjectURL(k.blobUri()),!1))},destroy:()=>{W(b,_=>{URL.revokeObjectURL(_.blobUri())}),b=[]}}})();let n,o;const r=ky(),s=[],i=b=>f=>t.selection?b(f):[],a=(b,f,v)=>{let y=0;do{y=b.indexOf(f,y),-1!==y&&(b=b.substring(0,y)+v+b.substr(y+f.length),y+=v.length-f.length+1)}while(-1!==y);return b},l=(b,f,v)=>(b=a(b,`src="${f}"`,`src="${v}"${v===At.transparentSrc?' data-mce-placeholder="1"':""}`),a(b,'data-mce-src="'+f+'"','data-mce-src="'+v+'"')),c=(b,f)=>{W(t.undoManager.data,v=>{"fragmented"===v.type?v.fragments=Et(v.fragments,y=>l(y,b,f)):v.content=l(v.content,b,f)})},d=()=>(n||(n=Ey(t,r)),p().then(i(b=>{const f=Et(b,v=>v.blobInfo);return n.upload(f,xy(t)).then(i(v=>{const y=[];let _=!1;const k=Et(v,(E,x)=>{const{blobInfo:A,image:N}=b[x];let R=!1;return E.status&&Tk(t)?(E.url&&!ce(N.src,E.url)&&(_=!0),e.removeByUri(N.src),fo(t)||((L,P)=>{const F=t.convertURL(P,"src");var M;c(L.src,P),to(S(L),{src:np(t)?(M=P,M+(-1===M.indexOf("?")?"?":"&")+(new Date).getTime()):P,"data-mce-src":F})})(N,E.url)):E.error&&(E.error.remove&&(c(N.src,At.transparentSrc),y.push(N),R=!0),vc(t,zn.translate(["Failed to upload image: {0}",E.error.message]))),{element:N,status:E.status,uploadUri:E.url,blobInfo:A,removed:R}});return y.length>0&&!fo(t)?t.undoManager.transact(()=>{W(y,E=>{t.dom.remove(E),e.removeByUri(E.src)})}):_&&t.undoManager.dispatchChange(),k}))}))),u=()=>ep(t)?d():Promise.resolve([]),g=b=>Ze(s,f=>f(b)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=Gt)=>{const s=gt((a=o)?Le(a.getElementsByTagName("img")):[],a=>{const l=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!l||l===At.transparentSrc)&&(oe(l,"blob:")?!t.isUploaded(l)&&r(a):!!oe(l,"data:")&&r(a))}),i=Et(s,a=>{const l=a.src;if(Ct(n,l))return n[l].then(c=>ft(c)?c:{image:a,blobInfo:c.blobInfo});{const c=((d,u)=>{const g=()=>Promise.reject("Invalid data URI");if(oe(u,"blob:")){const b=d.getByUri(u);return et(b)?Promise.resolve(b):(p=u,oe(p,"blob:")?(f=p,fetch(f).then(v=>v.ok?v.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${f} to Blob. Resource might not exist or is inaccessible.`))):oe(p,"data:")?(m=p,new Promise((f,v)=>{Bm(m).bind(({type:y,data:_,base64Encoded:k})=>U0(y,_,k)).fold(()=>v("Invalid data URI"),f)})):Promise.reject("Unknown URI format")).then(f=>z0(f).then(v=>H0(v,!1,y=>C.some($0(d,f,y))).getOrThunk(g)))}var f,p,m;return oe(u,"data:")?q0(d,u).fold(g,b=>Promise.resolve(b)):Promise.reject("Unknown image data format")})(e,l).then(d=>(delete n[l],{image:a,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});var a;return Promise.all(i)}}})(r,e)),o.findAll(t.getBody(),g).then(i(b=>{const f=gt(b,v=>!ft(v)||(vc(t,v),!1));return fo(t)||W(f,v=>{c(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")}),f}))),m=b=>b.replace(/src="(blob:[^"]+)"/g,(f,v)=>{const y=r.getResultUri(v);if(y)return'src="'+y+'"';let _=e.getByUri(v);return _||(_=he(t.editorManager.get(),(k,E)=>k||E.editorUpload&&E.editorUpload.blobCache.getByUri(v),void 0)),_?'src="data:'+_.blob().type+";base64,"+_.base64()+'"':f});return t.on("SetContent",()=>{ep(t)?u():p()}),t.on("RawSaveContent",b=>{b.content=m(b.content)}),t.on("GetContent",b=>{b.source_view||"raw"===b.format||"tree"===b.format||(b.content=m(b.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",b=>{W(b,f=>{const v=f.attr("src");if(!v||e.getByUri(v))return;const y=r.getResultUri(v);y&&f.attr("src",y)})})}),{blobCache:e,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=rr(I1(t)),t.dom=Pt(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:Ik(t),referrerPolicy:Jd(t),onSetAttrib:i=>{t.dispatch("SetAttrib",i)}}),t.parser=(i=>{const a=Ys(P1(i),i.schema);return a.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=i.dom,u="data-mce-"+c;let g=l.length;for(;g--;){const p=l[g];let m=p.attr(c);if(m&&!p.attr(u)){if(0===m.indexOf("data:")||0===m.indexOf("blob:"))continue;"style"===c?(m=d.serializeStyle(d.parseStyle(m),p.name),m.length||(m=null),p.attr(u,m),p.attr(c,m)):"tabindex"===c?(p.attr(u,m),p.attr(c,null)):p.attr(u,i.convertURL(m,c,p.name))}}}),a.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],u=d.attr("type")||"no/type";0!==u.indexOf("mce-")&&d.attr("type","mce-"+u)}}),Tx(i)&&a.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const u=l[d];u.type=8,u.name="#comment",u.value="[CDATA["+i.dom.encode(null!==(c=u.value)&&void 0!==c?c:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=i.schema.getNonEmptyElements();for(;c--;){const u=l[c];u.isEmpty(d)&&0===u.getAll("br").length&&u.append(new je("br",1))}}),a})(t),t.serializer=py((i=>{const a=i.options.get;return{...P1(i),...I1(i),...Yf({url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(t),t),t.selection=hy(t.dom,t.getWin(),t.serializer,t),t.annotator=ab(t),t.formatter=Ay(t),t.undoManager=Ty(t),t._nodeChangeDispatcher=new GA(t),t._selectionOverrides=bR(t),(i=>{const a=sr(),l=ue(!1),c=zd(d=>{i.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);i.on("touchstart",d=>{T_(d).each(u=>{c.cancel();const g={x:u.clientX,y:u.clientY,target:d.target};c.throttle(d),l.set(!1),a.set(g)})},!0),i.on("touchmove",d=>{c.cancel(),T_(d).each(u=>{a.on(g=>{((p,m)=>{const b=Math.abs(p.clientX-m.x),f=Math.abs(p.clientY-m.y);return b>5||f>5})(u,g)&&(a.clear(),l.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",d=>{c.cancel(),"touchcancel"!==d.type&&a.get().filter(u=>u.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():i.dispatch("tap",{...d,type:"tap"})})},!0)})(t),(a=i=t).on("click",l=>{a.dom.getParent(l.target,"details")&&l.preventDefault()}),(a=>{a.parser.addNodeFilter("details",l=>{W(l,c=>{c.attr("data-mce-open",c.attr("open")),c.attr("open","open")})}),a.serializer.addNodeFilter("details",l=>{W(l,c=>{const d=c.attr("data-mce-open");c.attr("open",ft(d)?d:null),c.attr("data-mce-open",null)})})})(i),(i=>{const a="contenteditable",l=" "+Y.trim(Ax(i))+" ",c=" "+Y.trim(mp(i))+" ",d=B_(l),u=B_(c),g=Rx(i);g.length>0&&i.on("BeforeSetContent",p=>{((m,b,f)=>{let v=b.length,y=f.content;if("raw"!==f.format){for(;v--;)y=y.replace(b[v],YN(m,y,mp(m)));f.content=y}})(i,g,p)}),i.parser.addAttributeFilter("class",p=>{let m=p.length;for(;m--;){const b=p[m];d(b)?b.attr(a,"true"):u(b)&&b.attr(a,"false")}}),i.serializer.addAttributeFilter(a,p=>{let m=p.length;for(;m--;){const b=p[m];(d(b)||u(b))&&(g.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(a,null))}})})(t),fo(t)||((i=>{i.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),(t=>{const e=((n,o)=>{const r=j.fromRangeStart(n).getNode(),s=(d=o,Mr(S(r),u=>jn(u.dom)||Un(u),d1(d)).getOr(S(d)).dom),i=m1(r,s,!1),a=m1(r,s,!0),l=document.createRange();var d;return u1(i,s).fold(()=>{c1(i)?l.setStart(i,0):l.setStartBefore(i)},c=>l.setStartBefore(c.dom)),u1(a,s).fold(()=>{c1(a)?l.setEnd(a,a.data.length):l.setEndAfter(a)},c=>l.setEndAfter(c.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(lm(e))})(i))})})(t),(i=>{(a=>{const l=[",",".",";",":","!","?"],c=[32],d=()=>{return p=Sx(a),m=Nx(a),{inlinePatterns:Xh(p),blockPatterns:Yh(p),dynamicPatternsLookup:m};var p,m},u=()=>a.options.isSet("text_patterns_lookup");a.on("keydown",p=>{if(13===p.keyCode&&!ct.modifierPressed(p)&&a.selection.isCollapsed()){const m=d();(m.inlinePatterns.length>0||m.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return Vf(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),i=x1(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),a=D1(t,o,n.startContainer,s,i,!0),l=((c,d,u,g)=>{var p;const m=c.dom,b=nn(c);if(!m.is(d,b))return[];const f=null!==(p=d.textContent)&&void 0!==p?p:"";return((v,y)=>{const _=Co(v,(x,A)=>A.start.length-x.start.length),k=y.replace(be," ");return ne(_,E=>0===y.indexOf(E.start)||0===k.indexOf(E.start))})(u.blockPatterns,f).map(v=>Y.trim(f).length===v.start.length?[]:[{pattern:v,range:qf(m,m.getRoot(),d,0,d,0,!0)}]).getOr([])})(t,o,i);return(l.length>0||a.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),B1(t,a),((u,g)=>{if(0===g.length)return;const p=u.selection.getBookmark();W(g,m=>((b,f)=>{const y=f.pattern,_=k1(b.dom.getRoot(),f.range).getOrDie("Unable to resolve path range");return Vf(b,_).each(k=>{"block-format"===y.type?((E,x)=>{const A=x.get(E);return Xt(A)&&Se(A).exists(N=>Ct(N,"block"))})(y.format,b.formatter)&&b.undoManager.transact(()=>{S1(b.dom,k,y),b.formatter.apply(y.format)}):"block-command"===y.type&&b.undoManager.transact(()=>{S1(b.dom,k,y),b.execCommand(y.cmd,!1,y.value)})}),!0})(u,m)),u.selection.moveToBookmark(p)})(t,l);const c=t.selection.getRng(),d=hf(c.startContainer,c.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),d.each(u=>{const g=u.container;"\ufeff"===g.data.charAt(u.offset-1)&&(g.deleteData(u.offset-1,1),ri(t.dom,g.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(a,m)&&p.preventDefault()}},!0);const g=()=>{if(a.selection.isCollapsed()){const p=d();(p.inlinePatterns.length>0||u())&&((m,b)=>{const f=m.selection.getRng();Vf(m,f).map(v=>{const y=Math.max(0,f.startOffset-1),_=E1(m.dom,v,f.startContainer,y),k=x1(b,v,_),E=D1(m,v,f.startContainer,y,k,!1);E.length>0&&m.undoManager.transact(()=>{B1(m,E)})})})(a,p)}};a.on("keyup",p=>{L1(c,p,(m,b)=>m===b.keyCode&&!ct.modifierPressed(b))&&g()}),a.on("keypress",p=>{L1(l,p,(m,b)=>m.charCodeAt(0)===b.charCode)&&yn.setEditorTimeout(a,g)})})(i)})(t));const r=XA(t);((t,e)=>{t.addCommand("delete",()=>{var n;R_(n=t,e,!1).fold(()=>{Rv(n),Xu(n)},zo)}),t.addCommand("forwardDelete",()=>{var n;R_(n=t,e,!0).fold(()=>Av(n,"ForwardDelete"),zo)})})(t,r),(i=>{i.on("NodeChange",rt(KN,i))})(t),(i=>{var a;const l=i.dom,c=nn(i),d=null!==(a=qk(i))&&void 0!==a?a:"",u=(g,p)=>{if((f=>{if(Dy(f)){const v=f.keyCode;return!By(f)&&(ct.metaKeyPressed(f)||f.altKey||v>=112&&v<=123||Bt(mN,v))}return!1})(g))return;const m=i.getBody(),b=!(Dy(f=g)&&!(By(f)||"keyup"===f.type&&229===f.keyCode))&&((f,v,y)=>{if(te(S(v),!1)){const _=v.firstElementChild;return!_||!f.getStyle(v.firstElementChild,"padding-left")&&!f.getStyle(v.firstElementChild,"padding-right")&&y===_.nodeName.toLowerCase()}return!1})(l,m,c);var f;(""!==l.getAttrib(m,Oy)!==b||p)&&(l.setAttrib(m,Oy,b?d:null),l.setAttrib(m,"aria-placeholder",b?d:null),((f,v)=>{f.dispatch("PlaceholderToggle",{state:v})})(i,b),i.on(b?"keydown":"keyup",u),i.off(b?"keyup":"keydown",u))};dn(d)&&i.on("init",g=>{u(g,!0),i.on("change SetContent ExecCommand",u),i.on("paste",p=>yn.setEditorTimeout(i,()=>u(p)))})})(t),(t=>{const e=ue(!1),n=ue(kx(t)?"text":"html"),o=(r=>{const s=ue(null);return{create:()=>((i,a)=>{const{dom:l,selection:c}=i,d=i.getBody();a.set(c.getRng());const u=l.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},WC);At.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(d,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",g=>{g.stopPropagation()}),u.focus(),c.select(u,!0)})(r,s),remove:()=>((i,a)=>{const l=i.dom;if(Mf(i)){let c;const d=a.get();for(;c=Mf(i);)l.remove(c),l.unbind(c);d&&i.selection.setRng(d)}a.set(null)})(r,s),getEl:()=>Mf(r),getHtml:()=>(i=>{const a=i.dom,l=(g,p)=>{g.appendChild(p),a.remove(p,!0)},[c,...d]=gt(i.getBody().childNodes,JA);W(d,g=>{l(c,g)});const u=a.select("div[id=mcepastebin]",c);for(let g=u.length-1;g>=0;g--){const p=a.create("div");c.insertBefore(p,u[g]),l(p,u[g])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,i;r=t,(At.browser.isChromium()||At.browser.isSafari())&&(i=rR,(s=r).on("PastePreProcess",a=>{a.content=i(s,a.content,a.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((i,a)=>{"text"===a.get()?(a.set("html"),gb(i,!1)):(a.set("text"),gb(i,!0)),i.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(i,a)=>{a.html&&zc(r,a.html,a.internal),a.text&&Uf(r,a.text)})})(t,n),(r=>{const s=l=>c=>{l(r,c)},i=bx(r);Rt(i)&&r.on("PastePreProcess",s(i));const a=vx(r);Rt(a)&&r.on("PastePostProcess",s(a))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>i=>{!i.isDefaultPrevented()&&s1(s)&&n1(i,r1(s),o1(s),()=>{if(At.browser.isChromium()||At.browser.isFirefox()){const a=s.selection.getRng();yn.setEditorTimeout(s,()=>{s.selection.setRng(a),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>i=>{!i.isDefaultPrevented()&&s1(s)&&n1(i,r1(s),o1(s),xt)})(r))})(t),((r,s)=>{px(r)&&r.on("dragend dragover draggesture dragdrop drop drag",i=>{i.preventDefault(),i.stopPropagation()}),Ol(r)||r.on("drop",i=>{const a=i.dataTransfer;a&&Ht(a.files,c=>/^image\//.test(c.type))&&i.preventDefault()}),r.on("drop",i=>{if(i.isDefaultPrevented()||s.get())return;const a=i1(r,i);if(It(a))return;const l=JC(i.dataTransfer),c=ei(l,Uc());if((!ZC(l)||(g=>{const p=g["text/plain"];return!!p&&0===p.indexOf("file://")})(l))&&t1(r,i,a))return;const d=l[Uc()],u=d||l["text/html"]||l["text/plain"];u&&(i.preventDefault(),yn.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{d&&r.execCommand("Delete"),a1(r,a);const g=XC(u);l["text/html"]?zc(r,g,c):Uf(r,g)})}))}),r.on("dragstart",i=>{s.set(!0)}),r.on("dragover dragend",i=>{Ol(r)&&!s.get()&&(i.preventDefault(),a1(r,i1(r,i))),"dragend"===i.type&&s.set(!1)})})(t,e),((t,e,n)=>{((o,r,s)=>{let i;o.on("keydown",a=>{var l;(ct.metaKeyPressed(l=a)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!a.isDefaultPrevented()&&(i=a.shiftKey&&86===a.keyCode)}),o.on("paste",a=>{if(a.isDefaultPrevented()||(d=a,At.os.isAndroid()&&0===(null===(g=null===(u=d.clipboardData)||void 0===u?void 0:u.items)||void 0===g?void 0:g.length)))return;var d,u,g;const l="text"===s.get()||i;i=!1;const c=JC(a.clipboardData);!ZC(c)&&t1(o,a,r.getLastRng()||o.selection.getRng())||(ei(c,"text/html")?(a.preventDefault(),e1(o,c,c["text/html"],l)):(r.create(),yn.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),e1(o,c,d,l)},0)))})})(t,e,n),(o=>{const r=i=>oe(i,"webkit-fake-url"),s=i=>oe(i,"data:");o.parser.addNodeFilter("img",(i,a,l)=>{if(!Ol(o)&&!0===(null===(d=l.data)||void 0===d?void 0:d.paste))for(const c of i){const d=c.attr("src");ft(d)&&!c.attr("data-mce-object")&&d!==At.transparentSrc&&(r(d)||!Ex(o)&&s(d))&&c.remove()}var d})})(t)})(t,o,n)})})(t);const s=(i=>{const a=i;return(l=i,Mt(l.plugins,"rtc").bind(c=>C.from(c.setup))).fold(()=>(a.rtcInstance=cy(i),C.none()),l=>(a.rtcInstance=(()=>{const c=J(null),d=J("");return{init:{bindEvents:xt},undoManager:{beforeChange:xt,add:c,undo:c,redo:c,clear:xt,reset:xt,hasUndo:jt,hasRedo:jt,transact:c,ignore:xt,extra:xt},formatter:{match:jt,matchAll:J([]),matchNode:J(void 0),canApply:jt,closest:d,apply:xt,remove:xt,toggle:xt,formatChanged:J({unbind:xt})},editor:{getContent:d,setContent:J({content:"",html:""}),insertContent:J(""),addVisual:xt},selection:{getContent:d},autocompleter:{addDecoration:xt,removeDecoration:xt},raw:{getModel:J(C.none())}}})(),C.some(()=>l().then(c=>(a.rtcInstance=(d=>{const u=_=>le(_)?_:{},{init:g,undoManager:p,formatter:m,editor:b,selection:f,autocompleter:v,raw:y}=d;return{init:{bindEvents:g.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(_,k,E)=>p.transact(E),ignore:(_,k)=>p.ignore(k),extra:(_,k,E,x)=>p.extra(E,x)},formatter:{match:(_,k,E,x)=>m.match(_,u(k),x),matchAll:m.matchAll,matchNode:m.matchNode,canApply:_=>m.canApply(_),closest:_=>m.closest(_),apply:(_,k,E)=>m.apply(_,u(k)),remove:(_,k,E,x)=>m.remove(_,u(k)),toggle:(_,k,E)=>m.toggle(_,u(k)),formatChanged:(_,k,E,x,A)=>m.formatChanged(k,E,x,A)},editor:{getContent:_=>b.getContent(_),setContent:(_,k)=>({content:b.setContent(_,k),html:""}),insertContent:(_,k)=>(b.insertContent(_),""),addVisual:b.addVisual},selection:{getContent:(_,k)=>f.getContent(k)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>C.some(y.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(t);(i=>{const a=i.getDoc(),l=i.getBody();i.dispatch("PreInit"),gx(i)||(a.body.spellcheck=!1,Kf.setAttrib(l,"spellcheck","false")),i.quirks=(t=>{const e=Y.each,n=ct.BACKSPACE,o=ct.DELETE,r=t.dom,s=t.selection,i=t.parser,a=At.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=At.deviceType.isiPhone()||At.deviceType.isiPad(),u=At.os.isMacOS()||At.os.isiOS(),g=(P,F)=>{try{t.getDoc().execCommand(P,!1,String(F))}catch{}},p=P=>P.isDefaultPrevented(),m=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",P=>{let F;if(P.target===t.getDoc().documentElement)if(F=s.getRng(),t.getBody().focus(),"mousedown"===P.type){if(gn(F.startContainer))return;s.placeCaretAt(P.clientX,P.clientY)}else s.setRng(F)})},f=()=>{Range.prototype.getClientRects||t.on("mousedown",P=>{if(!p(P)&&"HTML"===P.target.nodeName){const F=t.getBody();F.blur(),yn.setEditorTimeout(t,()=>{F.focus()})}})},v=()=>{const P=up(t);t.on("click",F=>{const M=F.target;/^(IMG|HR)$/.test(M.nodeName)&&"false"!==r.getContentEditableParent(M)&&(F.preventDefault(),t.selection.select(M),t.nodeChanged()),"A"===M.nodeName&&r.hasClass(M,P)&&0===M.childNodes.length&&(F.preventDefault(),s.select(M))})},y=()=>{t.on("keydown",P=>{if(!p(P)&&P.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const F=s.getNode().previousSibling;if(F&&F.nodeName&&"table"===F.nodeName.toLowerCase())return P.preventDefault(),!1}return!0})},_=()=>{cp(t)||t.on("BeforeExecCommand mousedown",()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),ap(t)||g("enableObjectResizing",!1)})},k=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},E=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",P=>{let F;"HTML"===P.target.nodeName&&(F=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(F),t.selection.normalize(),t.nodeChanged())}))},A=()=>{u&&t.on("keydown",P=>{!ct.metaKeyPressed(P)||P.shiftKey||37!==P.keyCode&&39!==P.keyCode||(P.preventDefault(),t.selection.getSel().modify("move",37===P.keyCode?"backward":"forward","lineboundary"))})},N=()=>{t.on("click",P=>{let F=P.target;do{if("A"===F.tagName)return void P.preventDefault()}while(F=F.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},R=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",P=>{P.preventDefault()})})},L=xt;return fo(t)?(c&&(b(),v(),R(),m(),d&&(E(),x(),N())),l&&(f(),_(),k(),A())):(t.on("keydown",P=>{if(p(P)||P.keyCode!==ct.BACKSPACE)return;let F=s.getRng();const M=F.startContainer,z=F.startOffset,G=r.getRoot();let Q=M;if(F.collapsed&&0===z){for(;Q.parentNode&&Q.parentNode.firstChild===Q&&Q.parentNode!==G;)Q=Q.parentNode;"BLOCKQUOTE"===Q.nodeName&&(t.formatter.toggle("blockquote",void 0,Q),F=r.createRng(),F.setStart(M,0),F.setEnd(M,0),s.setRng(F))}}),(()=>{const P=F=>{const M=r.create("body"),z=F.cloneContents();return M.appendChild(z),s.serializer.serialize(M,{format:"html"})};t.on("keydown",F=>{const M=F.keyCode;if(!p(F)&&(M===o||M===n)){const z=t.selection.isCollapsed(),G=t.getBody();if(z&&!r.isEmpty(G)||!z&&!(Q=>{const dt=P(Q),mt=r.createRng();return mt.selectNode(t.getBody()),dt===P(mt)})(t.selection.getRng()))return;F.preventDefault(),t.setContent(""),G.firstChild&&r.isBlock(G.firstChild)?t.selection.setCursorLocation(G.firstChild,0):t.selection.setCursorLocation(G,0),t.nodeChanged()}})})(),At.windowsPhone||t.on("keyup focusin mouseup",P=>{ct.modifierPressed(P)||(F=>{const M=F.getBody(),z=F.selection.getRng();return z.startContainer===z.endContainer&&z.startContainer===M&&0===z.startOffset&&z.endOffset===M.childNodes.length})(t)||s.normalize()},!0),c&&(b(),v(),t.on("init",()=>{g("DefaultParagraphSeparator",nn(t))}),R(),y(),i.addNodeFilter("br",P=>{let F=P.length;for(;F--;)"Apple-interchange-newline"===P[F].attr("class")&&P[F].remove()}),d?(E(),x(),N()):m()),l&&(t.on("keydown",P=>{if(!p(P)&&P.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const F=s.getNode(),M=F.previousSibling;if("HR"===F.nodeName)return r.remove(F),void P.preventDefault();M&&M.nodeName&&"hr"===M.nodeName.toLowerCase()&&(r.remove(M),P.preventDefault())}}}),f(),(()=>{const P=()=>{const M=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const z=s.getStart();z!==t.getBody()&&(r.setAttrib(z,"style",null),e(M,G=>{z.setAttributeNode(G.cloneNode(!0))}))}},F=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",M=>{let z;return!(!(p(M)||8!==M.keyCode&&46!==M.keyCode)&&F()&&(z=P(),t.getDoc().execCommand("delete",!1),z(),M.preventDefault(),1))}),r.bind(t.getDoc(),"cut",M=>{if(!p(M)&&F()){const z=P();yn.setEditorTimeout(t,()=>{z()})}})})(),_(),t.on("SetContent ExecCommand",P=>{"setcontent"!==P.type&&"mceInsertLink"!==P.command||e(r.select("a:not([data-mce-block])"),F=>{var M;let z=F.parentNode;const G=r.getRoot();if(z?.lastChild===F){for(;z&&!r.isBlock(z);){if((null===(M=z.parentNode)||void 0===M?void 0:M.lastChild)!==z||z===G)return;z=z.parentNode}r.add(z,"br",{"data-mce-bogus":1})}})}),k(),A(),y())),{refreshContentEditable:L,isHidden:()=>{if(!l||t.removed)return!1;const P=t.selection.getSel();return!P||!P.rangeCount||0===P.rangeCount}}})(i),i.dispatch("PostRender");const c=zk(i);void 0!==c&&(l.dir=c);const d=hx(i);d&&i.on("BeforeSetContent",u=>{Y.each(d,g=>{u.content=u.content.replace(g,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),i.on("SetContent",()=>{i.addVisual(i.getBody())}),i.on("compositionstart compositionend",u=>{i.composing="compositionstart"===u.type})})(t),s.fold(()=>{F1(t).then(()=>Xf(t))},i=>{t.setProgressState(!0),F1(t).then(()=>{i().then(a=>{t.setProgressState(!1),Xf(t),dy(t)},a=>{t.notificationManager.open({type:"error",text:String(a)}),Xf(t),dy(t)})})})},U1=(t,e)=>{if(t.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline)j1(t);else{const o=t.iframeElement,r=((t,e,n,o)=>((r,s,i,a,l)=>{const c=(d=i,u=a,g=>{d(g)&&u((p=>{const m=S(mg(p).getOr(p.target)),b=()=>p.stopPropagation(),f=()=>p.preventDefault(),v=Mn(f,b);return{target:m,x:p.clientX,y:p.clientY,stop:b,prevent:f,kill:v,raw:p}})(g))});var d,u;return r.dom.addEventListener(s,c,!1),{unbind:rt(Aw,r,s,c,!1)}})(t,"load",n,o))(S(o),0,oN,()=>{r.unbind(),t.contentDocument=o.contentDocument,j1(t)});if(At.browser.isFirefox()){const s=t.getDoc();s.open(),s.write(t.iframeHTML),s.close()}else o.srcdoc=t.iframeHTML}},Gf=Pt.DOM,z1=Pt.DOM,H1=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),$1=t=>{const e=t.getElement();return t.inline?H1(null):(n=>{const o=z1.create("div");return z1.insertAfter(o,n),H1(o,o)})(e)},ds=Pt.DOM,q1=t=>"-"===t.charAt(0),V1=(t,e,n)=>C.from(e).filter(o=>dn(o)&&!bc.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),W1=No().deviceType,K1=W1.isPhone(),ER=W1.isTablet(),La=t=>{if(It(t))return[];{const e=Xt(t)?t:t.split(/[ ,]/),n=Et(e,Ko);return gt(n,dn)}},Qf=(t,e)=>Ct(t.sections(),e),NR=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Mt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),AR=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?Y.extend({},t.external_plugins,o):o},OR=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,i)=>{const a=S(r.getRoot());return i=fa(a,j.fromRangeStart(s))?i.replace(/^ /,"&nbsp;"):i.replace(/^&nbsp;/," "),ga(a,j.fromRangeEnd(s))?i.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):i.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},Wc=(t,e)=>{const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=Y.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Pm(t,{...o,content:OR(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(a=r.content,l=o,Hm(t).editor.insertContent(a,l));var a,l;Im(t,s,r),t.addVisual()})},DR={"font-size":"size","font-family":"face"},BR=Ao("font"),Y1=t=>(e,n)=>C.from(n).map(S).filter(pe).bind(o=>{return(r=t,s=e,i=o.dom,mm(S(i),a=>{return ll(l=a,r).orThunk(()=>BR(l)?Mt(DR,r).bind(c=>en(l,c)):C.none());var l},a=>kt(S(s),a))).or(((r,s)=>C.from(Pt.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,i}).getOr(""),LR=Y1("font-size"),PR=Mn(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Y1("font-family")),IR=t=>Fe(t.getBody()).bind(e=>{const n=e.container();return C.from(K(n)?n.parentNode:n)}),Jf=(t,e)=>{return n=t,o=mi(C.some,e),(r=n,C.from(r.selection.getRng()).bind(s=>{const i=r.getBody();return s.startContainer===i&&0===s.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(rt(IR,n)).map(S).filter(pe).bind(o);var n,o,r},X1=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=Y.explode(t.options.get("font_size_style_values")),r=Y.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},MR=t=>{const e=t.split(/\s*,\s*/);return Et(e,n=>-1===n.indexOf(" ")||oe(n,'"')||oe(n,"'")?n:`'${n}'`).join(",")},jR=["toggleview"],G1=t=>Bt(jR,t.toLowerCase());class Q1{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,i=e.toLowerCase(),a=r?.skip_focus;if(s.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?Bu(c=s).each(d=>c.selection.setRng(d)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[i];return!!Rt(l)&&(l(i,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!G1(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Rt(o)&&o(n)}queryCommandValue(e){if(!G1(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Rt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Dt(e,(r,s)=>{W(s.toLowerCase().split(","),i=>{o[n][i]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,i,a)=>n.call(o??this.editor,i,a)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const si="data-mce-contenteditable",Zf=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Kc=(t,e)=>{t.dom.contentEditable=e?"true":"false"},us=t=>t.readonly,J1=t=>{t.parser.addAttributeFilter("contenteditable",e=>{us(t)&&W(e,n=>{n.attr(si,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(si,e=>{us(t)&&W(e,n=>{n.attr("contenteditable",n.attr(si))})}),t.serializer.addTempAttr(si)},zR=["copy"],HR=Y.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class tg{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||jt}static isNative(e){return!!HR[e.toLowerCase()]}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=Id(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let i=0,a=s.length;i<a;i++){const l=s[i];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=jt),n){const s={func:n,removed:!1};r&&Y.extend(s,r);const i=e.toLowerCase().split(" ");let a=i.length;for(;a--;){const l=i[a];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let i=this.bindings[s];if(!s)return Dt(this.bindings,(a,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(n){const a=Qn(i,l=>l.func===n);i=a.fail,this.bindings[s]=i,W(a.pass,l=>{l.removed=!0})}else i.length=0;i.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Dt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const Pa=t=>(t._eventDispatcher||(t._eventDispatcher=new tg({scope:t,toggleEvent:(e,n)=>{tg.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),eg={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return Id(t.toLowerCase(),e??{},o);const r=Pa(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return Pa(this).on(t,e,n)},off(t,e){return Pa(this).off(t,e)},once(t,e){return Pa(this).once(t,e)},hasEventListeners(t){return Pa(this).has(t)}},Yc=Pt.DOM;let ms;const Xc=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;const n=lp(t);return n?(t.eventRoot||(t.eventRoot=Yc.select(n)[0]),t.eventRoot):t.getBody()},Z1=(t,e,n)=>{var o;(o=t).hidden||us(o)?us(t)&&((o,r)=>{if("click"!==r.type||ct.metaKeyPressed(r))Bt(zR,r.type)&&o.dispatch(r.type,r);else{const s=S(r.target);(i=o,a=s,Fr(a,"a",l=>kt(l,S(i.getBody()))).bind(l=>en(l,"href"))).each(i=>{if(r.preventDefault(),/^#/.test(i)){const l=o.dom.select(`${i},[name="${a=i,oe(a,"#")?(c=a,c.substring(1)):a}"]`);l.length&&o.selection.scrollIntoView(l[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var c,a})}var i,a})(t,n):t.dispatch(e,n)},tw=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Xc(t,e);if(lp(t)){if(ms||(ms={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||ms&&(Dt(ms,(r,s)=>{t.dom.unbind(Xc(t,s))}),ms=null)})),ms[e])return;const o=r=>{const s=r.target,i=t.editorManager.get();let a=i.length;for(;a--;){const l=i[a].getBody();(l===s||Yc.isChildOf(s,l))&&Z1(i[a],e,r)}};ms[e]=o,Yc.bind(n,e,o)}else{const o=r=>{Z1(t,e,r)};Yc.bind(n,e,o),t.delegates[e]=o}},ew={...eg,bindPendingEventDelegates(){const t=this;Y.each(t._pendingNativeEvents,e=>{tw(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?tw(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Xc(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Dt(t.delegates,(o,r)=>{t.dom.unbind(Xc(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},$R=t=>ft(t)?{value:t.split(/[ ,]/),valid:!0}:Uo(t,ft)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},nw=(t,e)=>t+(Yo(e.message)?"":`. ${e.message}`),ow=t=>t.valid,ng=(t,e,n="")=>{const o=e(t);return ge(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},qR=["design","readonly"],rw=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}var i;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=S(t.getBody());var o,r,s;s=e,B(o=n,r="mce-content-readonly")&&!s?eo(o,r):s&&Br(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{C.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Kc(n,!1),W(Te(n,'*[contenteditable="true"]'),o=>{re(o,si,"true"),Kc(o,!1)})):(t.readonly=!1,Kc(n,!0),W(Te(n,'*[data-mce-contenteditable="true"]'),o=>{se(o,si),Kc(o,!0)}),Zf(t,"StyleWithCSS",!1),Zf(t,"enableInlineTableEditing",!1),Zf(t,"enableObjectResizing",!1),(o=>ns(o)||(r=>{const s=Go(S(r.getElement()));return Ou(s).filter(i=>!(a=>{const l=a.classList;return void 0!==l&&(l.contains("tox-edit-area")||l.contains("tox-edit-area__iframe")||l.contains("mce-content-body"))})(i.dom)&&Ql(r,i.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(i=t).dispatch("SwitchMode",{mode:o})},og=Y.each,rg=Y.explode,VR={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},sw=Y.makeMap("alt,ctrl,shift,meta,access"),WR=t=>{const e={},n=At.os.isMacOS()||At.os.isiOS();og(rg(t.toLowerCase(),"+"),s=>{s in sw?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=VR[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in sw)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class iw{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(og(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,i=s.normalizeCommandFunc(o);return og(rg(Y.trim(e)),a=>{const l=s.createShortcut(a,n,i,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:Y.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=Y.map(rg(e,">"),WR);return s[s.length-1]=Y.extend(s[s.length-1],{func:o,scope:r||this.editor}),Y.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const KR=()=>{const t=(()=>{const e={},n={},o={},r={},s={},i={},a={},l={},c=(d,u)=>(g,p)=>{d[g.toLowerCase()]={...p,type:u}};return{addButton:c(e,"button"),addGroupToolbarButton:c(e,"grouptoolbarbutton"),addToggleButton:c(e,"togglebutton"),addMenuButton:c(e,"menubutton"),addSplitButton:c(e,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(o,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(i,"contexttoolbar"),addContextForm:c(i,"contextform"),addSidebar:c(a,"sidebar"),addView:c(l,"views"),addIcon:(d,u)=>r[d.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:i,sidebars:a,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},fs=Pt.DOM,aw=Y.extend,YR=Y.each;class Gc{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,aw(this,ew);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const i=t?{mobile:NR(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},a=((t,e)=>{const n=((s,i)=>{const a={},l={};return xo(s,(c,d)=>Bt(t,d),gi(a),gi(l)),{t:a,f:l}})(e);return r=n.f,{sections:J(n.t),options:J(r)};var r})(["mobile"],Cf(i,r)),l=Y.extend(n,o,a.options(),t&&Qf(a,"mobile")?((c,d,u={})=>{const g=c.sections(),p=Mt(g,d).getOr({});return Y.extend({},u,p)})(a,"mobile"):{},{external_plugins:AR(o,a.options())});return((c,d,u,g)=>{const p=La(u.forced_plugins),m=La(g.plugins),b=Qf(y=d,"mobile")?y.sections().mobile:{},f=((y,_,k,E)=>y&&Qf(_,"mobile")?E:k)(c,d,m,b.plugins?La(b.plugins):m),v=((y,_)=>[...La(y),...La(_)])(p,f);var y;return Y.extend(g,{forced_plugins:p,plugins:v})})(t,a,o,l)})(K1||ER,K1,m=n,o.defaultOptions,m);var m;this.options=((p,m)=>{const b={},f={},v=(_,k,E)=>{const x=ng(k,E);return ow(x)?(f[_]=x.value,!0):(console.warn(nw(`Invalid value passed for the ${_} option`,x)),!1)},y=_=>Ct(b,_);return{register:(_,k)=>{const E=ft(k.processor)?(A=>{const N=(()=>{switch(A){case"array":return Xt;case"boolean":return ge;case"function":return Rt;case"number":return ln;case"object":return le;case"string":return ft;case"string[]":return $R;case"object[]":return R=>Uo(R,le);case"regexp":return R=>an(R,RegExp);default:return Gt}})();return R=>ng(R,N,`The value must be a ${A}.`)})(k.processor):k.processor,x=((A,N,R)=>{if(!zt(N)){const L=ng(N,R);if(ow(L))return L.value;console.error(nw(`Invalid default value passed for the "${A}" option`,L))}})(_,k.default,E);b[_]={...k,default:x,processor:E},Mt(f,_).orThunk(()=>Mt(m,_)).each(A=>v(_,A,E))},isRegistered:y,get:_=>Mt(f,_).orThunk(()=>Mt(b,_).map(k=>k.default)).getOrUndefined(),set:(_,k)=>{if(y(_)){const E=b[_];return E.immutable?(console.error(`"${_}" is an immutable option and cannot be updated`),!1):v(_,k,E.processor)}return console.warn(`"${_}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:_=>{const k=y(_);return k&&delete f[_],k},isSet:_=>Ct(f,_)}})(0,s),(p=>{const m=p.options.register;m("id",{processor:"string",default:p.id}),m("selector",{processor:"string"}),m("target",{processor:"object"}),m("suffix",{processor:"string"}),m("cache_suffix",{processor:"string"}),m("base_url",{processor:"string"}),m("referrer_policy",{processor:"string",default:""}),m("language_load",{processor:"boolean",default:!0}),m("inline",{processor:"boolean",default:!1}),m("iframe_attrs",{processor:"object",default:{}}),m("doctype",{processor:"string",default:"<!DOCTYPE html>"}),m("document_base_url",{processor:"string",default:p.documentBaseUrl}),m("body_id",{processor:Jh(p,"tinymce"),default:"tinymce"}),m("body_class",{processor:Jh(p),default:""}),m("content_security_policy",{processor:"string",default:""}),m("br_in_pre",{processor:"boolean",default:!0}),m("forced_root_block",{processor:b=>{const f=ft(b)&&dn(b);return f?{value:b,valid:f}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),m("forced_root_block_attrs",{processor:"object",default:{}}),m("newline_behavior",{processor:b=>{const f=Bt(["block","linebreak","invert","default"],b);return f?{value:b,valid:f}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),m("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),m("no_newline_selector",{processor:"string",default:""}),m("keep_styles",{processor:"boolean",default:!0}),m("end_container_on_empty_block",{processor:b=>ge(b)||ft(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),m("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),m("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),m("font_size_classes",{processor:"string",default:""}),m("automatic_uploads",{processor:"boolean",default:!0}),m("images_reuse_filename",{processor:"boolean",default:!1}),m("images_replace_blob_uris",{processor:"boolean",default:!0}),m("icons",{processor:"string",default:""}),m("icons_url",{processor:"string",default:""}),m("images_upload_url",{processor:"string",default:""}),m("images_upload_base_path",{processor:"string",default:""}),m("images_upload_credentials",{processor:"boolean",default:!1}),m("images_upload_handler",{processor:"function"}),m("language",{processor:"string",default:"en"}),m("language_url",{processor:"string",default:""}),m("entity_encoding",{processor:"string",default:"named"}),m("indent",{processor:"boolean",default:!0}),m("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_use_margin",{processor:"boolean",default:!1}),m("indentation",{processor:"string",default:"40px"}),m("content_css",{processor:b=>{const f=!1===b||ft(b)||Uo(b,ft);return f?ft(b)?{value:Et(b.split(","),Ko),valid:f}:Xt(b)?{value:b,valid:f}:!1===b?{value:[],valid:f}:{value:b,valid:f}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:tu(p)?[]:["default"]}),m("content_style",{processor:"string"}),m("content_css_cors",{processor:"boolean",default:!1}),m("font_css",{processor:b=>{const f=ft(b)||Uo(b,ft);return f?{value:Xt(b)?b:Et(b.split(","),Ko),valid:f}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),m("inline_boundaries",{processor:"boolean",default:!0}),m("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),m("object_resizing",{processor:b=>{const f=ge(b)||ft(b);return f?!1===b||Gd.isiPhone()||Gd.isiPad()?{value:"",valid:f}:{value:!0===b?"table,img,figure.image,div,video,iframe":b,valid:f}:{valid:!1,message:"Must be boolean or a string"}},default:!vk}),m("resize_img_proportional",{processor:"boolean",default:!0}),m("event_root",{processor:"object"}),m("service_message",{processor:"string"}),m("theme",{processor:b=>!1===b||ft(b)||Rt(b),default:"silver"}),m("theme_url",{processor:"string"}),m("formats",{processor:"object"}),m("format_empty_lines",{processor:"boolean",default:!1}),m("format_noneditable_selector",{processor:"string",default:""}),m("preview_styles",{processor:b=>{const f=!1===b||ft(b);return f?{value:!1===b?"":b,valid:f}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),m("custom_ui_selector",{processor:"string",default:""}),m("hidden_input",{processor:"boolean",default:!0}),m("submit_patch",{processor:"boolean",default:!0}),m("encoding",{processor:"string"}),m("add_form_submit_trigger",{processor:"boolean",default:!0}),m("add_unload_trigger",{processor:"boolean",default:!0}),m("custom_undo_redo_levels",{processor:"number",default:0}),m("disable_nodechange",{processor:"boolean",default:!1}),m("readonly",{processor:"boolean",default:!1}),m("plugins",{processor:"string[]",default:[]}),m("external_plugins",{processor:"object"}),m("forced_plugins",{processor:"string[]"}),m("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),m("model_url",{processor:"string"}),m("block_unsupported_drop",{processor:"boolean",default:!0}),m("visual",{processor:"boolean",default:!0}),m("visual_table_class",{processor:"string",default:"mce-item-table"}),m("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),m("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),m("setup",{processor:"function"}),m("init_instance_callback",{processor:"function"}),m("url_converter",{processor:"function",default:p.convertURL}),m("url_converter_scope",{processor:"object",default:p}),m("urlconverter_callback",{processor:"function"}),m("allow_conditional_comments",{processor:"boolean",default:!1}),m("allow_html_data_urls",{processor:"boolean",default:!1}),m("allow_svg_data_urls",{processor:"boolean"}),m("allow_html_in_named_anchor",{processor:"boolean",default:!1}),m("allow_script_urls",{processor:"boolean",default:!1}),m("allow_unsafe_link_target",{processor:"boolean",default:!1}),m("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),m("fix_list_elements",{processor:"boolean",default:!1}),m("preserve_cdata",{processor:"boolean",default:!1}),m("remove_trailing_brs",{processor:"boolean"}),m("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),m("element_format",{processor:"string",default:"html"}),m("entities",{processor:"string"}),m("schema",{processor:"string",default:"html5"}),m("convert_urls",{processor:"boolean",default:!0}),m("relative_urls",{processor:"boolean",default:!0}),m("remove_script_host",{processor:"boolean",default:!0}),m("custom_elements",{processor:"string"}),m("extended_valid_elements",{processor:"string"}),m("invalid_elements",{processor:"string"}),m("invalid_styles",{processor:Qd}),m("valid_children",{processor:"string"}),m("valid_classes",{processor:Qd}),m("valid_elements",{processor:"string"}),m("valid_styles",{processor:Qd}),m("verify_html",{processor:"boolean",default:!0}),m("auto_focus",{processor:b=>ft(b)||!0===b}),m("browser_spellcheck",{processor:"boolean",default:!1}),m("protect",{processor:"array"}),m("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),m("deprecation_warnings",{processor:"boolean",default:!0}),m("a11y_advanced_options",{processor:"boolean",default:!1}),m("api_key",{processor:"string"}),m("paste_block_drop",{processor:"boolean",default:!1}),m("paste_data_images",{processor:"boolean",default:!0}),m("paste_preprocess",{processor:"function"}),m("paste_postprocess",{processor:"function"}),m("paste_webkit_styles",{processor:"string",default:"none"}),m("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),m("paste_merge_formats",{processor:"boolean",default:!0}),m("smart_paste",{processor:"boolean",default:!0}),m("paste_as_text",{processor:"boolean",default:!1}),m("paste_tab_spaces",{processor:"number",default:4}),m("text_patterns",{processor:b=>Uo(b,le)||!1===b?{value:Gh(!1===b?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),m("text_patterns_lookup",{processor:b=>{return Rt(b)?{value:(f=b,v=>{const y=f(v);return Gh(y)}),valid:!0}:{valid:!1,message:"Must be a single function"};var f},default:b=>[]}),m("noneditable_class",{processor:"string",default:"mceNonEditable"}),m("editable_class",{processor:"string",default:"mceEditable"}),m("noneditable_regexp",{processor:b=>Uo(b,Qh)?{value:b,valid:!0}:Qh(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),m("table_tab_navigation",{processor:"boolean",default:!0}),p.on("ScriptsLoaded",()=>{m("directionality",{processor:"string",default:zn.isRtl()?"rtl":void 0}),m("placeholder",{processor:"string",default:yk.getAttrib(p.getElement(),"placeholder")})})})(r);const i=this.options.get;i("deprecation_warnings")&&((p,m)=>{((b,f)=>{const v=(t=>{const e=gt(XS,o=>Ct(t,o)),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),Co(e)})(b),y=(t=>{const e=Y.makeMap(t.plugins," "),n=gt(GS,o=>Ct(e,o));return Co(n)})(f),_=y.length>0,k=v.length>0,E="mobile"===f.theme;if(_||k||E){const x="\n- ",A=E?`\n\nThemes:${x}mobile`:"",N=_?`\n\nPlugins:${x}${y.join(x)}`:"",R=k?`\n\nOptions:${x}${v.join(x)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+A+N+R)}})(p,m)})(n,s);const a=i("suffix");a&&(o.suffix=a),this.suffix=o.suffix;const l=i("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=Jd(r);c&&(Oo.ScriptLoader._setReferrerPolicy(c),Pt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=dp(r);et(d)&&Pt.DOM.styleSheetLoader._setContentCssCors(d),Oe.languageLoad=i("language_load"),Oe.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Wn(Zh(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=tu(r),this.hasVisual=ax(r),this.shortcuts=new iw(this),this.editorCommands=new Q1(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{W("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Ht(s,i=>et(e.formatter.matchNode(i,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(At.os.isMacOS()||At.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),i=>!ot(i)||s++!==r||(e.selection.select(i),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),jn);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Wc(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Wc(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Wc(e,r)},mceInsertContent:(n,o,r)=>{Wc(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(t),(e=>{const n=(o,r,s)=>{const i=ft(s)?{href:s}:s,a=e.dom.getParent(e.selection.getNode(),"a");le(i)&&ft(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||e.formatter.remove("link"),i.href&&e.formatter.apply("link",i,a))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0)}else e.formatter.remove("link")},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{S_(e,"indent")},Outdent:()=>{N_(e)}}),e.editorCommands.addCommands({Outdent:()=>k_(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{jc(BC,e)},mceInsertNewLine:(n,o,r)=>{UC(e,r)},InsertLineBreak:(n,o,r)=>{jc(IC,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const i=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(i)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,i)=>{o(r,{value:i})},BackColor:(r,s,i)=>{o("hilitecolor",{value:i})},FontName:(r,s,i)=>{((a,l)=>{const c=X1(a,l);a.formatter.toggle("fontname",{value:MR(c)}),a.nodeChanged()})(n,i)},FontSize:(r,s,i)=>{var a;(a=n).formatter.toggle("fontsize",{value:X1(a,i)}),a.nodeChanged()},LineHeight:(r,s,i)=>{var a;(a=n).formatter.toggle("lineheight",{value:String(i)}),a.nodeChanged()},Lang:(r,s,i)=>{var a;o(r,{value:i.code,customValue:null!==(a=i.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,i)=>{o(ft(i)?i:"p")},mceToggleFormat:(r,s,i)=>{o(i)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Jf(r=n,s=>PR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Jf(r=n,s=>LR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Jf(r=n,s=>{const i=S(r.getBody());return mm(s,l=>ll(l,"line-height"),rt(kt,i)).getOrThunk(()=>{const l=parseFloat(no(s,"line-height")),c=parseFloat(no(s,"font-size"));return String(l/c)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const i=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(i)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?Iu(s):(a=>{const l=a.selection,c=a.getBody();let d=l.getRng();a.quirks.refreshContentEditable(),et(a.bookmark)&&!ns(a)&&Bu(a).each(g=>{a.selection.setRng(g),d=g});const u=(g=a,p=l.getNode(),g.dom.getParent(p,m=>"true"===g.dom.getContentEditable(m)));var g,p;if(u&&a.dom.isChildOf(u,c))return Pu(u),Ub(a,d),void Iu(a);a.inline||(At.browser.isOpera()||Pu(c),a.getWin().focus()),(At.browser.isFirefox()||a.inline)&&(Pu(c),Ub(a,d)),Iu(a)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=i("cache_suffix");u&&(At.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:KR(),styleSheetLoader:void 0,show:xt,hide:xt,setEnabled:xt,isEnabled:Gt},this.mode=(p=>{const m=ue("design"),b=ue({design:{activate:xt,deactivate:xt,editorReadOnly:!1},readonly:{activate:xt,deactivate:xt,editorReadOnly:!0}});return(f=p).serializer?J1(f):f.on("PreInit",()=>{J1(f)}),(f=>{f.on("ShowCaret",v=>{us(f)&&v.preventDefault()}),f.on("ObjectSelected",v=>{us(f)&&v.preventDefault()})})(p),{isReadOnly:()=>us(p),set:f=>((v,y,_,k)=>{if(k!==_.get()){if(!Ct(y,k))throw new Error(`Editor mode '${k}' is invalid`);v.initialized?rw(v,_,y,k):v.on("init",()=>rw(v,_,y,k))}})(p,b.get(),m,f),get:()=>m.get(),register:(f,v)=>{b.set(((y,_,k)=>{if(Bt(qR,_))throw new Error(`Cannot override default mode ${_}`);return{...y,[_]:{...k,deactivate:()=>{try{k.deactivate()}catch(E){console.error(`problem while deactivating editor mode ${_}:`,E)}}}}})(b.get(),f,v))}};var f})(r),o.dispatch("SetupEditor",{editor:this});const g=dx(r);Rt(g)&&g.call(r,r)}render(){(e=>{const n=e.id;zn.setCode(rp(e));const o=()=>{ds.unbind(window,"ready",o),e.render()};if(!Vr.Event.domLoaded)return void ds.bind(window,"ready",o);if(!e.getElement())return;const r=S(e.getElement()),s=Ri(r);var l;e.on("remove",()=>{Je(r.dom.attributes,a=>se(r,a.name)),to(r,s)}),e.ui.styleSheetLoader=Zg.forElement(r,{contentCssCors:dp(l=e),referrerPolicy:Jd(l)}),tu(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const i=e.getElement().form||ds.getParent(n,"form");i&&(e.formElement=i,Zk(e)&&!vd(e.getElement())&&(ds.insertAfter(ds.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=a=>{e.dispatch(a.type,a)},ds.bind(i,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!tx(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)))),e.windowManager=_y(e),e.notificationManager=yy(e),"xml"===e.options.get("encoding")&&e.on("GetContent",a=>{a.save&&(a.content=ds.encode(a.content))}),ex(e)&&e.on("submit",()=>{e.initialized&&e.save()}),nx(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Oo.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=Ms(r);return!ft(s)||et(cs.get(s))})(t)&&(r=>{const s=Zd(r);return et(Xs.get(s))})(t)&&(t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=Y.trim(op(n)),r=n.ui.registry.getAll().icons,s={...bc.get("default").icons,...bc.get(o).icons};Dt(s,(i,a)=>{Ct(r,a)||n.ui.registry.addIcon(a,i)})})(t),(n=>{const o=Ms(n);if(ft(o)){const r=cs.get(o);n.theme=r(n,cs.urls[o])||{},Rt(n.theme.init)&&n.theme.init(n,cs.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=Zd(n),r=Xs.get(o);n.model=r(n,Xs.urls[o])})(t),(n=>{const o=[];W(Tl(n),r=>{((s,i,a)=>{const l=Gs.get(a),c=Gs.urls[a]||s.documentBaseUrl.replace(/\/$/,"");if(a=Y.trim(a),l&&-1===Y.inArray(i,a)){if(s.plugins[a])return;try{const d=l(s,c)||{};s.plugins[a]=d,Rt(d.init)&&(d.init(s,c),i.push(a))}catch(d){((u,g,p)=>{const m=zn.translate(["Failed to initialize plugin: {0}",g]);cb(u,"PluginLoadError",{message:m}),yc(m,p),vc(u,m)})(s,a,d)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,ft(Ms(n))?(r=>{const s=r.theme.renderUI;return s?s():$1(r)})(n):Rt(Ms(n))?(r=>{const s=r.getElement(),i=Ms(r)(r,s);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||r.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||r.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:s.offsetHeight,i})(n):$1(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(xt),hide:C.from(o.hide).getOr(xt),isEnabled:C.from(o.isEnabled).getOr(Gt),setEnabled:s=>{n.mode.isReadOnly()||C.from(o.setEnabled).each(i=>i(s))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(wy(o=n,jk(o)),(o=>wy(o,ip(o)))(n)),t.inline?U1(t):((n,o)=>{((r,s)=>{const i=r.translate("Rich Text Area"),a=en(S(r.getElement()),"tabindex").bind(Es),l=((c,d,u,g)=>{const p=V("iframe");return g.each(m=>re(p,"tabindex",m)),to(p,u),to(p,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:d}),Br(p,"tox-edit-area__iframe"),p})(r.id,i,_k(r),a).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(c=>{let d=Ck(c)+"<html><head>";Zh(c)!==c.documentBaseUrl&&(d+='<base href="'+c.documentBaseURI.getURI()+'" />'),d+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=wk(c),g=kk(c),p=c.translate(cx(c));return tp(c)&&(d+='<meta http-equiv="Content-Security-Policy" content="'+tp(c)+'" />'),d+=`</head><body id="${u}" class="mce-content-body ${g}" data-id="${c.id}" aria-label="${p}"><br></body></html>`,d})(r),Gf.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Gf.isHidden(o.editorContainer)),n.getElement().style.display="none",Gf.setAttrib(n.id,"aria-hidden","true"),U1(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})})(t)};((r,s)=>{const i=Ms(r);if(ft(i)&&!q1(i)&&!Ct(cs.urls,i)){const a=Wk(r),l=a?r.documentBaseURI.toAbsolute(a):`themes/${i}/theme${s}.js`;cs.load(i,l).catch(()=>{_a(r,"ThemeLoadError",Ca("theme",l,i))})}})(t,e),((r,s)=>{const i=Zd(r);if("plugin"!==i&&!Ct(Xs.urls,i)){const a=Kk(r),l=ft(a)?r.documentBaseURI.toAbsolute(a):`models/${i}/model${s}.js`;Xs.load(i,l).catch(()=>{_a(r,"ModelLoadError",Ca("model",l,i))})}})(t,e),((r,s)=>{const i=rp(s),a=Mk(s);if(!zn.hasCode(i)&&"en"!==i){const l=dn(a)?a:`${s.editorManager.baseURL}/langs/${i}.js`;r.add(l).catch(()=>{_a(s,"LanguageLoadError",Ca("language",l,i))})}})(n,t),((r,s,i)=>{const a=V1(s,"default",i),l=(c=s,C.from(Ok(c)).filter(dn).map(d=>({url:d,name:C.none()}))).orThunk(()=>V1(s,op(s),""));var c;W((c=>{const d=[],u=g=>{d.push(g)};for(let g=0;g<c.length;g++)c[g].each(u);return d})([a,l]),c=>{r.add(c.url).catch(()=>{var d,u,g;d=s,u=c.url,g=c.name.getOrUndefined(),_a(d,"IconsLoadError",Ca("icons",u,g))})})})(n,t,e),((r,s)=>{const i=(a,l)=>{Gs.load(a,l).catch(()=>{_a(r,"PluginLoadError",Ca("plugin",l,a))})};Dt(sx(r),(a,l)=>{i(l,a),r.options.set("plugins",Tl(r).concat(l))}),W(Tl(r),a=>{!(a=Y.trim(a))||Gs.urls[a]||q1(a)||i(a,`plugins/${a}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ns(this)}translate(e){return zn.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(et(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Gt,default:n})),r.isSet(e)||zt(n)?r.get(e):n}hasPlugin(e,n){return!(!Bt(Tl(this),e)||n&&void 0===Gs.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(fs.show(e.getContainer()),fs.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(fs.hide(e.getContainer()),fs.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=vd(o)?o.value:o.innerHTML,i=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),i}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const i={...r,content:s};if(i.no_events||n.dispatch("SaveContent",i),"raw"===i.format&&n.dispatch("RawSaveContent",i),s=i.content,vd(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const a=fs.getParent(n.id,"form");a&&YR(a.elements,l=>l.name!==n.id||(l.value=s,!1))}return i.element=r.element=o=null,!1!==i.set_dirty&&n.setDirty(!1),s}setContent(e,n){return $m(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,i=o.format?o.format:"html",{...s,format:i,get:!0,getInner:!0});var s,i;return Q0(n,r).fold(Ce,s=>{const i=(l=s,Hm(n).editor.getContent(l));var l;return J0(n,i,s)})})(this,e)}insertContent(e,n){n&&(e=aw({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?$m(this,this.startContent,{format:"raw"}):$m(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||fs.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=fs.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,i=mx(r);return Rt(i)?i.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||le(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Qt(this).editor.addVisual(s)})(0,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&et(s?.nextSibling)&&hc.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&hc.setStyle((i=e).id,"display",i.orgDisplay),(i=>{i.dispatch("detach")})(e),hc.remove(e.getContainer()),pc(n),pc(o),e.destroy()}var i})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),pc(r),pc(s)),(i=>{const a=i.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),hc.unbind(a,"submit reset",i.formEventDelegate))})(n),(i=>{const a=i;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const l=i.selection;l&&(a.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ii=Pt.DOM,Qc=Y.each;let Jc,lw=!1,Ue=[];const Zc=t=>{const e=t.type;Qc(pr.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},cw=t=>{if(t!==lw){const e=Pt.DOM;t?(e.bind(window,"resize",Zc),e.bind(window,"scroll",Zc)):(e.unbind(window,"resize",Zc),e.unbind(window,"scroll",Zc)),lw=t}},dw=t=>{const e=Ue;return Ue=gt(Ue,n=>t!==n),pr.activeEditor===t&&(pr.activeEditor=Ue.length>0?Ue[0]:null),pr.focusedEditor===t&&(pr.focusedEditor=null),e.length!==Ue.length},XR="CSS1Compat"!==document.compatMode,pr={...eg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.1",releaseDate:"2022-12-06",i18n:zn,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=Wn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const a=document.currentScript.src;-1!==a.indexOf(".min")&&(n=".min"),e=a.substring(0,a.lastIndexOf("/"))}}var s;t.baseURL=new Wn(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new Wn(t.baseURL),t.suffix=n,(s=t).on("AddEditor",rt(yE,s)),s.on("RemoveEditor",rt(_E,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Dt(o,(r,s)=>{Oe.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=Y.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=i=>{n=i};const s=()=>{let i=0;const a=[];let l;var c;ii.unbind(window,"ready",s),(c=>{const d=t.onpageload;d&&d.apply(e,[])})(),l=((c,d)=>{const u=[],g=Rt(d)?p=>Ht(u,m=>d(m,p)):p=>Bt(u,p);for(let p=0,m=c.length;p<m;p++){const b=c[p];g(b)||u.push(b)}return u})((c=t,At.browser.isIE()||At.browser.isEdge()?(yc("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):XR?(yc("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ft(c.selector)?ii.select(c.selector):et(c.target)?[c.target]:[])),Y.each(l,c=>{var d;(d=e.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(dw(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=Y.grep(l,c=>!e.get(c.id)),0===l.length?r([]):Qc(l,c=>{t.inline&&c.tagName.toLowerCase()in o?yc("Could not initialize inline editor on invalid inline target element",c):((d,u,g)=>{const p=new Gc(d,u,e);a.push(p),p.on("init",()=>{++i===l.length&&r(a)}),p.targetElm=p.targetElm||g,p.render()})((d=>{let u=d.id;return u||(u=Mt(d,"name").filter(g=>!ii.get(g)).getOrThunk(ii.uniqueId),d.setAttribute("id",u)),u})(c),t,c)})};return ii.bind(window,"ready",s),new Promise(i=>{n?i(n):r=a=>{i(a)}})},get(t){return 0===arguments.length?Ue.slice(0):ft(t)?ne(Ue,e=>e.id===t).getOr(null):ln(t)&&Ue[t]?Ue[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Ue.push(t),cw(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Jc||(Jc=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Jc))),t},createEditor(t,e){return this.add(new Gc(t,e,this))},remove(t){const e=this;let n;if(t){if(!ft(t))return n=t,In(e.get(n.id))?null:(dw(n)&&e.dispatch("RemoveEditor",{editor:n}),0===Ue.length&&window.removeEventListener("beforeunload",Jc),n.remove(),cw(Ue.length>0),n);Qc(ii.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=Ue.length-1;o>=0;o--)e.remove(Ue[o])},execCommand(t,e,n){var o;const r=this,s=le(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Gc(s,n.options,r).render(),!0;case"mceRemoveEditor":{const i=r.get(s);return i&&i.remove(),!0}case"mceToggleEditor":{const i=r.get(s);return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Qc(Ue,t=>{t.save()})},addI18n:(t,e)=>{zn.add(t,e)},translate:t=>zn.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Wn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Wn(this.baseURL)}};pr.setup();const GR=(()=>{const t=sr();return{FakeClipboardItem:e=>({items:e,types:we(e),getType:n=>Mt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),uw=Math.min,ai=Math.max,td=Math.round,mw=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,i=t.h,a=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=a),"c"===c[0]&&(r+=td(l/2)),"c"===c[1]&&(o+=td(a/2)),"b"===c[3]&&(r-=i),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=td(i/2)),"c"===c[4]&&(o-=td(s/2)),li(o,r,s,i)},li=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),QR={inflate:(t,e,n)=>li(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:mw,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=mw(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=ai(t.x,e.x),o=ai(t.y,e.y),r=uw(t.x+t.w,e.x+e.w),s=uw(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:li(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,i=t.y+t.h;const a=e.x+e.w,l=e.y+e.h,c=ai(0,e.x-o),d=ai(0,e.y-r),u=ai(0,s-a),g=ai(0,i-l);return o+=c,r+=d,n&&(s+=c,i+=d,o-=u,r-=g),s-=u,i-=g,li(o,r,s-o,i-r)},create:li,fromClientRect:t=>li(t.left,t.top,t.width,t.height)},JR=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const i=new Promise((a,l)=>{const c=((d,u,g=1e3)=>{let p=!1,m=null;const b=y=>(..._)=>{p||(p=!0,null!==m&&(clearTimeout(m),m=null),y.apply(null,_))},f=b(d),v=b(u);return{start:(...y)=>{p||null!==m||(m=setTimeout(()=>v.apply(null,y),g))},resolve:f,reject:v}})(a,l);e[n]=c.resolve,Oo.ScriptLoader.loadScript(o).then(()=>c.start(s),()=>c.reject(r))});return t[n]=i,i}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let Ia;try{const t="__storage_test__";Ia=window.localStorage,Ia.setItem(t,t),Ia.removeItem(t)}catch{Ia=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const ZR={geom:{Rect:QR},util:{Delay:yn,Tools:Y,VK:ct,URI:Wn,EventDispatcher:tg,Observable:eg,I18n:zn,LocalStorage:Ia,ImageUploader:t=>{const e=ky(),n=Ey(t,e);return{upload:(o,r=!0)=>n.upload(o,r?xy(t):void 0)}}},dom:{EventUtils:Vr,TreeWalker:ie,TextSeeker:Kr,DOMUtils:Pt,ScriptLoader:Oo,RangeUtils:es,Serializer:py,StyleSheetLoader:Jg,ControlSelection:pb,BookmarkManager:aa,Selection:hy,Event:Vr.Event},html:{Styles:Pd,Entities:or,Node:je,Schema:rr,DomParser:Ys,Writer:tv,Serializer:dr},Env:At,AddOnManager:Oe,Annotator:ab,Formatter:Ay,UndoManager:Ty,EditorCommands:Q1,WindowManager:_y,NotificationManager:yy,EditorObservable:ew,Shortcuts:iw,Editor:Gc,FocusManager:jb,EditorManager:pr,DOM:Pt.DOM,ScriptLoader:Oo.ScriptLoader,PluginManager:Gs,ThemeManager:cs,ModelManager:Xs,IconManager:bc,Resource:JR,FakeClipboard:GR,trim:Y.trim,isArray:Y.isArray,is:Y.is,toArray:Y.toArray,makeMap:Y.makeMap,each:Y.each,map:Y.map,grep:Y.grep,inArray:Y.inArray,extend:Y.extend,walk:Y.walk,resolve:Y.resolve,explode:Y.explode,_addCacheSuffix:Y._addCacheSuffix},fw=Y.extend(pr,ZR);(t=>{window.tinymce=t,window.tinyMCE=t})(fw),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(fw)}();